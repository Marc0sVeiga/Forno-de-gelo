(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{757:(e,t,a)=>{"use strict";a.d(t,{O:()=>c});var s=a(54568),n=a(7620),r=a(51785),i=a(54140),l=a(33029),d=a(98720),o=a(78848);let c=(0,r.F)(e=>{let{call:t,title:a,description:r,onConfirm:c=()=>Promise.resolve(),onCancel:u=()=>Promise.resolve(),cancelButtonText:m="Cancel",confirmButtonText:p="Continue",variant:x="primary",disableConfirmButton:f=!1,disableCancelButton:b=!1,assetTitle:h,assetIcon:v}=e,[_,y]=(0,n.useState)(!1);return(0,o.jj)()?(0,s.jsx)(d.cj,{defaultOpen:!0,children:(0,s.jsxs)(d.h,{side:"bottom",onInteractOutside:()=>{t.end(!1)},className:"rounded-t-5 flex h-58 flex-col gap-6",children:[(0,s.jsxs)(d.Fm,{className:"flex flex-col items-start justify-between gap-1 self-stretch border-none p-6 pb-0",children:[(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,s.jsx)(d.qp,{className:"text-heading-md text-content-primary font-semibold",children:a}),(0,s.jsx)(d.Ml,{size:"icon-sm",onClick:()=>t.end(!1)})]}),(0,s.jsx)(d.Qs,{className:"text-body-sm text-content-tertiary",children:r})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-between gap-6 self-stretch p-6 pt-0",children:[(0,s.jsxs)("div",{className:"rounded-2 border-border-primary flex h-13 w-full items-center gap-4 border-1 p-2",children:[(0,s.jsx)("div",{className:"rounded-1 border-border-primary relative size-9 overflow-hidden border",children:v}),(0,s.jsx)("span",{className:"text-label-lg text-content-primary font-medium",children:h})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2 self-stretch",children:[(0,s.jsx)(i.$,{size:"md",variant:"outline",onClick:async()=>{await u(),t.end(!1)},disabled:b,children:m}),(0,s.jsx)(i.$,{size:"md",variant:x,onClick:async()=>{y(!0),await c(),t.end(!0)},disabled:f||_,children:p})]})]})]})}):(0,s.jsx)(l.lG,{defaultOpen:!0,children:(0,s.jsxs)(l.Cf,{onInteractOutside:()=>{t.end(!1)},className:"bg-background ring-border-primary rounded-4 size-full h-58 max-w-[min(calc(100vw-24px),556px)] flex-col items-end gap-4 ring-1 drop-shadow-sm",children:[(0,s.jsxs)(l.c7,{className:"flex flex-col items-start justify-between gap-1 self-stretch border-none p-6 pb-0",children:[(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,s.jsx)(l.L3,{className:"text-heading-md text-content-primary font-semibold",children:a}),(0,s.jsx)(l.De,{btnProps:{size:"icon-sm"}})]}),(0,s.jsx)(l.rr,{className:"text-body-sm text-content-tertiary",children:r})]}),(0,s.jsxs)(l.R4,{className:"flex flex-col items-start justify-between gap-4 self-stretch p-6 pt-0",children:[(0,s.jsxs)("div",{className:"rounded-2 border-border-primary flex h-13 w-full items-center gap-4 border-1 p-2",children:[(0,s.jsx)("div",{className:"rounded-1 border-border-primary relative size-9 overflow-hidden border",children:v}),(0,s.jsx)("span",{className:"text-label-lg text-content-primary font-medium",children:h})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2 self-stretch",children:[(0,s.jsx)(i.$,{size:"md",variant:"outline",onClick:async()=>{await u(),t.end(!1)},disabled:b,children:m}),(0,s.jsx)(i.$,{size:"md",variant:x,onClick:async()=>{y(!0),await c(),t.end(!0)},disabled:f||_,children:p})]})]})]})})})},788:(e,t,a)=>{"use strict";a.d(t,{F:()=>u,c:()=>m});var s=a(54568),n=a(4879),r=a(82806),i=a(7620),l=a(53881),d=a(60095),o=a(19533);let c=(0,i.createContext)(void 0),u=e=>{let{children:t}=e,{socket:a,socketSubscription:u}=(()=>{let[e,t]=(0,i.useState)(null),[a,s]=(0,i.useState)(null),{user:c}=(0,d.u)(),u=(0,i.useRef)(null),m=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(c)return(()=>{let e=(0,r.getCookie)(l.H.IMPERSONATE_USER_TOKEN,{domain:o.h.NEXT_PUBLIC_APP_DOMAIN})||(0,r.getCookie)(l.H.BEARER_TOKEN,{domain:o.h.NEXT_PUBLIC_APP_DOMAIN}),a=new n.Ft(o.h.NEXT_PUBLIC_REALTIME_API_URL,{token:e});a.on("connecting",e=>console.log("connecting",e)).on("connected",e=>console.log("connected over",e.transport)).on("disconnected",e=>console.log("disconnected",e)).connect();let i=a.newSubscription("user:".concat(c.id));u.current=a,m.current=i,t(a),s(i)})(),()=>{u.current&&(t(null),u.current.disconnect()),m.current&&(s(null),m.current.unsubscribe())}},[c]),{socket:e,socketSubscription:a}})(),m=(0,i.useMemo)(()=>({socket:a,socketSubscription:u}),[a,u]);return(0,s.jsx)(c.Provider,{value:m,children:t})},m=()=>{let e=(0,i.useContext)(c);if(!e)throw Error("useSocketContext must be used within a SocketProvider");return e}},4177:(e,t,a)=>{"use strict";a.d(t,{w:()=>n});var s=a(79536);let n=s.Ik({email:s.Rp()})},4187:(e,t,a)=>{"use strict";a.d(t,{$:()=>s});let s={RAKUTEN:"rakuten",POST_AFFILIATE:"pap",UTM:"utm",TAP:"tap",TOLT:"tolt",GROWI:"growi"}},5012:(e,t,a)=>{"use strict";a.d(t,{iT:()=>h,X5:()=>_,FK:()=>y});var s=a(99757),n=a(3149),r=a(27338),i=a(12331),l=a(60095),d=a(99958),o=a(29856),c=a(90416),u=a(29551),m=a(59761),p=a(90916),x=a(54582),f=a(47672);let b=async e=>{let t,{services:a,isDraftFolder:s,isPersonal:n,...r}=e,l={assets:(t=r.parentId&&!s?await u.o.getAllOrganizationAssets({service:a,...r}):await u.o.getAllOrganizationObjects({service:a,isUserOwned:n,...r})).data.assets.map(e=>{try{switch(e.service){case i.z1.APP_IMAGE:return(0,d.v)(e);case i.z1.APP_VIDEO:return(0,o.x)(e);default:return null}}catch(e){return null}}).filter(e=>null!=e)};return{...t,data:l}},h=e=>{let{parentId:t,isPersonal:a,orgId:s,isDraftFolder:n=!1}=e,r=[c.n.APP_ASSETS];return t&&!n&&r.push(t),null!=a&&r.push("".concat(a)),s&&r.push(s),[m.e.INFINITE,...r]},v=void 0,_=()=>{let{selectedFolderId:e,isPersonal:t,isDraftFolder:a}=(0,x.I)(),{user:n}=(0,l.u)(),{selectedOrganizationId:d}=(0,f.v)(),o=(0,s.q)({queryKey:h({parentId:e,isPersonal:t,orgId:d,isDraftFolder:a}),queryFn:async s=>{let{pageParam:n}=s;return await b({services:[i.z1.APP_IMAGE,i.z1.APP_VIDEO],isDraftFolder:a,limit:50,fromId:n,batch:!0,parentId:e,orgId:d,isPersonal:t})},getNextPageParam:e=>{var t;let{assets:a}=e.data;if(!(a.length<50))return null==(t=a[a.length-1])?void 0:t.uuid},staleTime:r.HZ,initialPageParam:v,enabled:!!n&&null!=e});return{...o,isLoading:o.isLoading}},y=()=>{let{selectedFolderId:e}=(0,x.I)(),{isPersonal:t,isDraftFolder:a}=(0,p.X)(),{selectedOrganizationId:s}=(0,f.v)();return(0,n.U)({queryKey:h({parentId:e,isPersonal:t,orgId:s,isDraftFolder:a}),queryFn:async a=>{let{pageParam:n}=a;return await b({services:[i.z1.APP_IMAGE,i.z1.APP_VIDEO],limit:50,fromId:n,batch:!0,parentId:e,orgId:s,isPersonal:t})},getNextPageParam:e=>{var t;let{assets:a}=e.data;if(!(a.length<50))return null==(t=a[a.length-1])?void 0:t.uuid},staleTime:r.HZ,initialPageParam:v})}},9094:(e,t,a)=>{"use strict";a.d(t,{V:()=>o,o:()=>d});var s=a(67933),n=a(27338),r=a(60095),i=a(34267),l=a(29551);let d=e=>[i.c.ORGS_BASE_TAG,i.c.ORGANIZATION_USERS,e],o=e=>{let{enabled:t,...a}=e,{user:i}=(0,r.u)();return(0,s.I)({queryKey:d(a.orgId),staleTime:n.I5,queryFn:()=>l.o.getOrganizationUsers({...a,pageSize:500}),enabled:!!i&&(null==t||t)})}},11360:(e,t,a)=>{"use strict";a.d(t,{k:()=>l});var s=a(54568),n=a(36922);a(7620);var r=a(11386);let i=(0,a(615).F)("bg-fill-tertiary-disabled relative h-2 w-full overflow-hidden rounded-full",{variants:{size:{sm:"h-1",lg:"h-1.5"}},defaultVariants:{size:"sm"}});function l(e){let{className:t,value:a,size:l,indicatorClassName:d,...o}=e;return(0,s.jsx)(n.bL,{"data-slot":"progress",className:(0,r.cn)(i({size:l,className:t})),...o,children:(0,s.jsx)(n.C1,{"data-slot":"progress-indicator",className:(0,r.cn)("bg-fill-inverse h-full w-full flex-1 transition-all",d),style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})}},13158:(e,t,a)=>{"use strict";a.d(t,{W:()=>l});var s=a(12331),n=a(59761),r=a(74679);let i=e=>{let{parentId:t,isPersonal:a,orgId:i}=e;return[(0,r.Qi)({parentId:null!=t?t:void 0,isPersonal:a,orgId:i}),(0,r.Qi)({services:[s.z1.VIDEO],parentId:null!=t?t:void 0,isPersonal:a,orgId:i}),[n.e.INFINITE,...(0,r.Qi)({parentId:null!=t?t:void 0,isPersonal:a,orgId:i})],[n.e.INFINITE,...(0,r.Qi)({services:[s.z1.VIDEO],parentId:null!=t?t:void 0,isPersonal:a,orgId:i})]]},l=e=>{let{parentId:t,isPersonal:a,orgId:s}=e;return void 0===t?i({parentId:t,isPersonal:a,orgId:s}):[...i({parentId:t,isPersonal:a,orgId:s}),...i({parentId:void 0,isPersonal:a,orgId:s})]}},13496:(e,t,a)=>{"use strict";a.d(t,{A:()=>x,E:()=>p,Jm:()=>v,bs:()=>_,pM:()=>m});var s=a(25826),n=a(52303),r=a(55437),i=a(12995),l=a(65762),d=a(59051),o=a(76376),c=a(32162),u=a(31625);let m=s.Ay$.enum([r.j.GENERATE_APP_IMAGE_ASYNC]),p=s.Ay$.object({data:o.k,style_id:s.Ay$.string(),metadata:u.p}),x=e=>{let t=(0,d.b)(h,JSON.parse(e.metadata));return{data:b((0,d.b)(f,JSON.parse(e.data),{generationType:n.c.IMAGE,imageAppId:-1,videoAppId:-1,aspect_ratio:"1:1"})),styleId:e.style_id,metadata:t}},f=s.Ay$.object({generationType:s.Ay$.literal(n.c.IMAGE),imageAppId:s.Ay$.number(),videoAppId:s.Ay$.number()}).and(s.Ay$.union([s.Ay$.object({image_size:s.Ay$.object({width:s.Ay$.number(),height:s.Ay$.number()}),aspect_ratio:s.Ay$.never().optional()}),s.Ay$.object({aspect_ratio:s.Ay$.string(),image_size:s.Ay$.never().optional()})])).and(s.Ay$.record(s.Ay$.string(),s.Ay$.unknown())),b=e=>{var t,a;let{aspect_ratio:s,image_size:r,imageAppId:i,videoAppId:l,generationType:d,...o}=e;return r?{aspectHeight:r.height,aspectWidth:r.width,generationType:n.c.IMAGE,imageAppId:i,videoAppId:l,imageSize:r,...o}:{aspectHeight:Number(null!=(t=s.split(":")[1])?t:1),aspectWidth:Number(null!=(a=s.split(":")[0])?a:1),generationType:n.c.IMAGE,imageAppId:i,videoAppId:l,aspectRatio:s,...o}},h=s.Ay$.object({placeholderUuid:s.Ay$.string().optional(),slug:s.Ay$.string().optional()}),v=s.Ay$.object({generation:c.aB,inputs:c.aB,thumbnail:c.aB,variation:c.aB}),_=e=>({generation:(0,i._)(e.generation),inputs:e.inputs,thumbnail:(0,i._)(e.thumbnail),variation:e.variation});s.Ay$.literal(l.A.APP_IMAGE_GENERATION)},14619:(e,t,a)=>{"use strict";a.d(t,{ThemeProvider:()=>d});var s=a(54568),n=a(62942),r=a(68309),i=a(16001);let l=[{pathname:a(20844).ze.IMAGINE_1_5,exact:!0,forcedTheme:"dark",dynamic:!1}],d=e=>{let{children:t}=e,a=(0,n.usePathname)();return(0,s.jsx)(r.N,{forcedTheme:(e=>{let t=l.find(t=>{let{pathname:a,exact:s,dynamic:n}=t;return(0,i.W)({pathname:e,targetPath:a,exact:s,dynamic:n})});return null==t?void 0:t.forcedTheme})(a),enableSystem:!0,attribute:"class",disableTransitionOnChange:!0,children:t})}},15652:(e,t,a)=>{"use strict";a.d(t,{DowntimeOverlayRoot:()=>n});var s=a(54568);a(7620);let n=e=>{let{children:t}=e;return(0,s.jsx)("div",{className:"bg-background flex h-screen w-full flex-col items-center gap-32 p-8 text-center [&_*]:relative",children:t})}},16750:(e,t,a)=>{"use strict";a.d(t,{B:()=>s});let s=(0,a(615).F)("text-content-tertiary text-label-md px-2 pt-2 pb-1 font-medium",{variants:{variant:{primary:"bg-surface-primary-variant",secondary:"bg-surface-elevated"},sticky:{true:"sticky top-0 left-0 z-1",false:""}},defaultVariants:{variant:"primary",sticky:!1}})},16811:(e,t,a)=>{"use strict";a.d(t,{y:()=>s});let s={IMAGE_GENERATED_EVENT:"image_generated_event",IMAGE_EDITED_EVENT:"image_edited_event",CLEAR_EDITOR_SELECTION_EVENT:"clear_editor_selection_event",ASSETS_DROPPED_ON_FOLDER_EVENT:"assets_dropped_on_folder_event",VIDEO_GENERATION_STARTED_EVENT:"video_generation_started_event",IMAGE_GENERATION_STARTED_EVENT:"image_generation_started_event"}},25011:(e,t,a)=>{"use strict";a.d(t,{px:()=>_,vB:()=>v});var s=a(25826),n=a(55437),r=a(59051),i=a(12331),l=a(32162),d=a(31625),o=a(37328),c=a(12995),u=a(65762);let m=s.Ay$.enum([n.j.GENERATE_TRANSFER_MOTION_ASYNC]),p=s.Ay$.literal(o.FE.IMAGE_TO_VIDEO),x=s.Ay$.object({aspect_ratio:s.Ay$.string(),file_url:s.Ay$.string(),reference_url:s.Ay$.string(),style_id:s.Ay$.string(),duration:s.Ay$.string(),resolution:s.Ay$.string().optional(),variation:p,metadata:d.p}),f=s.Ay$.object({placeholderUuid:s.Ay$.string().optional()});s.Ay$.literal(u.A.TRANSFER_MOTION_GENERATION);let b=s.Ay$.object({generation:l.aB,inputs:l.aB,thumbnail:l.aB}),h=s.Ay$.union([m]),v=e=>{let t=(0,r.b)(h,e.endpoint);if(t===n.j.GENERATE_TRANSFER_MOTION_ASYNC)return(e=>{let t=(e=>{let t=(0,r.b)(f,JSON.parse(e.metadata));return{aspectRatio:e.aspect_ratio,fileUrl:e.file_url,referenceUrl:e.reference_url,styleId:e.style_id,duration:Number(e.duration),variation:e.variation,metadata:t}})((0,r.b)(x,e.settings,{aspect_ratio:"1:1",file_url:"",reference_url:"",style_id:"",duration:"1",variation:o.FE.IMAGE_TO_VIDEO,metadata:"{}"})),a=(e=>({generation:(0,c._)(e.generation),thumbnail:(0,c._)(e.thumbnail),inputs:(0,c._)(e.inputs)}))((0,r.b)(b,e.url,{generation:[],thumbnail:[],inputs:[]}));return{...e,settings:t,url:a,tag:u.A.TRANSFER_MOTION_GENERATION,service:i.z1.MOTION}})({...e,endpoint:t})},_=e=>({assets:e.assets.map(e=>{try{return v(e)}catch(e){return null}}).filter(e=>null!=e)})},26834:(e,t,a)=>{Promise.resolve().then(a.bind(a,15652)),Promise.resolve().then(a.bind(a,88168)),Promise.resolve().then(a.bind(a,83728)),Promise.resolve().then(a.bind(a,88512)),Promise.resolve().then(a.bind(a,92414)),Promise.resolve().then(a.bind(a,14619)),Promise.resolve().then(a.t.bind(a,27261,23)),Promise.resolve().then(a.t.bind(a,73970,23)),Promise.resolve().then(a.t.bind(a,44760,23)),Promise.resolve().then(a.t.bind(a,41893,23)),Promise.resolve().then(a.bind(a,66630)),Promise.resolve().then(a.t.bind(a,88766,23)),Promise.resolve().then(a.t.bind(a,32925,23))},29856:(e,t,a)=>{"use strict";a.d(t,{x:()=>o});var s=a(55437),n=a(97706),r=a(59051),i=a(12331),l=a(65762),d=a(19136);let o=e=>{let t=(0,r.b)(n.Nz,e.endpoint);if(t===s.j.GENERATE_APP_VIDEO_ASYNC)return(e=>{let t=(0,r.b)(n._C,e.settings),a=(0,n.I5)(t),s=(0,r.b)(n.N5,e.url),o=(0,n.R6)(s);return{...e,settings:a,url:o,tag:l.A.APP_VIDEO_GENERATION,service:i.z1.APP_VIDEO,refService:void 0,type:d.KJ.OBJECT}})({...e,endpoint:t})}},30744:(e,t,a)=>{"use strict";a.d(t,{u:()=>l});var s=a(12331),n=a(59761),r=a(74679);let i=e=>{let{parentId:t,isPersonal:a,orgId:i}=e;return[(0,r.Qi)({parentId:null!=t?t:void 0,isPersonal:a,orgId:i}),(0,r.Qi)({services:[s.z1.IMAGE],parentId:null!=t?t:void 0,isPersonal:a,orgId:i}),[n.e.INFINITE,...(0,r.Qi)({parentId:null!=t?t:void 0,isPersonal:a,orgId:i})],[n.e.INFINITE,...(0,r.Qi)({services:[s.z1.IMAGE],parentId:null!=t?t:void 0,isPersonal:a,orgId:i})]]},l=e=>{let{parentId:t,isPersonal:a,orgId:s}=e;return void 0===t?i({parentId:t,isPersonal:a,orgId:s}):[...i({parentId:t,isPersonal:a,orgId:s}),...i({parentId:void 0,isPersonal:a,orgId:s})]}},31201:(e,t,a)=>{"use strict";a.d(t,{x:()=>r});var s=a(89329),n=a(19533);let r=(0,a(48164).d)(s.A.create({baseURL:n.h.NEXT_PUBLIC_ANPU_API_URL}))},33142:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(54568),n=a(40916),r=a(7620),i=a(11386);function l(e){let{className:t,defaultValue:a,value:l,min:d=0,max:o=100,includeRange:c=!0,...u}=e,m=r.useMemo(()=>Array.isArray(l)?l:Array.isArray(a)?a:[d,o],[l,a,d,o]);return(0,s.jsxs)(n.bL,{"data-slot":"slider",defaultValue:a,value:l,min:d,max:o,className:(0,i.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...u,children:[(0,s.jsx)(n.CC,{"data-slot":"slider-track",className:(0,i.cn)("bg-fill-tertiary-disabled relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:c&&(0,s.jsx)(n.Q6,{"data-slot":"slider-range",className:(0,i.cn)("bg-fill-inverse absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:m.length},(e,t)=>(0,s.jsx)(n.zi,{"data-slot":"slider-thumb",className:"border-border-inverse bg-fill-primary ring-surface-primary-alternate block size-4 cursor-pointer rounded-full border-[3px] ring-2 transition-colors focus-visible:ring-2 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50"},t))]})}},33400:(e,t,a)=>{"use strict";a.d(t,{DI:()=>n,V8:()=>o,oP:()=>d,sF:()=>r,u$:()=>l});var s=a(79536);let n=e=>s.Ik({result:e});s.Ik({}).loose();let r={HAS_SEEN_ONBOARDING_PERSONA_MODAL:"hasSeenOnboardingPersonaModal",HAS_SEEN_USER_TRAINING_MODAL:"hasSeenUserTrainingModal",HAS_SEEN_IMAGE_TRAINING_MODEL_TIPS_SCREEN:"hasSeenImageTrainingModelTipsScreen",HAS_SEEN_NPS_SURVEY_FORM:"hasSeenNPSSurveyForm",HAS_SEEN_GENERAL_IMAGE_GENERATION_SURVEY_FORM:"hasSeenGeneralImageGenerationSurveyForm",HAS_SEEN_GENERAL_IMAGE_EDIT_SURVEY_FORM:"hasSeenGeneralImageEditSurveyForm"};s.eu("IMAGINE_WEB");let i=s.Ik({id:s.ai(),status:s.zM(),name:s.Yj()}),l=s.Ik({status:s.zM()}),d=s.Ik({flags:s.YO(i)}),o=s.Ik({flagId:s.ai(),status:s.zM()})},33618:(e,t,a)=>{"use strict";a.d(t,{D:()=>f});var s=a(7620),n=a(55437),r=a(92184),i=a(36270),l=a(59051),d=a(79536);let o=d.Ik({user_id:d.Yj(),name:d.Yj().nullable(),username:d.Yj(),email:d.Yj().nullable(),description:d.Yj().nullable(),facebook_url:d.Yj().nullable(),instagram_url:d.Yj().nullable(),linkedin_url:d.Yj().nullable(),pinterest_url:d.Yj().nullable(),twitter_url:d.Yj().nullable(),tiktok_url:d.Yj().nullable(),behance_url:d.Yj().nullable(),dribbble_url:d.Yj().nullable(),youtube_url:d.Yj().nullable(),views:d.ai(),downloads:d.ai(),bookmarks:d.ai(),profile_image_key:d.Yj().nullable(),profile_banner_key:d.Yj().nullable(),updated_at:d.Yj().optional()}),c=d.Ik({status:d.Yj(),profile:o}),u=e=>{var t;let a=null!=(t=e.profile.updated_at)?t:new Date().toISOString();return{userId:e.profile.user_id,name:e.profile.name,username:e.profile.username,email:e.profile.email,description:e.profile.description,facebookUrl:e.profile.facebook_url,instagramUrl:e.profile.instagram_url,linkedinUrl:e.profile.linkedin_url,pinterestUrl:e.profile.pinterest_url,twitterUrl:e.profile.twitter_url,tiktokUrl:e.profile.tiktok_url,behanceUrl:e.profile.behance_url,dribbbleUrl:e.profile.dribbble_url,youtubeUrl:e.profile.youtube_url,views:e.profile.views,downloads:e.profile.downloads,bookmarks:e.profile.bookmarks,profileImageKey:e.profile.profile_image_key,profileBannerKey:e.profile.profile_banner_key,updatedAt:a}};var m=a(25826);m.Ay$.object({name:m.Ay$.string().optional(),username:m.Ay$.string().nullable().optional(),description:m.Ay$.string().nullable().optional(),facebook_url:m.Ay$.string().nullable().optional(),instagram_url:m.Ay$.string().nullable().optional(),linkedin_url:m.Ay$.string().nullable().optional(),pinterest_url:m.Ay$.string().nullable().optional(),twitter_url:m.Ay$.string().nullable().optional(),tiktok_url:m.Ay$.string().nullable().optional(),behance_url:m.Ay$.string().nullable().optional(),dribbble_url:m.Ay$.string().nullable().optional(),youtube_url:m.Ay$.string().nullable().optional(),banner:m.Ay$.file().nullable().optional(),avatar:m.Ay$.file().nullable().optional()});let p=m.Ay$.object({status:m.Ay$.string()});class x{async getMyProfile(){let e=await (0,r.hZ)(async()=>await this._client.get(n.j.PROFILE)),t=u((0,l.b)(c,e.data));return{...e,data:t}}async getProfileByUsername(e){let t=await (0,r.hZ)(async()=>await this._client.get(n.j.PROFILE_BY_USERNAME.replace(":username",e))),a=u((0,l.b)(c,t.data));return{...t,data:a}}async updateUserProfile(e){let t=(0,i.j)(e),a=await (0,r.hZ)(async()=>await this._client.put(n.j.PROFILE,t)),s=(0,l.b)(p,a.data);return{...a,data:s}}constructor({client:e}){this._client=e}}let f=new x({client:a(31201).x});(0,s.cache)(async e=>await f.getProfileByUsername(e))},36348:(e,t,a)=>{"use strict";a.d(t,{M:()=>m,p:()=>u});var s=a(89329),n=a(59051),r=a(33400);let i=(0,r.DI)(r.oP),l=(0,r.DI)(r.u$),d=(0,r.DI)(r.V8);class o{async getSingleUserFlag(e){var t;let{name:a,platform:s="IMAGINE_WEB",requestOptions:r}=e,i=await this._client.get("/user/flags",{...null!=r?r:{},params:{name:a,platform:s,...null!=(t=null==r?void 0:r.params)?t:{}}}),d=(e=>{let{result:t}=e;return t})((0,n.b)(l,i.data));return{...i,data:d}}async getAllUserFlags(){var e;let{requestOptions:t,platform:a="IMAGINE_WEB"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=await this._client.get("/user/flags/all",{...null!=t?t:{},params:{platform:a,...null!=(e=null==t?void 0:t.params)?e:{}}}),r=(e=>{let{result:t}=e;return t})((0,n.b)(i,s.data));return{...s,data:r}}async updateUserFlag(e){let{payload:t,platform:a="IMAGINE_WEB",requestOptions:s}=e,r=await this._client.post("/user/flags",{...t,platform:a},null!=s?s:void 0),i=(e=>{let{result:t}=e;return t})((0,n.b)(d,r.data));return{...r,data:i}}constructor({client:e}){this._client=e}}var c=a(19533);let u=(0,a(48164).d)(s.A.create({baseURL:c.h.NEXT_PUBLIC_FLAGS_API_URL})),m=new o({client:u})},37964:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var s=a(5012);let n=e=>{let{parentId:t,isPersonal:a,orgId:n}=e;return void 0===t?[(0,s.iT)({parentId:t,isPersonal:a,orgId:n})]:[(0,s.iT)({parentId:t,isPersonal:a,orgId:n}),(0,s.iT)({parentId:void 0,isPersonal:a,orgId:n})]}},38648:(e,t,a)=>{"use strict";a.d(t,{S:()=>d});var s=a(54568),n=a(32743);a(7620);var r=a(46626),i=a(11386);let l=(0,a(615).F)("",{variants:{size:{sm:"size-4 rounded-1",md:"size-5 rounded-1.5",none:""}},defaultVariants:{size:"md"}}),d=e=>{let{className:t,size:a,intermediate:d=!1,...o}=e;return(0,s.jsx)(n.bL,{"data-slot":"checkbox",className:(0,i.cn)("group peer border-border-tertiary focus-within:border-border-tertiary-hover focus-within:ring-offset-border-primary data-[state=checked]:bg-fill-inverse data-[state=checked]:text-content-primary hover:border-border-tertiary-hover data-[state=checked]:hover:bg-fill-inverse-hover focus-visible:ring-border-inverse-hover focus-visible:ring-offset-border-primary disabled:border-border-tertiary-disabled data-[state=checked]:disabled:bg-fill-inverse-disabled relative shrink-0 border focus-visible:ring-1 focus-visible:ring-offset-2 focus-visible:outline-none disabled:cursor-not-allowed data-[state=checked]:border-none",l({size:a}),t),...o,children:(0,s.jsx)(n.C1,{"data-slot":"checkbox-indicator",className:(0,i.cn)("absolute inset-0 flex items-center justify-center text-current"),children:d?(0,s.jsx)("div",{className:(0,i.cn)("bg-content-primary group-disabled:bg-content-primary-disabled h-0.5 rounded-full",{"w-[9px]":"md"===a},{"w-2":"sm"===a})}):(0,s.jsx)(r.Srz,{className:(0,i.cn)("text-content-primary-inverse group-disabled:text-content-primary-inverse-disabled",{"size-4":"md"===a},{"size-3":"sm"===a})})})})}},49759:(e,t,a)=>{"use strict";a.d(t,{g:()=>n,t:()=>s});let s={REGULAR:"regular",PRODUCT_HUNT:"product_hunt"},n={IMAGE:"image",VIDEO:"video"}},51912:(e,t,a)=>{"use strict";a.d(t,{P:()=>s});let s=(0,a(91039).default)(()=>Promise.all([a.e(6855),a.e(7295)]).then(a.t.bind(a,7295,23)),{loadableGenerated:{webpack:()=>[7295]},ssr:!1})},52303:(e,t,a)=>{"use strict";a.d(t,{c:()=>n,d:()=>r});var s=a(25826);let n={IMAGE:"image",VIDEO:"video"},r=s.Ay$.literal(Object.values(n))},53163:(e,t,a)=>{"use strict";a.d(t,{KA:()=>r,ge:()=>s,i7:()=>n});let s=(e,t)=>{document.addEventListener(e,t)},n=(e,t)=>{document.removeEventListener(e,t)},r=(e,t)=>{let a=new CustomEvent(e,{detail:t});document.dispatchEvent(a)}},54828:(e,t,a)=>{"use strict";a.d(t,{y:()=>s});let s={ALL_FLAGS:"all-flags",SINGLE_FLAG:"single-flag"}},66630:(e,t,a)=>{"use strict";a.d(t,{Toaster:()=>d});var s=a(54568),n=a(68309),r=a(51874),i=a(46626);let l=(0,a(54140).r)({size:"xs",variant:"secondary",className:"ml-auto"}),d=e=>{let{...t}=e,{theme:a="system"}=(0,n.D)();return(0,s.jsx)(r.l$,{theme:a,position:"top-center",toastOptions:{classNames:{toast:"flex pointer-events-auto items-center w-full rounded-3 shadow-sm px-3 py-2 gap-3 text-label-md font-medium ring-inset ring-1 border-none ring-border-primary bg-surface-primary-variant",description:"text-content-tertiary text-label-md",actionButton:l,icon:"size-5",title:"text-label-md text-content-secondary",closeButton:"order-last !bg-surface-primary-variant size-4 !text-content-secondary [&>svg]:stroke-2 [&>svg]:size-4 cursor-pointer"},unstyled:!0},icons:{success:(0,s.jsx)(i.j5u,{className:"text-fill-success size-5"}),error:(0,s.jsx)(i.KhD,{className:"text-fill-critical size-5"}),warning:(0,s.jsx)(i.Mp0,{className:"text-fill-warning size-5"})},...t})}},67287:(e,t,a)=>{"use strict";a.d(t,{M:()=>m});var s=a(55437),n=a(22470),r=a(59051),i=a(12331),l=a(44455),d=a(65762),o=a(19136),c=a(49074),u=a(29003);let m=e=>{let t=(0,r.b)(n.i,e.endpoint);switch(t){case s.j.GENERATE_IMAGE:case s.j.GENERATE_IMAGE_ASYNC:case s.j.GENERATE_TRANSPARENT_IMAGE:case s.j.GENERATE_TRANSPARENT_IMAGE_ASYNC:return(e=>{let t=(0,c.JO)(e.settings),a=(0,c.qf)(e.url);return{...e,settings:t,url:a,tag:d.A.IMAGE_GENERATION,service:i.z1.IMAGE,refService:void 0,type:o.KJ.OBJECT}})({...e,endpoint:t});case s.j.UPSCALE_IMAGE_ASYNC:case s.j.UPSCALE_IMAGE:return(e=>{let t=(0,u.IQ)(e.settings),a=(0,u.l5)(e.url);return{...e,settings:t,url:a,tag:d.A.IMAGE_UPSCALE,service:i.z1.IMAGE,refService:void 0,type:o.KJ.OBJECT}})({...e,endpoint:t});case s.j.REMOVE_IMAGE_BACKGROUND:case s.j.REMOVE_IMAGE_BACKGROUND_ASYNC:return(e=>{let t=(0,l.Mb)(e.settings),a=(0,l.O)(e.url);return{...e,settings:t,url:a,tag:d.A.IMAGE_REMOVE_BG,service:i.z1.IMAGE,refService:void 0,type:o.KJ.OBJECT}})({...e,endpoint:t})}}},68407:(e,t,a)=>{"use strict";a.d(t,{g:()=>d,l:()=>o});var s=a(67933),n=a(27338),r=a(60095),i=a(34267),l=a(29551);let d=e=>{let{orgId:t}=e;return[i.c.ORGS_BASE_TAG,i.c.ORGANIZATION_JOIN_REQUESTS,t]},o=e=>{let{enabled:t,...a}=e,{user:i}=(0,r.u)();return(0,s.I)({queryKey:d({orgId:a.orgId}),staleTime:n.I5,queryFn:()=>l.o.getOrganizationJoinRequests({...a,pageSize:200}),enabled:!!i&&(null==t||t)})}},71170:(e,t,a)=>{"use strict";a.d(t,{o:()=>u});var s=a(55437),n=a(46660),r=a(59051),i=a(12331),l=a(37328),d=a(65762),o=a(19136),c=a(3793);let u=e=>{let t=(0,r.b)(n.q,e.endpoint);switch(t){case s.j.GENERATE_VIDEO_ASYNC:return(e=>{let t=(0,l.rQ)(e.settings),a=(0,l.U9)(e.url);return{...e,settings:t,url:a,tag:d.A.VIDEO_GENERATION,service:i.z1.VIDEO,refService:void 0,type:o.KJ.OBJECT}})({...e,endpoint:t});case s.j.ENHANCE_VIDEO_UPLOAD:return(e=>{let t=(0,c.uw)(e.settings),a=(0,c.tg)(e.url);return{...e,settings:t,url:a,tag:d.A.VIDEO_UPSCALE,service:i.z1.VIDEO,refService:void 0,type:o.KJ.OBJECT}})({...e,endpoint:t})}}},71387:(e,t,a)=>{"use strict";a.d(t,{E:()=>s});let s={VIDEO_GENERATION_SOURCE:"video_generation_source",ONBOARDING_USER_PERSONA_ANSWER:"onboarding_user_persona_answer",ONBOARDING_USER_INITIAL_GOAL:"onboarding_user_initial_goal",ONBOARDING_USER_CADENCE:"onboarding_user_cadence",ONBOARDING_USER_MEDIA_TYPE:"onboarding_user_media_type",ONBOARDING_USER_MEMBERS:"onboarding_user_members",TRANSFER_MOTION_CHARACTER_SOURCE:"transfer_motion_character_source",TRANSFER_MOTION_EXPRESSION_SOURCE:"transfer_motion_expression_source"}},73352:(e,t,a)=>{"use strict";a.d(t,{j_:()=>o,rz:()=>d,BU:()=>u,lx:()=>m,QT:()=>p});var s=a(54568),n=a(7620),r=a(49074),i=a(3397);let l=(0,n.createContext)(null),d=-1,o={aspectRatio:["1:1"],description:"",icon:"",id:-1,maxImages:0,minImages:0,name:"-",modelId:-1,oldModelIds:void 0,presets:[],isEnhance:!1,enhancerId:void 0},c={aspectRatio:["1:1"],description:"",icon:"",id:-1,maxImages:0,minImages:0,name:"Legacy",modelId:-1,oldModelIds:void 0,presets:[],isEnhance:!1,enhancerId:void 0},u={id:-1,modelId:-1,oldModelIds:void 0,name:"Fallback",icon:"",description:"",shouldGenerateImageFirst:!1,t2vSupportedAspectRatios:[],i2vSupportedAspectRatios:[],isEnhance:!1,enhancerIdConfig:{},supportedEffectsListIds:[],supportedDurations:[],supportedResolutions:[],isLastFrameSupported:!1},m=e=>{let{children:t}=e,{imageMode:a,videoModels:d}=(0,i.bO)(),m=(0,n.useMemo)(()=>{let e=Object.entries(a).flatMap(e=>{let[t,{models:a}]=e;return a.map(e=>({mode:t,model:e}))});return{videoModels:d,getVideoModelUsingStyleId:e=>{var t;return e&&"-1"!==e&&null!=(t=d.find(t=>{let{modelId:a,oldModelIds:s}=t;return"".concat(a)===e||(null==s?void 0:s.some(t=>"".concat(t)===e))}))?t:u},imageModels:e,getImageModelUsingStyleIdWithPluginName:(t,a)=>{var s;return t&&"-1"!==t?null!=(s=(e=>{let{models:t,styleId:a,pluginName:s}=e,n=t.filter(e=>{var t;return a==="".concat(e.model.modelId)||(null==(t=e.model.oldModelIds)?void 0:t.some(e=>a==="".concat(e)))});if(0===n.length)return;if(1===n.length)return n[0];let r=n.filter(e=>e.model.enhancerId===s);return 0!==r.length?r[0]:n[0]})({models:e,styleId:t,pluginName:a}))?s:{mode:r.KE.CREATE,model:c}:{mode:r.KE.CREATE,model:o}}}},[a,d]);return(0,s.jsx)(l,{value:m,children:t})},p=()=>{let e=(0,n.useContext)(l);if(!e)throw Error("useModelContext must be used within a ModelProvider");return e}},74679:(e,t,a)=>{"use strict";a.d(t,{Qi:()=>g,rH:()=>E});var s=a(67933),n=a(99757),r=a(27338),i=a(12331),l=a(60095),d=a(67287),o=a(71170),c=a(59761),u=a(90416),m=a(29551),p=a(90916),x=a(54582),f=a(47672);let b=[i.z1.IMAGE,i.z1.VIDEO],h=void 0,v=e=>({assets:e.assets.map(e=>{try{switch(e.service){case i.z1.IMAGE:return(0,d.M)(e);case i.z1.VIDEO:return(0,o.o)(e);default:return null}}catch(e){return null}}).filter(e=>null!=e)}),_=async e=>{let{services:t=b,isDraftFolder:a,isPersonal:s,...n}=e,r=n.parentId&&!a?await m.o.getAllOrganizationAssets({service:t,...n}):await m.o.getAllOrganizationObjects({service:t,isUserOwned:s,...n}),i=v(r.data);return{...r,data:i}},y=async e=>{let{parentId:t}=e,a=await m.o.getFeaturedOrganizationAssets({parentId:t}),s=v(a.data);return{...a,data:{assets:s.assets.map(e=>({...e,isFeatured:!0}))}}},g=e=>{let{services:t=b,isPersonal:a,orgId:s,parentId:n,isDraftFolder:r=!1}=e,i=[...t].sort(),l=[u.n.EDITOR_ASSETS,...i];return n&&!r&&l.push(n),null!=a&&l.push(String(a)),s&&l.push(s),l},E=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0,{user:i}=(0,l.u)(),{isLoading:d,isError:o,isPersonal:m,isDraftFolder:v,isFeaturedFolder:E,selectedFolder:I}=(0,p.X)(),{selectedOrganizationId:N}=(0,f.v)(),{selectedFolderId:j}=(0,x.I)(),A=null!=a?a:m,k=!!i&&!d&&!o&&null!=j,S=E?j:null==I||null==(e=I.settings)?void 0:e.featuredFolderId,O=(0,s.I)({queryKey:[u.n.EDITOR_ASSETS,S],queryFn:async()=>await y({parentId:S}),staleTime:r.HZ,enabled:k&&null!=S}),$=(0,n.q)({queryKey:[c.e.INFINITE,...g({services:t,parentId:j,isPersonal:A,orgId:N,isDraftFolder:v})],queryFn:async e=>{let{pageParam:a}=e;return await _({isDraftFolder:v,orgId:N,limit:50,fromId:a,batch:!0,services:t,parentId:j,isPersonal:A})},getNextPageParam:e=>{let{assets:t}=e.data;if(t.length<50)return;let a=t[t.length-1];return null==a?void 0:a.uuid},enabled:k&&!E,staleTime:r.HZ,initialPageParam:h}),T=$.data?{...$.data,pages:[...$.data.pages,...O.data?[O.data]:[]]}:{pages:O.data?[O.data]:[],pageParams:[]};return{...$,data:T,isLoading:$.isLoading||d||O.isLoading,isError:$.isError||o||O.isError}}},76376:(e,t,a)=>{"use strict";a.d(t,{k:()=>s});let s=a(25826).Ay$.string().default("{}")},81905:(e,t,a)=>{"use strict";a.d(t,{Q:()=>s});let s=[[a(90416).n.IMAGE_ASSETS]]},82915:(e,t,a)=>{"use strict";a.d(t,{g:()=>d,p:()=>o});var s=a(67933),n=a(27338),r=a(60095),i=a(34267),l=a(29551);let d=()=>[i.c.ORGS_BASE_TAG,i.c.USER_JOIN_REQUESTS],o=function(){let{enabled:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{user:a}=(0,r.u)();return(0,s.I)({queryKey:d(),staleTime:n.I5,queryFn:()=>l.o.getUserJoinRequests({...t,pageSize:500}),enabled:!!a&&(null==e||e)})}},83728:(e,t,a)=>{"use strict";a.d(t,{Initializers:()=>e8});var s=a(54568),n=a(98502),r=a(19533),i=a(7620);let l=()=>((0,i.useEffect)(()=>{window&&r.h.NEXT_PUBLIC_IS_PRODUCTION_DEPLOYMENT&&(window.console.log=()=>{},window.console.warn=()=>{},window.console.error=()=>{})},[]),null);var d=a(51874),o=a(52948);let c=()=>{let{isError:e}=(0,o.aR)();return(0,i.useEffect)(()=>{e&&d.oR.error("Failed to get your subscription info")},[e]),null};var u=a(89329),m=a(82806),p=a(53881),x=a(78435),f=a(36348),b=a(56805),h=a(29551),v=a(31201),_=a(99636);let y=[u.A,v.x,_.D_,b.B,x.N,f.p,h.f],g=()=>((0,i.useLayoutEffect)(()=>{let e=y.map(e=>e.interceptors.request.use(async e=>{let t=(0,m.getCookie)(p.H.IMPERSONATE_USER_TOKEN,{domain:r.h.NEXT_PUBLIC_APP_DOMAIN})||(0,m.getCookie)(p.H.BEARER_TOKEN,{domain:r.h.NEXT_PUBLIC_APP_DOMAIN});return t&&(e.headers.Authorization="Bearer ".concat(t)),e}));return()=>{e.forEach((e,t)=>{var a;null==(a=y[t])||a.interceptors.request.eject(e)})}},[]),null);var E=a(60095),I=a(89829),N=a(79920),j=a(78848);let A=()=>{let e=(0,I.mW)(),{user:t}=(0,E.u)(),{handleLogout:a}=(0,N.O)(),s=(0,j.hM)();return(0,n.BP)({onSuccess:t=>{let{credential:a}=t;if(!a)return void d.oR.error("One-tap credential not found");e.mutate({payload:{credential:a}})},onError:()=>{a(),d.oR.error("One-tap failed")},disabled:!!t||s,auto_select:!0,cancel_on_tap_outside:!1,use_fedcm_for_prompt:!0}),null};var k=a(27338),S=a(58910);let O=async(e,t)=>new Promise(a=>{let s=setInterval(()=>{e()&&(clearInterval(s),a())},t)}),$=[u.A,v.x,x.N,b.B,f.p,h.f],T=()=>{let e=(0,i.useRef)(!1);return(0,i.useLayoutEffect)(()=>{let t=$.map(t=>t.interceptors.request.use(async t=>{var a;if((null==(a=t.url)?void 0:a.endsWith("/refresh/web"))||(e.current&&await O(()=>!e.current,1e3),(0,m.getCookie)(p.H.BEARER_TOKEN,{domain:r.h.NEXT_PUBLIC_APP_DOMAIN})))return t;let s=(0,m.getCookie)(p.H.REFRESH_TOKEN);if(!s)return t;e.current=!0;try{let e=await S.y.getNewToken({refreshToken:s}).catch(()=>null);if(!e)return t;let{data:a}=e,n=new Date(Date.now()+1e3*a.tokenExpiresIn),i=new Date(Date.now()+k.f);(0,m.setCookie)(p.H.BEARER_TOKEN,a.token,{expires:n,domain:r.h.NEXT_PUBLIC_APP_DOMAIN}),(0,m.setCookie)(p.H.REFRESH_TOKEN,a.refreshToken,{expires:i,domain:r.h.NEXT_PUBLIC_APP_DOMAIN})}catch(e){console.error("Exception caught during token refresh:",e)}return e.current=!1,t}));return()=>{t.forEach((e,t)=>{var a;null==(a=$[t])||a.interceptors.request.eject(e)})}},[]),null};var P=a(788),w=a(47672),C=a(87606),R=a(17685),D=a(53e3),M=a(378),L=a(75887),U=a(19136),G=a(59051),z=a(46586),B=a(84735);let F=e=>{let{isPersonal:t,orgId:a}=e;return[(0,z.Y)({isPersonal:t,orgId:a})]},q=e=>{let{orgId:t}=e;return[(0,B.Z)({orgId:t})]};var V=a(12331);let K={CREDIT_CONSUMED:"credit.consumed",CREDIT_REVERTED:"credit.reverted",FOLDER_CREATED:"folder.created",FOLDER_UPDATED:"folder.updated",FOLDER_DELETED:"folder.deleted",FOLDER_PINNED:"folder.pinned",FOLDER_UNPINNED:"folder.unpinned",OBJECT_CREATED:"object.created",OBJECT_STATUS:"object.status",OBJECT_DELETED:"object.deleted",OBJECT_MOVED:"object.moved",ORG_UPDATED:"org.updated",ORG_DELETED:"org.deleted",ORG_USER_ADDED:"org_user.added",ORG_USER_UPDATED:"org_user.updated",ORG_USER_REMOVED:"org_user.removed",ORG_USER_INVITATION_ACCEPTED:"org_user.invitation_accepted",ORG_USER_INVITATION_DELETED:"org_user.invitation_deleted",ORG_USER_INVITATION_SENT:"org_user.invited",ORG_USER_JOIN_REQUEST_ACCEPTED:"org_user.join_request_accepted",ORG_USER_JOIN_REQUEST_CANCELLED:"org_user.join_request_cancelled",ORG_USER_JOIN_REQUEST_PENDING:"org_user.join_request_pending",ORG_USER_JOIN_REQUEST_REJECTED:"org_user.join_request_rejected"};var Q=a(99958),H=a(37964),J=a(98575),Y=a(29856),W=a(91426),X=a(67287),Z=a(30744),ee=a(71170),et=a(13158),ea=a(9094),es=a(3262),en=a(68407),er=a(82915),ei=a(38),el=a(25826),ed=a(55437),eo=a(32162),ec=a(31625),eu=a(12995),em=a(65762);let ep=el.Ay$.object({placeholderUuid:el.Ay$.string().optional(),description:el.Ay$.string().optional(),presetId:el.Ay$.string().optional()}),ex=el.Ay$.object({autocrop:el.Ay$.string().optional(),category:el.Ay$.literal("character").optional(),description:el.Ay$.string().optional(),name:el.Ay$.string(),user:el.Ay$.string(),metadata:ec.p.optional().default("{}")}),ef=el.Ay$.object({generation:eo.aB,inputs:eo.aB,tags:eo.aB.optional(),thumbnail:eo.aB}).nullable().optional(),eb=el.Ay$.enum([ed.j.UPLOAD_MODEL]);el.Ay$.literal(em.A.MODEL_UPLOAD),el.Ay$.union([eb]);let eh=e=>{let t=(0,G.b)(eb,e.endpoint);if(t===ed.j.UPLOAD_MODEL)return(e=>{let t=(0,G.b)(ex,e.settings,{name:"Unknown",user:"{}",metadata:"{}"}),a=(0,G.b)(ef,e.url,{generation:[],inputs:[],tags:[],thumbnail:[]}),s=(e=>{var t;let a=(0,G.b)(ep,JSON.parse(null!=(t=e.metadata)?t:"{}")),s="string"==typeof e.user?JSON.parse(e.user):{email:"",name:""};return{autocrop:"true"===e.autocrop,category:e.category,description:e.description,name:e.name,user:s,metadata:a}})(t),n=(e=>e?{generation:(0,eu._)(e.generation),inputs:e.inputs,tags:e.tags,thumbnails:e.thumbnail}:{generation:"",inputs:[],tags:[],thumbnails:[]})(a);return{...e,settings:s,url:n,tag:em.A.MODEL_UPLOAD,service:V.z1.MODEL}})({...e,endpoint:t})};var ev=a(90416),e_=a(61508),ey=a(42203),eg=a(81905),eE=a(25011),eI=a(62956),eN=a(59995);let ej=[[ev.n.VIDEO_ASSETS]],eA={OBJECT_CREATED:"object.created",OBJECT_STATUS:"object.status",OBJECT_DELETED:"object.deleted",ORG_CREATED:"org.created"},ek=el.Ay$.object({uuid:el.Ay$.string(),service:V.jc,ref_service:V.jc.optional()});var eS=a(86309);let eO=()=>((()=>{let{handleSocketPublication:e}=(()=>{let{handleImageAssetCreateEvent:e,handleImageAssetUpdateEvent:t,handleImageAssetDeleteEvent:a,handleImageUserAssetCreateEvent:s,handleImageUserAssetDeleteEvent:n}=(()=>{let e=(0,C.jE)(),t=t=>!!e.getQueryData(t),a=()=>!!e.getQueryData([ev.n.IMAGE_USER_ASSETS]);return{handleImageUserAssetDeleteEvent:t=>{a()&&e.setQueryData([ev.n.IMAGE_USER_ASSETS],e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==t.uuid)}}))},handleImageUserAssetCreateEvent:t=>{if(!a())return;let s=(0,ey.A4)((0,ei.O)((0,G.b)(ei.l,t)));e.setQueryData([ev.n.IMAGE_USER_ASSETS],e=>({...e,data:{...e.data,assets:[s,...e.data.assets]}}))},handleImageAssetCreateEvent:a=>{var s;let n=(0,e_.r)((0,ei.O)((0,G.b)(ei.l,a))),r=null!=(s=n.settings.metadata.placeholderUuid)?s:n.batchId;for(let a of eg.Q)t(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.batchId===r&&-1===e.id);return -1===t?{...e,data:{...e.data,assets:[n,...e.data.assets]}}:(n.batchId=r,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),n,...e.data.assets.slice(t+1)]}})}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===r&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[n,...t.data.assets]}},...e.pages.slice(1)]}:(n.batchId=r,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),n,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleImageAssetUpdateEvent:a=>{let s=(0,e_.r)((0,ei.O)((0,G.b)(ei.l,a)));for(let a of eg.Q)t(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===s.uuid),a=e.data.assets[t];return a?(s.batchId=a.batchId,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),s,...e.data.assets.slice(t+1)]}}):{...e,data:{...e.data,assets:[s,...e.data.assets]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===s.uuid),n=t.data.assets[a];return n?(s.batchId=n.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),s,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[s,...t.data.assets]}},...e.pages.slice(1)]}})},handleImageAssetDeleteEvent:a=>{for(let s of eg.Q)t(s)&&e.setQueryData(s,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==a.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==a.uuid)}}))})}}})(),{handleVideoAssetCreateEvent:r,handleVideoAssetUpdateEvent:i,handleVideoAssetDeleteEvent:l,handleVideoUserAssetCreateEvent:d}=(()=>{let e=(0,C.jE)(),t=t=>!!e.getQueryData(t);return{handleVideoAssetCreateEvent:a=>{var s;let n=(0,eI.h)((0,ei.O)((0,G.b)(ei.l,a))),r=null!=(s=n.settings.metadata.placeholderUuid)?s:n.batchId;for(let a of ej)t(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.batchId===r&&-1===e.id);return -1===t?{...e,data:{...e.data,assets:[n,...e.data.assets]}}:(n.batchId=r,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),n,...e.data.assets.slice(t+1)]}})}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===r&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[n,...t.data.assets]}},...e.pages.slice(1)]}:(n.batchId=r,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),n,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleVideoAssetUpdateEvent:a=>{let s=(0,eI.h)((0,ei.O)((0,G.b)(ei.l,a)));for(let a of ej)t(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===s.uuid),a=e.data.assets[t];return a?(s.batchId=a.batchId,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),s,...e.data.assets.slice(t+1)]}}):{...e,data:{...e.data,assets:[s,...e.data.assets]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===s.uuid),n=t.data.assets[a];return n?(s.batchId=n.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),s,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[s,...t.data.assets]}},...e.pages.slice(1)]}})},handleVideoAssetDeleteEvent:a=>{for(let s of ej)t(s)&&e.setQueryData(s,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==a.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==a.uuid)}}))})},handleVideoUserAssetCreateEvent:t=>{if(!e.getQueryData([ev.n.VIDEO_USER_ASSETS]))return;let a=(0,eN.s1)((0,ei.O)((0,G.b)(ei.l,t)));e.setQueryData([ev.n.VIDEO_USER_ASSETS],e=>({...e,data:{...e.data,assets:[a,...e.data.assets]}}))}}})(),{handleTransferMotionAssetCreateEvent:o,handleTransferMotionAssetUpdateEvent:c,handleTransferMotionAssetDeleteEvent:u}=(()=>{let e=(0,C.jE)(),t=()=>!!e.getQueryData([ev.n.TRANSFER_MOTION_ASSETS]);return{handleTransferMotionAssetCreateEvent:a=>{var s;if(!t())return;let n=(0,eE.vB)((0,ei.O)((0,G.b)(ei.l,a))),r=null!=(s=n.settings.metadata.placeholderUuid)?s:n.batchId;e.setQueryData([ev.n.TRANSFER_MOTION_ASSETS],e=>{if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===r&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[n,...t.data.assets]}},...e.pages.slice(1)]}:(n.batchId=r,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),n,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleTransferMotionAssetUpdateEvent:t=>{let a=(0,eE.vB)((0,ei.O)((0,G.b)(ei.l,t)));e.setQueryData([ev.n.TRANSFER_MOTION_ASSETS],e=>{if(!e.pages[0])return e;let t=e.pages[0],s=t.data.assets.findIndex(e=>e.uuid===a.uuid),n=t.data.assets[s];return n?(a.batchId=n.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,s),a,...t.data.assets.slice(s+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[a,...t.data.assets]}},...e.pages.slice(1)]}})},handleTransferMotionAssetDeleteEvent:a=>{t()&&e.setQueryData([ev.n.TRANSFER_MOTION_ASSETS],e=>({...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==a.uuid)}}))}))}}})(),{handleModelAssetCreateEvent:m,handleModelAssetDeleteEvent:p,handleModelAssetUpdateEvent:x}=(()=>{let e=(0,C.jE)(),t=()=>!!e.getQueryData([ev.n.MODEL_ASSETS]);return{handleModelAssetCreateEvent:a=>{var s;if(!t())return;let n=eh((0,ei.O)((0,G.b)(ei.l,a))),r=null!=(s=n.settings.metadata.placeholderUuid)?s:n.batchId;e.setQueryData([ev.n.MODEL_ASSETS],e=>{if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===r&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[n,...t.data.assets]}},...e.pages.slice(1)]}:(n.batchId=r,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),n,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleModelAssetUpdateEvent:t=>{let a=eh((0,ei.O)((0,G.b)(ei.l,t)));e.setQueryData([ev.n.MODEL_ASSETS],e=>{if(!e.pages[0])return e;let t=e.pages[0],s=t.data.assets.findIndex(e=>e.uuid===a.uuid),n=t.data.assets[s];return n?(a.batchId=n.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,s),a,...t.data.assets.slice(s+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[a,...t.data.assets]}},...e.pages.slice(1)]}})},handleModelAssetDeleteEvent:a=>{t()&&e.setQueryData([ev.n.MODEL_ASSETS],e=>({...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==a.uuid)}}))}))}}})(),{handleUserOrganizationCreateEvent:f}=(()=>{let e=(0,C.jE)();return{handleUserOrganizationCreateEvent:()=>{e.invalidateQueries({queryKey:(0,M.f)()})}}})();return{handleSocketPublication:b=>{switch(b.data.type){case eA.OBJECT_CREATED:{let t=b.data.data.object;if(t.ref_service&&(0,G.b)(V.jc,t.ref_service)===V.z1.IMAGINE_FLOWS)return;switch(t.service){case V.z1.IMAGE:e(t);break;case V.z1.VIDEO:r(t);break;case V.z1.MOTION:o(t);break;case V.z1.MODEL:m(t);break;case V.z1.USER:switch(t.ref_service){case V.z1.IMAGE:s(t);break;case V.z1.VIDEO:d(t)}}}break;case eA.OBJECT_STATUS:{let e=b.data.data.object,a=(0,G.b)(V.jc,e.service);if(e.ref_service&&(0,G.b)(V.jc,e.ref_service)===V.z1.IMAGINE_FLOWS)return;switch(a){case V.z1.IMAGE:t(e);break;case V.z1.VIDEO:i(e);break;case V.z1.MOTION:c(e);break;case V.z1.MODEL:x(e)}}break;case eA.OBJECT_DELETED:{let e=(0,G.b)(ek,b.data.data);if(e.ref_service&&e.ref_service===V.z1.IMAGINE_FLOWS)return;switch(e.service){case V.z1.IMAGE:a(e);break;case V.z1.MODEL:p(e);break;case V.z1.VIDEO:l(e);break;case V.z1.MOTION:u(e);break;case V.z1.USER:e.ref_service===V.z1.IMAGE&&n(e)}}break;case eA.ORG_CREATED:f()}}}})(),{handleOrganizationSocketPublication:t}=(()=>{let{handleOrganizationFolderAssetDeleteEvent:e,handleOrganizationFolderAssetCreateEvent:t,handleOrganizationFolderAssetUpdateEvent:a,handleOrganizationFolderAssetPinnedEvent:s,handleOrganizationFolderAssetUnpinnedEvent:n}=(()=>{let e=(0,C.jE)(),{user:t}=(0,E.u)(),a=t=>!!e.getQueryData(t);return{handleOrganizationFolderAssetUpdateEvent:s=>{let n=(0,L.xn)((0,U.L)((0,G.b)(U.oD,s)));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of F({isPersonal:n.isPersonal,orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>{let t=e=>{let t=e.findIndex(e=>e.id===n.id||e.uuid===n.uuid);return -1!==t?[...e.slice(0,t),n,...e.slice(t+1)]:[n,...e]};if("data"in e)return{...e,data:{...e.data,assets:t(e.data.assets)}};if(!e.pages[0])return e;let a=e.pages[0];return{...e,pages:[{...a,data:{...a.data,assets:t(a.data.assets)}},...e.pages.slice(1)]}})},handleOrganizationFolderAssetDeleteEvent:s=>{let n=(0,L.xn)((0,U.L)((0,G.b)(U.oD,s)));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of F({isPersonal:n.isPersonal,orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}))})},handleOrganizationFolderAssetCreateEvent:s=>{let n=(0,L.xn)((0,U.L)((0,G.b)(U.oD,s)));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of F({isPersonal:n.isPersonal,orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>{var t;if("data"in e&&e.data.assets.some(e=>e.uuid===n.uuid)||"pages"in e&&(null==(t=e.pages[0])?void 0:t.data.assets.some(e=>e.uuid===n.uuid)))return e;if("data"in e)return{...e,data:{...e.data,assets:[n,...e.data.assets]}};if(!e.pages[0])return e;let a=e.pages[0];return{...e,pages:[{...a,data:{...a.data,assets:[n,...a.data.assets]}},...e.pages.slice(1)]}})},handleOrganizationFolderAssetPinnedEvent:s=>{let n=(0,L.xn)((0,U.L)((0,G.b)(U.oD,s)));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of q({orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>{if("data"in e)return{...e,data:{...e.data,assets:[n,...e.data.assets]}};if(!e.pages[0])return e;let t=e.pages[0];return{...e,pages:[{...t,data:{...t.data,assets:[n,...t.data.assets]}},...e.pages.slice(1)]}})},handleOrganizationFolderAssetUnpinnedEvent:s=>{let n=(0,L.xn)((0,U.L)((0,G.b)(U.oD,s)));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of q({orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}))})}}})(),{handleOrganizationObjectEvents:r}=(()=>{let{handleOrganizationImageAssetCreateEvent:e,handleOrganizationImageAssetUpdateEvent:t,handleOrganizationImageAssetDeleteEvent:a,handleOrganizationImageAssetMoveEvent:s}=(()=>{let e=(0,C.jE)(),{user:t}=(0,E.u)(),a=t=>!!e.getQueryData(t);return{handleOrganizationImageAssetCreateEvent:s=>{var n;let r=(0,X.M)((0,U.L)((0,G.b)(U.oD,s)));if(r.isPersonal&&(null==t?void 0:t.id)!==r.userId)return;let i=null!=(n=r.settings.metadata.placeholderUuid)?n:r.batchId;for(let t of(0,Z.u)({parentId:r.parentId,isPersonal:r.isPersonal,orgId:r.orgId}))a(t)&&e.setQueryData(t,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.batchId===i&&-1===e.id);return -1===t?{...e,data:{...e.data,assets:[r,...e.data.assets]}}:(r.batchId=i,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),r,...e.data.assets.slice(t+1)]}})}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===i&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[r,...t.data.assets]}},...e.pages.slice(1)]}:(r.batchId=i,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),r,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleOrganizationImageAssetUpdateEvent:s=>{let n=(0,X.M)((0,U.L)((0,G.b)(U.oD,s)));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of(0,Z.u)({parentId:n.parentId,isPersonal:n.isPersonal,orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===n.uuid),a=e.data.assets[t];return a?(n.batchId=a.batchId,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),n,...e.data.assets.slice(t+1)]}}):{...e,data:{...e.data,assets:[n,...e.data.assets]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===n.uuid),s=t.data.assets[a];return s?(n.batchId=s.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),n,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[n,...t.data.assets]}},...e.pages.slice(1)]}})},handleOrganizationImageAssetDeleteEvent:s=>{let n=(0,U.L)((0,G.b)(U.oD,s));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of(0,Z.u)({parentId:n.parentId,isPersonal:n.isPersonal,orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}))})},handleOrganizationImageAssetMoveEvent:t=>{let s=(0,X.M)((0,U.L)((0,G.b)(U.oD,t))),n=s.oldParentFolderId;if(n)for(let t of(0,Z.u)({parentId:n,isPersonal:s.isPersonal,orgId:s.orgId}))a(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==s.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==s.uuid)}}))});for(let t of(0,Z.u)({parentId:s.parentId,isPersonal:s.isPersonal,orgId:s.orgId}))a(t)&&e.setQueryData(t,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===s.uuid);return -1===t?{...e,data:{...e.data,assets:[s,...e.data.assets]}}:{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),s,...e.data.assets.slice(t+1)]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===s.uuid);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[s,...t.data.assets]}},...e.pages.slice(1)]}:{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),s,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}})}}})(),{handleOrganizationVideoAssetCreateEvent:n,handleOrganizationVideoAssetUpdateEvent:r,handleOrganizationVideoAssetDeleteEvent:i,handleOrganizationVideoAssetMoveEvent:l}=(()=>{let e=(0,C.jE)(),{user:t}=(0,E.u)(),a=t=>!!e.getQueryData(t);return{handleOrganizationVideoAssetCreateEvent:s=>{var n;let r=(0,ee.o)((0,U.L)((0,G.b)(U.oD,s)));if(r.isPersonal&&(null==t?void 0:t.id)!==r.userId)return;let i=null!=(n=r.settings.metadata.placeholderUuid)?n:r.batchId;for(let t of(0,et.W)({parentId:r.parentId,isPersonal:r.isPersonal,orgId:r.orgId}))a(t)&&e.setQueryData(t,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.batchId===i&&-1===e.id);return -1===t?{...e,data:{...e.data,assets:[r,...e.data.assets]}}:(r.batchId=i,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),r,...e.data.assets.slice(t+1)]}})}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===i&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[r,...t.data.assets]}},...e.pages.slice(1)]}:(r.batchId=i,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),r,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleOrganizationVideoAssetUpdateEvent:s=>{let n=(0,ee.o)((0,U.L)((0,G.b)(U.oD,s)));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of(0,et.W)({parentId:n.parentId,isPersonal:n.isPersonal,orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===n.uuid),a=e.data.assets[t];return a?(n.batchId=a.batchId,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),n,...e.data.assets.slice(t+1)]}}):{...e,data:{...e.data,assets:[n,...e.data.assets]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===n.uuid),s=t.data.assets[a];return s?(n.batchId=s.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),n,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[n,...t.data.assets]}},...e.pages.slice(1)]}})},handleOrganizationVideoAssetDeleteEvent:s=>{let n=(0,U.L)((0,G.b)(U.oD,s));if(!n.isPersonal||(null==t?void 0:t.id)===n.userId)for(let t of(0,et.W)({parentId:n.parentId,isPersonal:n.isPersonal,orgId:n.orgId}))a(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}))})},handleOrganizationVideoAssetMoveEvent:t=>{let s=(0,ee.o)((0,U.L)((0,G.b)(U.oD,t))),n=s.oldParentFolderId;if(n)for(let t of(0,et.W)({parentId:n,isPersonal:s.isPersonal,orgId:s.orgId}))a(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==s.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==s.uuid)}}))});for(let t of(0,et.W)({parentId:s.parentId,isPersonal:s.isPersonal,orgId:s.orgId}))a(t)&&e.setQueryData(t,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===s.uuid);return -1===t?{...e,data:{...e.data,assets:[s,...e.data.assets]}}:{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),s,...e.data.assets.slice(t+1)]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===s.uuid);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[s,...t.data.assets]}},...e.pages.slice(1)]}:{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),s,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}})}}})(),{handleOrganizationAppImageAssetCreateEvent:d,handleOrganizationAppImageAssetUpdateEvent:o,handleOrganizationAppImageAssetDeleteEvent:c}=(()=>{let e=(0,C.jE)(),{addToSlugsToLatestGenerationMap:t}=(0,J.p)(),{user:a}=(0,E.u)(),s=t=>!!e.getQueryData(t);return{handleOrganizationAppImageAssetCreateEvent:n=>{var r;let i=(0,Q.v)((0,U.L)((0,G.b)(U.oD,n)));if(i.isPersonal&&(null==a?void 0:a.id)!==i.userId)return;let l=null!=(r=i.settings.metadata.placeholderUuid)?r:i.batchId;for(let a of(t({generation:i}),(0,H.I)({parentId:i.parentId,isPersonal:i.isPersonal,orgId:i.orgId})))s(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.batchId===l&&-1===e.id);return -1===t?{...e,data:{...e.data,assets:[i,...e.data.assets]}}:(i.batchId=l,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),i,...e.data.assets.slice(t+1)]}})}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===l&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[i,...t.data.assets]}},...e.pages.slice(1)]}:(i.batchId=l,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),i,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleOrganizationAppImageAssetUpdateEvent:n=>{let r=(0,Q.v)((0,U.L)((0,G.b)(U.oD,n)));if(!r.isPersonal||(null==a?void 0:a.id)===r.userId)for(let a of(t({generation:r}),(0,H.I)({parentId:r.parentId,isPersonal:r.isPersonal,orgId:r.orgId})))s(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===r.uuid),a=e.data.assets[t];return a?(r.batchId=a.batchId,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),r,...e.data.assets.slice(t+1)]}}):{...e,data:{...e.data,assets:[r,...e.data.assets]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===r.uuid),s=t.data.assets[a];return s?(r.batchId=s.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),r,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[r,...t.data.assets]}},...e.pages.slice(1)]}})},handleOrganizationAppImageAssetDeleteEvent:t=>{let n=(0,U.L)((0,G.b)(U.oD,t));if(!n.isPersonal||(null==a?void 0:a.id)===n.userId)for(let t of(0,H.I)({parentId:n.parentId,isPersonal:n.isPersonal,orgId:n.orgId}))s(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}))})}}})(),{handleOrganizationAppVideoAssetCreateEvent:u,handleOrganizationAppVideoAssetUpdateEvent:m,handleOrganizationAppVideoAssetDeleteEvent:p}=(()=>{let e=(0,C.jE)(),{addToSlugsToLatestGenerationMap:t}=(0,J.p)(),{user:a}=(0,E.u)(),s=t=>!!e.getQueryData(t);return{handleOrganizationAppVideoAssetCreateEvent:n=>{var r;let i=(0,Y.x)((0,U.L)((0,G.b)(U.oD,n)));if(i.isPersonal&&(null==a?void 0:a.id)!==i.userId)return;let l=null!=(r=i.settings.metadata.placeholderUuid)?r:i.batchId;for(let a of(t({generation:i}),(0,W.I)({parentId:i.parentId,isPersonal:i.isPersonal,orgId:i.orgId})))s(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.batchId===l&&-1===e.id);return -1===t?{...e,data:{...e.data,assets:[i,...e.data.assets]}}:(i.batchId=l,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),i,...e.data.assets.slice(t+1)]}})}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.batchId===l&&-1===e.id);return -1===a?{...e,pages:[{...t,data:{...t.data,assets:[i,...t.data.assets]}},...e.pages.slice(1)]}:(i.batchId=l,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),i,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]})})},handleOrganizationAppVideoAssetUpdateEvent:n=>{let r=(0,Y.x)((0,U.L)((0,G.b)(U.oD,n)));if(!r.isPersonal||(null==a?void 0:a.id)===r.userId)for(let a of(t({generation:r}),(0,W.I)({parentId:r.parentId,isPersonal:r.isPersonal,orgId:r.orgId})))s(a)&&e.setQueryData(a,e=>{if("data"in e){let t=e.data.assets.findIndex(e=>e.uuid===r.uuid),a=e.data.assets[t];return a?(r.batchId=a.batchId,{...e,data:{...e.data,assets:[...e.data.assets.slice(0,t),r,...e.data.assets.slice(t+1)]}}):{...e,data:{...e.data,assets:[r,...e.data.assets]}}}if(!e.pages[0])return e;let t=e.pages[0],a=t.data.assets.findIndex(e=>e.uuid===r.uuid),s=t.data.assets[a];return s?(r.batchId=s.batchId,{...e,pages:[{...t,data:{...t.data,assets:[...t.data.assets.slice(0,a),r,...t.data.assets.slice(a+1)]}},...e.pages.slice(1)]}):{...e,pages:[{...t,data:{...t.data,assets:[r,...t.data.assets]}},...e.pages.slice(1)]}})},handleOrganizationAppVideoAssetDeleteEvent:t=>{let n=(0,U.L)((0,G.b)(U.oD,t));if(!n.isPersonal||(null==a?void 0:a.id)===n.userId)for(let t of(0,W.I)({parentId:n.parentId,isPersonal:n.isPersonal,orgId:n.orgId}))s(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}:{...e,pages:e.pages.map(e=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==n.uuid)}}))})}}})();return{handleOrganizationObjectEvents:x=>{switch(x.data.type){case K.OBJECT_CREATED:{let t=x.data.data.object;if(t.ref_service&&(0,G.b)(V.jc,t.ref_service)===V.z1.IMAGINE_FLOWS)return;switch(t.service){case V.z1.IMAGE:e(t);break;case V.z1.VIDEO:n(t);break;case V.z1.APP_IMAGE:d(t);break;case V.z1.APP_VIDEO:u(t)}break}case K.OBJECT_STATUS:{let e=x.data.data.object,a=(0,G.b)(V.jc,e.service);if(e.ref_service&&(0,G.b)(V.jc,e.ref_service)===V.z1.IMAGINE_FLOWS)return;switch(a){case V.z1.IMAGE:t(e);break;case V.z1.VIDEO:r(e);break;case V.z1.APP_IMAGE:o(e);break;case V.z1.APP_VIDEO:m(e)}break}case K.OBJECT_DELETED:{let e=x.data.data.object,t=(0,G.b)(V.jc,e.service);if(e.ref_service&&(0,G.b)(V.jc,e.ref_service)===V.z1.IMAGINE_FLOWS)return;switch(t){case V.z1.IMAGE:a(e);break;case V.z1.VIDEO:i(e);break;case V.z1.APP_IMAGE:c(e);break;case V.z1.APP_VIDEO:p(e)}break}case K.OBJECT_MOVED:{let e=x.data.data.object;switch((0,G.b)(V.jc,e.service)){case V.z1.IMAGE:s(e);break;case V.z1.VIDEO:l(e)}}}}}})(),{handleOrganizationCreditConsumedEvent:i,handleOrganizationCreditRevertedEvent:l}=(()=>{let e=(0,C.jE)();return{handleOrganizationCreditConsumedEvent:t=>{e.invalidateQueries({queryKey:(0,R.Hl)({orgId:t})})},handleOrganizationCreditRevertedEvent:t=>{e.invalidateQueries({queryKey:(0,R.Hl)({orgId:t})})}}})(),{handleOrganizationUpdateEvent:d,handleOrganizationDeleteEvent:o}=(()=>{let e=(0,C.jE)();return{handleOrganizationUpdateEvent:t=>{e.invalidateQueries({queryKey:(0,M.f)()}),e.invalidateQueries({queryKey:(0,D.G)({orgId:t})})},handleOrganizationDeleteEvent:()=>{e.invalidateQueries({queryKey:(0,M.f)()})}}})(),{handleOrganizationUserCreateEvent:c,handleOrganizationUserUpdateEvent:u,handleOrganizationUserDeleteEvent:m}=(()=>{let e=(0,C.jE)();return{handleOrganizationUserCreateEvent:t=>{e.invalidateQueries({queryKey:(0,ea.o)(t)})},handleOrganizationUserUpdateEvent:t=>{e.invalidateQueries({queryKey:(0,ea.o)(t)})},handleOrganizationUserDeleteEvent:t=>{e.invalidateQueries({queryKey:(0,ea.o)(t)}),e.invalidateQueries({queryKey:(0,M.f)()})}}})(),{handleOrganizationUserInvitationAcceptedEvent:p,handleOrganizationUserInvitationDeletedEvent:x,handleOrganizationUserInvitationSentEvent:f}=(()=>{let e=(0,C.jE)();return{handleOrganizationUserInvitationAcceptedEvent:t=>{e.invalidateQueries({queryKey:(0,es.v)({orgId:t})})},handleOrganizationUserInvitationDeletedEvent:t=>{e.invalidateQueries({queryKey:(0,es.v)({orgId:t})})},handleOrganizationUserInvitationSentEvent:t=>{e.invalidateQueries({queryKey:(0,es.v)({orgId:t})})}}})(),{handleOrganizationUserJoinRequestAcceptedEvent:b,handleOrganizationUserJoinRequestCancelledEvent:h,handleOrganizationUserJoinRequestPendingEvent:v,handleOrganizationUserJoinRequestRejectedEvent:_}=(()=>{let e=(0,C.jE)();return{handleOrganizationUserJoinRequestAcceptedEvent:t=>{e.invalidateQueries({queryKey:(0,en.g)({orgId:t})}),e.invalidateQueries({queryKey:(0,er.g)()})},handleOrganizationUserJoinRequestCancelledEvent:t=>{e.invalidateQueries({queryKey:(0,en.g)({orgId:t})}),e.invalidateQueries({queryKey:(0,er.g)()})},handleOrganizationUserJoinRequestPendingEvent:t=>{e.invalidateQueries({queryKey:(0,en.g)({orgId:t})}),e.invalidateQueries({queryKey:(0,er.g)()})},handleOrganizationUserJoinRequestRejectedEvent:t=>{e.invalidateQueries({queryKey:(0,en.g)({orgId:t})}),e.invalidateQueries({queryKey:(0,er.g)()})}}})();return{handleOrganizationSocketPublication:y=>{var g,E,I,N,j,A,k,S,O,$,T;switch(y.data.type){case K.FOLDER_DELETED:e(y.data.data.folder);break;case K.FOLDER_CREATED:t(y.data.data.folder);break;case K.FOLDER_UPDATED:a(y.data.data.folder);break;case K.FOLDER_PINNED:s(y.data.data.folder);break;case K.FOLDER_UNPINNED:n(y.data.data.folder);break;case K.OBJECT_CREATED:case K.OBJECT_DELETED:case K.OBJECT_STATUS:case K.OBJECT_MOVED:r(y);break;case K.CREDIT_CONSUMED:i(y.data.entity.org_id);break;case K.CREDIT_REVERTED:l(y.data.entity.org_id);break;case K.ORG_UPDATED:d(y.data.data.org.id);break;case K.ORG_DELETED:o();break;case K.ORG_USER_ADDED:c(null==(g=y.data.data.org_user)?void 0:g.org_id);break;case K.ORG_USER_UPDATED:u(null==(E=y.data.data.org_user)?void 0:E.org_id);break;case K.ORG_USER_REMOVED:m(null==(I=y.data.data.org_user)?void 0:I.org_id);break;case K.ORG_USER_INVITATION_ACCEPTED:p(null==(N=y.data.data.org_invitation)?void 0:N.org_id);break;case K.ORG_USER_INVITATION_DELETED:x(null==(j=y.data.data.org_invitation)?void 0:j.org_id);break;case K.ORG_USER_INVITATION_SENT:f(null==(k=y.data.data.org_invitations)||null==(A=k[0])?void 0:A.org_id);break;case K.ORG_USER_JOIN_REQUEST_ACCEPTED:b(null==(S=y.data.data.org_join_request)?void 0:S.org_id);break;case K.ORG_USER_JOIN_REQUEST_CANCELLED:h(null==(O=y.data.data.org_join_request)?void 0:O.org_id);break;case K.ORG_USER_JOIN_REQUEST_PENDING:v(null==($=y.data.data.org_join_request)?void 0:$.org_id);break;case K.ORG_USER_JOIN_REQUEST_REJECTED:_(null==(T=y.data.data.org_join_request)?void 0:T.org_id)}}}})(),{socket:a}=(0,P.c)(),{user:s}=(0,E.u)();(0,eS.g)({centrifuge:a,channel:(null==s?void 0:s.id)?"user:".concat(s.id):null,handleSocketPublication:e});let{selectedOrganizationId:n}=(0,w.v)();return(0,eS.g)({centrifuge:a,channel:n?"org:".concat(n):null,handleSocketPublication:t})})(),null);var e$=a(34267);let eT=()=>{let{selectedOrganizationId:e,isLoading:t,isError:a}=(0,w.v)(),s=(0,C.jE)();return(0,i.useEffect)(()=>{if(!t&&!a)return()=>{s.invalidateQueries({queryKey:[e$.c.ORGS_BASE_TAG]})}},[s,t,a,e]),null};var eP=a(62384);let ew=()=>{let{user:e}=(0,E.u)();return(0,i.useEffect)(()=>{if(!e)return;let t=new URLSearchParams(window.location.search);t.delete(eP.u.SHOW_AUTH),t.delete(p._.TOKEN),window.history.replaceState({},"","".concat(window.location.pathname).concat(t.size?"?".concat(t):""))},[e]),null};var eC=a(9820);let eR=()=>((0,i.useEffect)(()=>{let e=new URL(window.location.href),t=e.searchParams;eC.v.forEach(e=>{t.delete(e)});let a=e.toString();window.history.replaceState({},"",a)},[]),null);var eD=a(62942),eM=a(71930),eL=a(3418),eU=a(178),eG=a(4187);a(29953);var ez=a(18010),eB=a(22282);let eF={LOGGED_IN:"logged_in",LOGGED_OUT:"logged_out"};var eq=a(22360),eV=a(74729),eK=a(96450),eQ=a(54388),eH=a(99588);let eJ="hasFiredSessionStarted",eY=()=>{let e=(0,eD.useSearchParams)(),{user:t}=(0,E.u)(),{aggregator:a}=(0,eH.p)(),{computeUserAnalyticsInfo:s}=(0,eQ.U)(),{page:n}=(0,eV.lN)(),{data:l,isLoading:d}=(0,R.kd)(),o=(0,eK.Q)(t),c=null==l?void 0:l.total,u=!!t;return(0,i.useEffect)(()=>{var e,t,s,r,i;let l=null!=(e=(0,m.getCookie)(eC.a.CAMPAIGN))?e:eB.Q,d=null!=(t=(0,m.getCookie)(eC.a.TERM))?t:eB.Q,c=null!=(s=(0,m.getCookie)(eC.a.SOURCE))?s:eB.Q,u=null!=(r=(0,m.getCookie)(eC.a.MEDIUM))?r:eB.Q;!localStorage.getItem(eJ)&&n&&(a.log(ez.M.sessionStarted.withProperties({page_name:n,utm_campaign:l,utm_medium:u,utm_source:c,utm_term:d,state:(null==(i=o.current)?void 0:i.id)?eF.LOGGED_IN:eF.LOGGED_OUT})),localStorage.setItem(eJ,eL.J.TRUE))},[a,s,n,o]),(0,i.useEffect)(()=>{(0,m.getCookie)(eU.e.FIRST_PAGE_VIEW)||n===eB.Q||(0,m.setCookie)(eU.e.FIRST_PAGE_VIEW,n,{domain:r.h.NEXT_PUBLIC_APP_DOMAIN})},[n]),(0,i.useEffect)(()=>{if(u&&d&&n){var r,i,l,o,x,f,b,h;let d,{userStatus:u,userPlan:v,userPlanPeriod:_}=s(),y=(0,m.getCookie)(eU.e.AFFILIATE_ID),g=(0,m.getCookie)(eU.e.LANDING_SOURCE),E=null!=(r=(0,m.getCookie)(eC.a.CAMPAIGN))?r:eB.Q,I=null!=(i=(0,m.getCookie)(eC.a.TERM))?i:eB.Q,N=null!=(l=(0,m.getCookie)(eC.a.SOURCE))?l:eB.Q,j=null!=(o=(0,m.getCookie)(eC.a.MEDIUM))?o:eB.Q,A=null!=(x=(0,m.getCookie)(eU.e.SIGN_UP_CTA))?x:eB.Q,k=null!=(f=(0,m.getCookie)(eU.e.FIRST_PAGE_VIEW))?f:eB.Q,S=(d=t.id,"shouldFireSignupEvent-".concat(d)),O=(0,m.getCookie)(S),$=e.get(p._.IS_SIGNUP),T=e.get(eP.u.REFERRAL),P=null==t?void 0:t.name.split(" ")[0],w=localStorage.getItem(eq.C.AUTH_TOOL),C=localStorage.getItem(eq.C.AUTH_SOURCE);if($===eL.J.TRUE&&O){a.log(ez.M.signupCompleted.withProperties({signup_channel:null!=C?C:eB.Q,name:null==t?void 0:t.name,email:null!=(b=null==t?void 0:t.email)?b:void 0,distinct_id:null==t?void 0:t.id,tokens_remaining:c,marketing_consent:!0,utm_campaign:E,utm_term:I,utm_medium:j,utm_source:N,signup_cta:A,page_name:n,affiliate_id:g!==eG.$.UTM?y:"",first_page_view:k,user_account_status:u,user_plan:v,user_plan_period:_,first_name:P,landing_source:g,is_referred:null!=T?T:eL.J.FALSE,app_name:eM.C.IMAGINE_ONE,tool_name:null!=w?w:"",studio_name:eM.C.IMAGINE_ONE})),(0,m.deleteCookie)(S),(0,m.deleteCookie)(eU.e.SIGN_UP_CTA);let s=new URLSearchParams(e);s.delete(p._.IS_SIGNUP),window.history.replaceState({},"","".concat(window.location.pathname).concat(s.size?"?".concat(s):""))}else $===eL.J.FALSE&&a.log(ez.M.loginCompleted.withProperties({email:null!=(h=null==t?void 0:t.email)?h:void 0,distinct_id:null==t?void 0:t.id,page_name:n,user_account_status:u,user_plan:v,user_plan_period:_,signup_channel:"Web",name:null==t?void 0:t.name,first_name:P,app_name:eM.C.IMAGINE_ONE,tool_name:null!=w?w:"",studio_name:eM.C.IMAGINE_ONE}));localStorage.removeItem(eq.C.AUTH_TOOL),localStorage.removeItem(eq.C.AUTH_SOURCE)}},[c,t,a,e,n,u,d,s]),null};var eW=a(33400),eX=a(16811),eZ=a(87146),e0=a(53163);let e1=e=>{let{flagName:t,eventName:a,eventHandler:s}=e,{data:n}=(0,eZ.en)(t);return(0,i.useEffect)(()=>{if(n&&!n.status)return(0,e0.ge)(a,s),()=>(0,e0.i7)(a,s)},[a,s,n]),null};var e3=a(3397),e2=a(34596),e5=a(39381),e4=a(54828);let e6=()=>{let e=(()=>{let{wasWidgetPreviouslyOpened:e}=(0,e2.n)(),{userbackRef:t,initializeGlobalSurvey:a}=(0,e5.b)(),{mutate:s}=(0,eZ.Jl)(),n=(0,C.jE)(),{imageEditGeneral:r}=(0,e3.bO)().userbackSurveysConfig,l=(0,i.useCallback)(i=>{var d,o,c;let{detail:u}=i,m=parseInt(null!=(d=localStorage.getItem(eq.C.GENERAL_NUM_IMAGE_EDITS))?d:"0")+(null!=(o=null==u?void 0:u.numberOfImagesEdited)?o:0);if(m<r.threshold)return localStorage.setItem(eq.C.GENERAL_NUM_IMAGE_EDITS,m.toString());e?a(void 0,{onSuccess:()=>{var e;return null==(e=t.current)?void 0:e.openSurvey(r.surveyId)}}):null==(c=t.current)||c.openSurvey(r.surveyId),s({flag:eW.sF.HAS_SEEN_GENERAL_IMAGE_EDIT_SURVEY_FORM,status:!0},{onSuccess:()=>{n.invalidateQueries({queryKey:[eW.sF.HAS_SEEN_GENERAL_IMAGE_EDIT_SURVEY_FORM]}),localStorage.removeItem(eq.C.GENERAL_NUM_IMAGE_EDITS),(0,e0.i7)(eX.y.IMAGE_EDITED_EVENT,l)}})},[r,t,a,e,s,n]);return l})(),t=(()=>{let{wasWidgetPreviouslyOpened:e}=(0,e2.n)(),{userbackRef:t,initializeGlobalSurvey:a}=(0,e5.b)(),s=(0,C.jE)(),{mutate:n}=(0,eZ.Jl)(),{imageGenerationGeneral:r}=(0,e3.bO)().userbackSurveysConfig,l=(0,i.useCallback)(i=>{var d,o,c;let{detail:u}=i,m=parseInt(null!=(d=localStorage.getItem(eq.C.GENERAL_NUM_IMAGE_GENERATIONS))?d:"0")+(null!=(o=null==u?void 0:u.numberOfImagesGenerated)?o:0);if(m<r.threshold)return localStorage.setItem(eq.C.GENERAL_NUM_IMAGE_GENERATIONS,m.toString());e?a(void 0,{onSuccess:()=>{var e;return null==(e=t.current)?void 0:e.openSurvey(r.surveyId)}}):null==(c=t.current)||c.openSurvey(r.surveyId),n({flag:eW.sF.HAS_SEEN_GENERAL_IMAGE_GENERATION_SURVEY_FORM,status:!0},{onSuccess:()=>{s.invalidateQueries({queryKey:[eW.sF.HAS_SEEN_GENERAL_IMAGE_GENERATION_SURVEY_FORM]}),localStorage.removeItem(eq.C.GENERAL_NUM_IMAGE_GENERATIONS),(0,e0.i7)(eX.y.IMAGE_GENERATED_EVENT,l)}})},[r,t,a,e,n,s]);return l})(),a=(()=>{let e=(0,C.jE)(),{nps:t}=(0,e3.bO)().userbackSurveysConfig,{wasWidgetPreviouslyOpened:a}=(0,e2.n)(),{userbackRef:s,initializeGlobalSurvey:n}=(0,e5.b)(),{mutate:r}=(0,eZ.Jl)(),l=(0,i.useCallback)(i=>{if(a)n(void 0,{onSuccess:()=>{var e;return null==(e=s.current)?void 0:e.openSurvey(t.surveyId)}});else{var l;null==(l=s.current)||l.openSurvey(t.surveyId)}r({flag:eW.sF.HAS_SEEN_NPS_SURVEY_FORM,status:!0}),e.invalidateQueries({queryKey:[e4.y.SINGLE_FLAG]}),localStorage.removeItem(eq.C.NUM_IMAGE_GENERATIONS_LAST_7_DAYS),localStorage.removeItem(eq.C.SEVEN_DAY_DEADLINE_IMG_GENERATIONS),i()},[r,e,t,s,a,n]),d=(0,i.useCallback)(e=>{var a,s;let{detail:n}=e,r=null!=(a=null==n?void 0:n.numberOfImagesGenerated)?a:0,i=Number.parseInt(null!=(s=localStorage.getItem(eq.C.NUM_IMAGE_GENERATIONS_LAST_7_DAYS))?s:"0"),o=localStorage.getItem(eq.C.SEVEN_DAY_DEADLINE_IMG_GENERATIONS),c=new Date(null!=o?o:Date.now())<new Date;if(!o||c){let e=new Date(Date.now()+24*t.numberOfDays*36e5);localStorage.setItem(eq.C.SEVEN_DAY_DEADLINE_IMG_GENERATIONS,e.toISOString())}let u=c?r:i+r;localStorage.setItem(eq.C.NUM_IMAGE_GENERATIONS_LAST_7_DAYS,u.toString()),u>=t.threshold&&l(()=>(0,e0.i7)(eX.y.IMAGE_GENERATED_EVENT,d))},[l,t]);return d})();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e1,{flagName:eW.sF.HAS_SEEN_NPS_SURVEY_FORM,eventName:eX.y.IMAGE_GENERATED_EVENT,eventHandler:a}),(0,s.jsx)(e1,{flagName:eW.sF.HAS_SEEN_GENERAL_IMAGE_GENERATION_SURVEY_FORM,eventName:eX.y.IMAGE_GENERATED_EVENT,eventHandler:t}),(0,s.jsx)(e1,{flagName:eW.sF.HAS_SEEN_GENERAL_IMAGE_EDIT_SURVEY_FORM,eventName:eX.y.IMAGE_EDITED_EVENT,eventHandler:e})]})},e8=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.G_,{clientId:r.h.NEXT_PUBLIC_GOOGLE_CLIENT_ID,children:(0,s.jsx)(A,{})}),(0,s.jsx)(g,{}),(0,s.jsx)(eR,{}),(0,s.jsx)(ew,{}),(0,s.jsx)(c,{}),(0,s.jsx)(eY,{}),(0,s.jsx)(eO,{}),(0,s.jsx)(eT,{}),(0,s.jsx)(e6,{}),(0,s.jsx)(T,{}),(0,s.jsx)(l,{})]})},84735:(e,t,a)=>{"use strict";a.d(t,{Y:()=>o,Z:()=>d});var s=a(67933),n=a(27338),r=a(60095),i=a(34267),l=a(29551);let d=e=>{let{orgId:t}=e;return[i.c.ORGS_BASE_TAG,i.c.PINNED_ORGANIZATION_ASSETS,null!=t?t:""]},o=function(){let{enabled:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orgId:void 0},{user:a}=(0,r.u)();return(0,s.I)({queryKey:d({orgId:t.orgId}),staleTime:n.I5,queryFn:()=>l.o.getPinnedOrganizationFolderAssets(t),enabled:!!a&&(null==e||e)})}},86309:(e,t,a)=>{"use strict";a.d(t,{g:()=>i});var s=a(7620),n=a(60095),r=a(96450);let i=e=>{let{centrifuge:t,channel:a,handleSocketPublication:i}=e,{user:l}=(0,n.u)(),d=!!t,o=(0,r.Q)(i);return(0,s.useEffect)(()=>{if(null==t||!d||!l||!a)return;let e=null;return(()=>{let s=t.getSubscription(a),n=null!=s?s:t.newSubscription(a);n.on("publication",e=>{try{console.log("publication",e),o.current(e)}catch(e){console.error("Error handling socket publication",e)}}).on("subscribing",e=>console.log("subscribing",e)).on("subscribed",e=>{console.log("subscribed",e)}).on("unsubscribed",e=>console.log("unsubscribed",e)).on("join",e=>console.log("join",e)).on("leave",e=>console.log("leave",e)).subscribe(),e=n})(),()=>{e&&t.removeSubscription(e)}},[d,t,a,l,o]),null}},87146:(e,t,a)=>{"use strict";a.d(t,{Jl:()=>o,en:()=>d});var s=a(67933),n=a(16258),r=a(60095),i=a(36348),l=a(54828);let d=e=>{let{user:t}=(0,r.u)();return(0,s.I)({queryKey:[l.y.SINGLE_FLAG,e],enabled:!!(null==t?void 0:t.id),queryFn:async()=>(await i.M.getSingleUserFlag({name:e})).data})},o=()=>(0,n.n)({mutationFn:async e=>{let{flag:t,status:a}=e;return(await i.M.updateUserFlag({payload:{name:t,status:a}})).data}})},88168:(e,t,a)=>{"use strict";a.d(t,{GlobalModals:()=>aL});var s=a(54568),n=a(7620),r=a(96578),i=a(757),l=a(82806),d=a(223),o=a.n(d),c=a(62942),u=a(3418),m=a(178),p=a(30650),x=a(60095),f=a(35044),b=a(33029),h=a(45822),v=a(90820),_=a(22360),y=a(20844),g=a(3397),E=a(52948),I=a(13553),N=a(66727),j=a(49896),A=a(69472),k=a(61773),S=a(49759),O=a(54140);let $={CloseButton:e=>{let{onClose:t}=e;return(0,s.jsx)("div",{className:"tablet:block hidden",children:(0,s.jsx)(b.De,{btnProps:{size:"icon-sm"},onClick:t,tabIndex:-1})})},CTA:e=>{let{onUpgrade:t,ctaText:a}=e;return(0,s.jsx)("div",{className:"bg-background tablet:py-0 sticky bottom-0 mt-auto w-full px-2 py-2",children:(0,s.jsx)(O.$,{variant:"ai",size:"lg",onClick:t,tabIndex:-2,className:"w-full",children:a})})},Title:e=>{let{title:t,titleKeyword:a}=e;return(0,s.jsxs)("h1",{className:"text-heading-lg mobile:text-heading-2xl font-semibold",children:[t," ",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"bg-gradient-to-r from-[#8A3FFC] to-[#B182FF] bg-clip-text text-transparent",children:a})]})},Description:e=>{let{description:t}=e;return(0,s.jsx)("p",{className:"text-body-sm text-content-tertiary",children:t})}},T={Thumbnail:e=>{let{asset:t,assetType:a,title:n,thumbnail:r,onClose:i}=e;return(0,s.jsxs)("div",{className:"rounded-b-2 aspect-square max-h-[372px] shrink space-y-2 overflow-clip",children:[(0,s.jsx)("div",{className:"tablet:hidden sticky top-2 flex justify-end",children:(0,s.jsx)(b.De,{btnProps:{size:"icon-sm"},onClick:i})}),a===S.g.IMAGE&&(0,s.jsx)(k.default,{src:t,alt:n,width:355,height:404,className:"rounded-2 mx-auto h-full object-cover"}),a===S.g.VIDEO&&(0,s.jsx)("video",{loop:!0,muted:!0,autoPlay:!0,playsInline:!0,src:t,poster:r,className:"rounded-2 tablet:max-h-none mx-auto h-full max-h-[332px] w-auto object-cover"})]})},Content:e=>{let{title:t,titleKeyword:a,description:n,ctaText:r,onClose:i,onUpgrade:l}=e;return(0,s.jsxs)("div",{className:"tablet:basis-[404px] flex shrink grow basis-[131px] flex-col items-end gap-4 overflow-y-auto",children:[(0,s.jsx)($.CloseButton,{onClose:i}),(0,s.jsxs)("div",{className:"mobile:p-4 space-y-4 p-2",children:[(0,s.jsx)($.Title,{title:t,titleKeyword:a}),(0,s.jsx)($.Description,{description:n})]}),(0,s.jsx)($.CTA,{ctaText:r,onUpgrade:l})]})}},P=()=>{let{promotionCampaign:e}=(0,g.bO)(),t=(0,c.usePathname)(),{setUpgradeModalParams:a}=(0,A.i)(),{user:r}=(0,x.u)(),{isOpen:i}=(0,A.i)(),{checkIsAnyDialogOpenExcept:d}=(0,I.j)(),{isOpen:k,closeDialog:S,setDialogOpen:O}=(0,j.s)(N.D.PROMO_MODAL),$=d([N.D.PROMO_MODAL]),{data:P,isLoading:w}=(0,E.aR)(),{activeStripePlanName:C}=(null==P?void 0:P.subscription)?(0,h.B6)(P.subscription):{},R=new Set(e.visibleTo),D=p.O$.filter(e=>!R.has(e)),M=()=>{var t,a;let s=null!=(a=null==(t=e.popup)?void 0:t.repeatIntervalInHours)?a:24,n=o()().add(s,"hours").toDate();(0,l.setCookie)(m.e.HAS_SEEN_PROMO_MODAL,"true",{expires:n}),S()};if((0,n.useEffect)(()=>{O((0,l.getCookie)(m.e.HAS_SEEN_PROMO_MODAL)!==u.J.TRUE)},[O]),w||!k||$||!e.isLive||!e.popup||!r||i||!R.has(null!=C?C:f.M4.FREE)||t.startsWith(y.ze.JOIN)||t.startsWith(y.ze.ACCEPT_INVITE))return null;let{asset:L,assetType:U,thumbnail:G,ctaText:z,title:B,titleKeyword:F,description:q}=e.popup;return(0,s.jsx)(b.lG,{open:k,onOpenChange:M,children:(0,s.jsxs)(b.Cf,{overlayProps:{className:"backdrop-blur-md"},className:"tablet:max-w-3xl tablet:h-auto h-[min(calc(100dvh-32px),768px)] min-h-[388px] max-w-[min(calc(100vw-48px),380px)] drop-shadow-none",onOpenAutoFocus:e=>e.preventDefault(),children:[(0,s.jsx)(b.L3,{hidden:!0,children:"Promotion Modal"}),(0,s.jsxs)(b.R4,{className:"tablet:flex-row flex flex-col items-stretch justify-center gap-2 p-2",children:[(0,s.jsx)(T.Thumbnail,{asset:L,thumbnail:G,assetType:U,onClose:M,title:"".concat(B," ").concat(F)}),(0,s.jsx)(T.Content,{title:B,titleKeyword:F,description:q,onClose:M,onUpgrade:()=>{localStorage.setItem(_.C.ADD_TO_CART_CTA,v.J.PROMOTION_POPUP),a({isOpen:!0,upgradeablePlanNames:D}),M()},ctaText:z})]})]})})};var w=a(90819),C=a.n(w),R=a(83922),D=a(62384),M=function(e){return e.DOWNGRADE="downgrade",e.UPGRADE="upgrade",e}({}),L=a(75889),U=a(19603),G=a(27261),z=a.n(G);let B=e=>{let{modalTitle:t,tryAgainHandler:a,isLoading:n=!1}=e;return(0,s.jsxs)(b.Cf,{className:"ring-border-primary z-[1000] w-[496px] max-w-[496px] min-w-[496px] ring-1 ring-inset",overlayProps:{className:"bg-black/50 z-[999] backdrop-blur-[6px]"},children:[(0,s.jsxs)(b.c7,{className:"h-auto flex-row justify-between p-3 pl-6",children:[(0,s.jsx)(b.L3,{className:"text-label-lg font-medium",children:t}),(0,s.jsx)(b.De,{btnProps:{className:"static"}})]}),(0,s.jsxs)(b.R4,{className:"gap-4 p-6 pb-4",children:[(0,s.jsx)("h4",{className:"flex items-center gap-1",children:(0,s.jsx)("span",{className:"text-content-secondary text-label-xl font-semibold",children:"Error"})}),(0,s.jsxs)("p",{className:"text-body-sm text-content-secondary",children:["An error occurred while"," ","Upgrade Plan"===t?"upgrading":"downgrading"," your plan. Please try again later. If the issue persist please contact our"," ",(0,s.jsx)(z(),{className:"text-content-primary",href:y.ze.SUPPORT,children:"customer support"})]})]}),(0,s.jsx)(b.Es,{className:"border-0 p-4 pt-0",children:(0,s.jsx)(O.$,{className:"w-full",onClick:a,disabled:n,children:"Try Again"})})]})};var F=a(87606),q=a(51874),V=a(34991),K=a(80293);let Q=e=>{let{closeHandler:t,modalTitle:a}=e,r=(0,F.jE)();return(0,n.useEffect)(()=>{try{setTimeout(()=>{r.invalidateQueries({queryKey:[V.D.TOKEN_COUNT],refetchType:"all"}),r.invalidateQueries({queryKey:[K.D.USER_SUBSCRIPTION],refetchType:"all"})},2e3)}catch(e){q.oR.error(e instanceof Error?e.message:"Something went wrong while refreshing the subscription")}},[r]),(0,s.jsxs)(b.Cf,{className:"ring-border-primary z-[1000] w-[496px] max-w-[496px] min-w-[496px] ring-1 ring-inset",overlayProps:{className:"bg-black/50 backdrop-blur-[6px] z-[999]"},children:[(0,s.jsxs)(b.c7,{className:"h-auto flex-row justify-between p-3 pl-6",children:[(0,s.jsx)(b.L3,{className:"text-label-lg font-medium",children:a}),(0,s.jsx)(b.De,{btnProps:{className:"static"}})]}),(0,s.jsxs)(b.R4,{className:"gap-4 p-6 pb-8",children:[(0,s.jsx)("h4",{className:"flex items-center gap-1",children:(0,s.jsx)("span",{className:"text-content-secondary text-label-xl font-semibold",children:"Success"})}),(0,s.jsx)("p",{className:"text-body-sm text-content-secondary",children:"Your subscription plan has been updated! refresh your page to see the changes."})]}),(0,s.jsx)(b.Es,{className:"border-0 p-4 pt-0",children:(0,s.jsx)(O.$,{className:"w-full",onClick:t,children:"Refresh"})})]})},H={LATER:"LATER",SUCCESS:"SUCCESS",ERROR:"ERROR"};var J=a(10987),Y=a(1640),W=a(75036),X=a(33652);let Z=e=>{let{fromPlanCurrency:t,fromPlanPrice:a,fromPlanName:n,toPlanCurrency:r,toPlanPrice:i,toPlanName:l,formattedDueDate:d,amountDue:o,tax:c,isLoading:u=!1}=e,{locale:m}=(0,x.u)();return(0,s.jsxs)("div",{className:"flex flex-col items-start gap-6 self-stretch pb-2",children:[(0,s.jsx)("h3",{className:"text-content-secondary text-heading-xs font-semibold",children:"Summary"}),(0,s.jsxs)("div",{className:"flex flex-col items-start gap-3 self-stretch",children:[(0,s.jsxs)("div",{className:"text-content-secondary text-label-md flex items-center justify-between self-stretch capitalize",children:[(0,s.jsxs)("span",{children:["From ",n]}),u?(0,s.jsx)(W.E,{className:"h-5 w-20"}):(0,s.jsx)("span",{children:(0,X.v)({currency:t,value:a,locale:m})})]}),(0,s.jsxs)("div",{className:"text-content-secondary text-label-md flex items-center justify-between self-stretch capitalize",children:[(0,s.jsxs)("span",{children:["To ",l]}),u?(0,s.jsx)(W.E,{className:"h-5 w-20"}):(0,s.jsx)("span",{children:(0,X.v)({currency:r,value:i,locale:m})})]}),(0,s.jsx)(Y.w,{decorative:!0,className:"border-border-primary border-b border-dashed bg-transparent"}),(0,s.jsxs)("div",{className:"text-content-secondary text-label-md flex items-center justify-between self-stretch capitalize",children:[(0,s.jsx)("span",{children:"Subtotal"}),u?(0,s.jsx)(W.E,{className:"h-5 w-20"}):(0,s.jsx)("span",{children:(0,X.v)({currency:r,value:o-c,locale:m})})]}),(0,s.jsxs)("div",{className:"text-content-secondary text-label-md flex items-center justify-between self-stretch capitalize",children:[(0,s.jsx)("span",{children:"Estimated Tax"}),u?(0,s.jsx)(W.E,{className:"h-5 w-20"}):(0,s.jsx)("span",{children:(0,X.v)({currency:r,value:c,locale:m})})]}),(0,s.jsx)(Y.w,{decorative:!0,className:"border-border-primary h-0 border-b bg-transparent"}),(0,s.jsxs)("div",{className:"text-label-md text-content-primary flex items-center justify-between self-stretch",children:[(0,s.jsxs)("span",{className:"font-medium",children:["Total amount due on ",d]}),u?(0,s.jsx)(W.E,{className:"h-5 w-20"}):(0,s.jsx)("span",{className:"font-semibold",children:(0,X.v)({currency:r,value:o,locale:m})})]})]})]})},ee=e=>{var t,a,n,r;let{moveToTab:i,changeToPlan:l,product:d,activeSubscription:o}=e,{mutateAsync:c,isPending:u}=(0,E._Z)({product:d}),m=null==o||null==(a=o.subscription)||null==(t=a.stripe)?void 0:t.StripePrice,{stripeExpiresIn:p}=(0,h.B6)(null!=(r=null==o?void 0:o.subscription)?r:null),x=async()=>{try{await c({priceId:l.stripePriceId}),i(H.SUCCESS)}catch(e){i(H.ERROR)}};return m?(0,s.jsxs)(b.Cf,{className:"ring-border-primary z-[1000] w-[496px] max-w-[496px] min-w-[496px] ring-1 ring-inset",overlayProps:{className:"bg-black/50 backdrop-blur-[6px] z-[999]"},children:[(0,s.jsxs)(b.c7,{className:"h-auto flex-row justify-between p-3 pl-6",children:[(0,s.jsx)(b.L3,{className:"text-label-lg font-medium",children:"Downgrade Plan"}),(0,s.jsx)(b.De,{btnProps:{className:"static"}})]}),(0,s.jsxs)(b.R4,{className:"gap-6 overflow-hidden overflow-y-auto p-6 pb-4",children:[(0,s.jsx)("p",{className:"text-body-sm text-content-secondary",children:"At the end of your billing cycle, your subscription plan will automatically renew and update to your new plan."}),(0,s.jsx)(Z,{fromPlanCurrency:m.currency,fromPlanPrice:m.price,fromPlanName:"".concat(m.billingInterval," ").concat(null==(n=m.StripeProduct)?void 0:n.name),toPlanCurrency:l.currency,toPlanPrice:l.price,toPlanName:"".concat(l.billingInterval," ").concat(l.name),formattedDueDate:p,amountDue:l.price,tax:0})]}),(0,s.jsx)(b.Es,{className:"gap-3 border-0 p-4 pt-0",children:(0,s.jsx)(O.$,{className:"w-full",onClick:x,disabled:u,children:u?(0,s.jsx)(J.y,{className:"size-5"}):"Confirm Change"})})]}):null},et="Downgrade Plan",ea=e=>{let{changeToPlan:t,open:a,setIsOpen:r,product:i,activeSubscription:l,setSubscriptionQueryStates:d}=e,[o,c]=(0,n.useState)(H.LATER),{mutateAsync:u,isPending:m}=(0,E._Z)({product:i}),p=t.StripePrice[0]?{...t.StripePrice[0],name:t.name}:void 0,x=e=>{e||d({[D.u.PRICE_ID]:null,[D.u.SUBSCRIPTION_ACTION]:null}),r(e)};if((0,n.useEffect)(()=>{a&&c(H.LATER)},[a]),!p)return null;let f=async()=>{try{await u({priceId:p.stripePriceId}),c(H.SUCCESS)}catch(e){c(H.ERROR)}};return(0,s.jsxs)(b.lG,{open:a,onOpenChange:x,children:[(0,s.jsx)(U.s,{children:(0,s.jsx)(b.c7,{children:et})}),(0,s.jsx)(U.s,{children:(0,s.jsx)(b.rr,{children:"Downgrade your plan to ".concat(t.name,".")})}),(0,s.jsxs)(L.Tabs,{value:o,onValueChange:c,children:[(0,s.jsx)(L.av,{value:H.LATER,children:(0,s.jsx)(ee,{activeSubscription:l,product:i,moveToTab:c,changeToPlan:p})}),(0,s.jsx)(L.av,{value:H.SUCCESS,children:(0,s.jsx)(Q,{closeHandler:()=>x(!1),modalTitle:et})}),(0,s.jsx)(L.av,{value:H.ERROR,children:(0,s.jsx)(B,{tryAgainHandler:f,modalTitle:et,isLoading:m})})]})]})},es=e=>{let{subscriptions:t,product:a,activeSubscription:r}=e,[i,l]=(0,R.ab)({[D.u.PRICE_ID]:R.tU,[D.u.SUBSCRIPTION_ACTION]:R.tU}),d=i[D.u.SUBSCRIPTION_ACTION],o=i[D.u.PRICE_ID],[c,u]=(0,n.useState)(!1),m=(0,n.useMemo)(()=>{let e=C()(Object.values(t).flatMap(e=>e)).find(e=>e.StripePrice.map(e=>e.stripePriceId===o).reduce((e,t)=>e||t,!1));return e?(e.StripePrice=e.StripePrice.filter(e=>e.stripePriceId===o),e):null},[o,t]);return((0,n.useEffect)(()=>{o&&m&&u(d===M.DOWNGRADE)},[m,u,d,o]),m&&d===M.DOWNGRADE)?(0,s.jsx)(ea,{activeSubscription:r,open:c,setIsOpen:u,changeToPlan:m,product:a,setSubscriptionQueryStates:l}):null};var en=a(41009),er=a(2830),ei=a(11386),el=a(615);let ed=(0,el.F)("focus-visible:ring-2 focus-visible:outline-none aria-checked:focus-visible:ring-border-inverse-hover focus-visible:ring-border-tertiary-hover focus-visible:border-border-tertiary-hover focus-visible:ring-offset-2 focus-visible:ring-offset-border-primary group aspect-square rounded-full border-2 border-border-tertiary hover:border-border-tertiary-hover text-content-primary aria-checked:border-none aria-checked:bg-surface-inverse aria-checked:disabled:bg-fill-inverse-disabled aria-checked:hover:bg-fill-inverse-hover disabled:border-border-tertiary-disabled aria-checked:active:bg-fill-inverse-active disabled:cursor-not-allowed",{variants:{size:{sm:"size-4",md:"size-5"}},defaultVariants:{size:"md"}}),eo=e=>{let{className:t,...a}=e;return(0,s.jsx)(er.bL,{"data-slot":"radio-group",className:(0,ei.cn)("grid gap-3",t),...a})},ec=e=>{let{className:t,size:a,...n}=e;return(0,s.jsx)(er.q7,{"data-slot":"radio-group-item",className:(0,ei.cn)("group",ed({size:a}),t),...n,children:(0,s.jsx)(er.C1,{"data-slot":"radio-group-indicator",className:(0,ei.cn)("flex items-center justify-center",a),children:(0,s.jsx)("div",{className:(0,ei.cn)("bg-background flex items-center justify-center rounded-full transition-colors duration-300 [.sm_&]:size-1.5",a),children:(0,s.jsx)("div",{className:"bg-background group-disabled:bg-fill-primary-disabled size-2 rounded-full transition-colors duration-300 [.sm_&]:size-1"})})})})};ec.displayName=er.q7.displayName;let eu={IMMEDIATE:"IMMEDIATE",LATER:"LATER"},em={OPTIONS:"OPTIONS",SUCCESS:"SUCCESS",ERROR:"ERROR"},ep=e=>{var t,a,r,i,l,d,c,u;let{moveToTab:m,selectedTimeFrame:p,setSelectedTimeFrame:x,changeToPlan:f,product:v,activeSubscription:_}=e,[y,g]=(0,n.useState)(!1),{stripeExpiresIn:I}=(0,h.B6)(null!=(l=null==_?void 0:_.subscription)?l:null),N=null==_||null==(a=_.subscription)||null==(t=a.stripe)?void 0:t.StripePrice,j=(null==N?void 0:N.billingInterval)==="yearly"&&"monthly"===f.billingInterval,{data:A,isLoading:k,isError:S}=(0,E.Ko)({priceId:f.stripePriceId,enabled:p===eu.IMMEDIATE,product:v}),$=(0,E.vY)({product:v}),T=(0,E._Z)({product:v}),P=p===eu.IMMEDIATE&&k||!N||$.isPending||T.isPending,w=S?0:null!=(d=null==A?void 0:A.amount)?d:0,C=null!=(c=null==A?void 0:A.tax)?c:0,R=p===eu.LATER?I:o()().format("MMM D, YYYY"),D=S?0:(null!=(u=f.price)?u:0)-(w-C),M=async()=>{try{await $.mutateAsync({priceId:f.stripePriceId}),m(em.SUCCESS)}catch(e){m(em.ERROR)}},L=async()=>{try{await T.mutateAsync({priceId:f.stripePriceId}),m(em.SUCCESS)}catch(e){m(em.ERROR)}};return((0,n.useEffect)(()=>{p!==eu.LATER&&w<0&&(x(eu.LATER),g(!0),q.oR.warning("Current plan value exceeds the target plan. Please select another plan or change at the end of your subscription."))},[w,p,x]),N)?(0,s.jsxs)(b.Cf,{className:"ring-border-primary z-[1000] w-[496px] max-w-[496px] min-w-[496px] ring-1 ring-inset",children:[(0,s.jsxs)(b.c7,{className:"h-auto flex-row justify-between p-3 pl-6",children:[(0,s.jsx)(b.L3,{className:"text-label-lg font-medium",children:"Upgrade Plan"}),(0,s.jsx)(b.De,{})]}),(0,s.jsxs)(b.R4,{className:"gap-8 overflow-hidden overflow-y-auto p-6 pb-4",children:[(0,s.jsxs)("div",{className:"flex flex-col items-start gap-6 self-stretch",children:[(0,s.jsx)("h3",{className:"text-content-secondary text-heading-xs font-semibold",children:"Time Frame"}),(0,s.jsxs)(eo,{value:p,onValueChange:x,children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 select-none aria-disabled:pointer-events-none aria-disabled:opacity-30","aria-disabled":j||y,children:[(0,s.jsx)(ec,{value:eu.IMMEDIATE,id:eu.IMMEDIATE,disabled:j||y}),(0,s.jsx)("label",{htmlFor:eu.IMMEDIATE,className:"text-body-sm text-content-secondary",children:"Change immediately with allocation"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 select-none",children:[(0,s.jsx)(ec,{value:eu.LATER,id:eu.LATER}),(0,s.jsx)("label",{htmlFor:eu.LATER,className:"text-body-sm text-content-secondary",children:"Change at the end of subscription period"})]})]}),(0,s.jsx)("p",{className:"text-body-sm text-content-secondary",children:p===eu.IMMEDIATE?"Changing the plan right now will allocate your current subscriptions remaining ".concat(en.q.PLURAL," and time to the new one."):"Changing the plan at the end of subscription period will automatically update your plan to the newly selected."})]}),p===eu.LATER?(0,s.jsx)(Z,{fromPlanCurrency:N.currency,fromPlanPrice:N.price,fromPlanName:"".concat(N.billingInterval," ").concat(null==(r=N.StripeProduct)?void 0:r.name),toPlanCurrency:f.currency,toPlanPrice:f.price,toPlanName:"".concat(f.billingInterval," ").concat(f.name),formattedDueDate:R,amountDue:f.price,tax:0}):(0,s.jsx)(Z,{fromPlanCurrency:N.currency,fromPlanPrice:D,fromPlanName:"".concat(N.billingInterval," ").concat(null==(i=N.StripeProduct)?void 0:i.name),toPlanCurrency:f.currency,toPlanPrice:f.price,toPlanName:"".concat(f.billingInterval," ").concat(f.name),formattedDueDate:R,amountDue:w,tax:C,isLoading:k})]}),(0,s.jsx)(b.Es,{className:"border-0 p-4 pt-0",children:(0,s.jsx)(O.$,{className:"w-full",onClick:()=>{p===eu.IMMEDIATE?M():L()},disabled:P,children:$.isPending||T.isPending?(0,s.jsx)(J.y,{className:"size-5"}):"Confirm Change"})})]}):null},ex="Upgrade Plan",ef=e=>{let{changeToPlan:t,open:a,setIsOpen:r,product:i,activeSubscription:l,setSubscriptionQueryStates:d}=e,[o,u]=(0,n.useState)(em.OPTIONS),[m,p]=(0,n.useState)(eu.IMMEDIATE),x=(0,c.usePathname)(),{mutateAsync:f,isPending:h}=(0,E._Z)({product:i}),{mutateAsync:v,isPending:_}=(0,E.vY)({product:i}),y=t.StripePrice[0]?{...t.StripePrice[0],name:t.name}:void 0;if((0,n.useEffect)(()=>{a&&(u(em.OPTIONS),p(eu.IMMEDIATE))},[a]),!y)return null;let g=async()=>{if(m===eu.LATER)try{await f({priceId:null==y?void 0:y.stripePriceId}),u(em.SUCCESS)}catch(e){u(em.ERROR)}else try{await v({priceId:null==y?void 0:y.stripePriceId}),u(em.SUCCESS)}catch(e){u(em.ERROR)}};return(0,s.jsxs)(b.lG,{onOpenChange:e=>{e||d({[D.u.PRICE_ID]:null,[D.u.SUBSCRIPTION_ACTION]:null}),r(e)},open:a,children:[(0,s.jsx)(U.s,{children:(0,s.jsx)(b.c7,{children:ex})}),(0,s.jsx)(U.s,{children:(0,s.jsx)(b.rr,{children:"Upgrade your plan to ".concat(t.name," and enjoy the benefits of the new plan. Choose a time frame that suits you best.")})}),(0,s.jsxs)(L.Tabs,{value:o,onValueChange:e=>{u(e)},children:[(0,s.jsx)(L.av,{value:em.OPTIONS,children:(0,s.jsx)(ep,{activeSubscription:l,product:i,moveToTab:u,selectedTimeFrame:m,setSelectedTimeFrame:p,changeToPlan:y})}),(0,s.jsx)(L.av,{value:em.SUCCESS,children:(0,s.jsx)(Q,{closeHandler:()=>{window.location.href=x},modalTitle:ex})}),(0,s.jsx)(L.av,{value:em.ERROR,children:(0,s.jsx)(B,{isLoading:h||_,tryAgainHandler:g,modalTitle:ex})})]})]})},eb=e=>{let{subscriptions:t,product:a,activeSubscription:r}=e,[i,l]=(0,R.ab)({[D.u.PRICE_ID]:R.tU,[D.u.SUBSCRIPTION_ACTION]:R.tU}),d=i[D.u.SUBSCRIPTION_ACTION],o=i[D.u.PRICE_ID],[c,u]=(0,n.useState)(!1),m=(0,n.useMemo)(()=>{let e=C()(Object.values(t).flatMap(e=>e)).find(e=>e.StripePrice.map(e=>e.stripePriceId===o).reduce((e,t)=>e||t,!1));return e?(e.StripePrice=e.StripePrice.filter(e=>e.stripePriceId===o),e):null},[o,t]);return((0,n.useEffect)(()=>{o&&m&&u(d===M.UPGRADE)},[m,u,d,o]),m&&d===M.UPGRADE)?(0,s.jsx)(ef,{activeSubscription:r,open:c,setIsOpen:u,changeToPlan:m,product:a,setSubscriptionQueryStates:l}):null},eh=()=>{let{data:e}=(0,E.Yu)(),{data:t}=(0,E.aR)();return t&&e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eb,{activeSubscription:t,product:"imagine",subscriptions:e}),(0,s.jsx)(es,{activeSubscription:t,product:"imagine",subscriptions:e})]}):null};var ev=a(97315),e_=a(46626);function ey(e){let{...t}=e;return(0,s.jsx)(ev._s.Root,{"data-slot":"drawer",...t})}let eg=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,ei.cn)("flex h-full flex-1 flex-col gap-1 self-stretch",t),...a})};function eE(e){let{...t}=e;return(0,s.jsx)(ev._s.Portal,{"data-slot":"drawer-portal",...t})}function eI(e){let{className:t,...a}=e;return(0,s.jsx)(ev._s.Overlay,{"data-slot":"drawer-overlay",className:(0,ei.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 bg-neutral-black/50 fixed inset-0 z-50",t),...a})}function eN(e){let{className:t,children:a,overlayProps:n,noVaul:r=!1,...i}=e;return(0,s.jsxs)(eE,{"data-slot":"drawer-portal",children:[(0,s.jsx)(eI,{...n}),(0,s.jsxs)(ev._s.Content,{"data-slot":"drawer-content",className:(0,ei.cn)("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",t),...i,children:[!r&&(0,s.jsx)("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),a]})]})}function ej(e){let{className:t,...a}=e;return(0,s.jsx)(ev._s.Title,{"data-slot":"drawer-title",className:(0,ei.cn)("text-foreground font-semibold",t),...a})}function eA(e){let{className:t,...a}=e;return(0,s.jsx)(ev._s.Description,{"data-slot":"drawer-description",className:(0,ei.cn)("text-muted-foreground text-sm",t),...a})}var ek=a(78848);let eS={Root:e=>{let{children:t,open:a,onOpenChange:n}=e;return(0,ek.jj)()?(0,s.jsx)(ey,{open:a,onOpenChange:n,children:t}):(0,s.jsx)(b.lG,{open:a,onOpenChange:n,children:t})},Content:e=>{let{children:t,dialogProps:a,drawerProps:n}=e;return(0,ek.jj)()?(0,s.jsx)(eN,{...n,children:t}):(0,s.jsx)(b.Cf,{...a,children:t})},Title:e=>{let{children:t,dialogProps:a,drawerProps:n}=e;return(0,ek.jj)()?(0,s.jsx)(ej,{...n,children:t}):(0,s.jsx)(b.L3,{...a,children:t})},Description:e=>{let{children:t,dialogProps:a,drawerProps:n}=e;return(0,ek.jj)()?(0,s.jsx)(eA,{...n,children:t}):(0,s.jsx)(b.rr,{...a,children:t})},Body:e=>{let{children:t,dialogProps:a,drawerProps:n}=e;return(0,ek.jj)()?(0,s.jsx)(eg,{...n,children:t}):(0,s.jsx)(b.R4,{...a,children:t})}};var eO=a(53605);let e$=()=>{let{setIsOpen:e}=(0,A.i)(),{activeStripePlanName:t}=(0,eO.c)(),[,a]=(0,R.ZA)(D.u.TOP_UP_MODAL_OPEN,R.cr);return t&&t!==f.M4.FREE?(0,s.jsx)(O.$,{size:"lg",variant:"secondary",onClick:()=>{e(!1),a(!0)},className:"tablet:w-fit w-full",children:"Buy credit packs"}):null};var eT=a(49013),eP=a(65327);let ew=e=>{var t,a;let{title:r,description:i,plansToDisplay:l,onClose:d,hideTabs:o}=e,{billingInterval:c}=(0,eO.c)(),{defaultInterval:u}=(0,g.bO)().subscriptionPlansInfo,[m,p]=(0,n.useState)(),x=null!=(t=Object.keys(l).every(e=>4===l[e].length))&&t;return(0,s.jsxs)(b.R4,{className:"relative overflow-auto px-3.5 pt-8 pb-12",children:[(0,s.jsx)(eP.e,{title:r,description:i}),(0,s.jsx)(eT.t,{subscriptionItems:l,hideTabs:o,activeTab:null!=(a=null!=m?m:c)?a:u,setActiveTab:p}),!x&&(0,s.jsxs)("div",{className:"tablet:flex-nowrap mt-8 flex flex-wrap items-center justify-center gap-2 self-stretch",children:[(0,s.jsx)(e$,{}),(0,s.jsx)(O.$,{asChild:!0,variant:"outline",size:"lg",className:"tablet:w-fit w-full",onClick:d,children:(0,s.jsx)(z(),{href:y.ze.SUBSCRIPTION,children:"Explore plans"})})]})]})},eC=e=>{var t,a;let{plansToDisplay:n,title:r,description:i,isError:l,isLoading:d,onClose:o,hideTabs:c,redirectRoute:u,generationTool:m}=e,p=null!=(t=Object.keys(n).every(e=>2===n[e].length))&&t,x=null!=(a=Object.keys(n).every(e=>1===n[e].length))&&a;return(0,s.jsxs)(b.Cf,{className:(0,ei.cn)("tablet:max-h-[calc(100vh-116px)] tablet:rounded-4 tablet:max-w-[calc(100%-16px)] tablet:px-6 desktop-l:max-w-[1700px] z-[100] max-h-svh w-full max-w-max gap-0 overflow-auto rounded-none",{"tablet:max-w-[min(calc(100%-16px),908px)] w-full":p,"size-full max-h-[min(calc(100vh-16px),var(--upgrade-access-modal-single-plan-height))] max-w-[min(calc(100%-16px),520px)] lg:max-w-[min(calc(100%-16px),1024px)]":x}),overlayProps:{className:"backdrop-blur-[6px]"},style:{"--upgrade-access-modal-single-plan-height":"896px"},children:[(0,s.jsxs)(U.s,{children:[(0,s.jsx)(b.L3,{children:r}),(0,s.jsx)(b.rr,{children:"Upgrade to a new plan"})]}),(0,s.jsx)(b.De,{btnProps:{size:"icon-sm",className:"sticky z-[50] ml-auto top-4 "}}),(0,s.jsx)(ew,{title:r,description:i,isError:l,isLoading:d,plansToDisplay:n,onClose:o,hideTabs:c,redirectRoute:u,generationTool:m})]})},eR=()=>{let{isOpen:e,setIsOpen:t,title:a,redirectRoute:r,setTitle:i,setUpgradeModalParams:l,description:d,setDescription:o}=(0,A.i)(),{user:u}=(0,x.u)(),{promotionCampaign:m}=(0,g.bO)(),{isError:f,isLoading:b}=(0,E.Yu)(),h=(()=>{let{data:e}=(0,E.Yu)(),{upgradeablePlanNames:t}=(0,A.i)(),{subscribedPriceItem:a}=(0,eO.c)();return(0,n.useMemo)(()=>{let s;if(!e)return null;if(a){var n,r,i;let t=null!=(i=null!=(r=a.name)?r:null==(n=a.StripeProduct)?void 0:n.name)?i:"Standard";s=Object.keys(e).reduce((a,s)=>(a[s]=e[s].filter(e=>p.I3.indexOf(e.name)>p.I3.indexOf(t)),a),{})}else s=e;return Object.keys(s).reduce((e,a)=>(e[a]=s[a].filter(e=>t.includes(e.name)),e),{})},[e,a,t])})(),v=(0,c.useSearchParams)(),_=(0,c.useRouter)(),y=(0,c.usePathname)(),I="true"===v.get(D.u.SHOW_UPGRADE_MODAL),N=(0,n.useMemo)(()=>!h||Object.values(h).every(e=>0===e.length),[h]),j=(0,n.useCallback)(()=>{let e=new URLSearchParams(v.toString());e.delete(D.u.SHOW_UPGRADE_MODAL);let t="".concat(y).concat(e.size?"?".concat(e):"");_.replace(t)},[v,y,_]),k=(0,n.useCallback)(()=>{t(!1),i(p.r_.DEFAULT.TITLE),o(p.r_.DEFAULT.DESCRIPTION),j()},[t,i,j,o]);return((0,n.useEffect)(()=>{if(!u)return;let e=new Set(m.visibleTo);I&&(l({isOpen:!0,upgradeablePlanNames:p.O$.filter(t=>!e.has(t))}),j())},[u,k,N,j,l,I,m.visibleTo]),!h||N)?null:(0,s.jsx)(eS.Root,{open:e,onOpenChange:t,children:(0,s.jsx)(eC,{title:a,description:d,isError:f,isLoading:b,plansToDisplay:h,onClose:k,hideTabs:!1,redirectRoute:r})})};var eD=a(18010),eM=a(66238),eL=a(54388),eU=a(99588);let eG=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(U.s,{children:[(0,s.jsxs)(eS.Title,{children:["Top up your ",en.q.PLURAL]}),(0,s.jsxs)(eS.Description,{children:["Running low on ",en.q.PLURAL,"? Purchase"," ",en.q.PLURAL," "]})]}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h3",{className:"text-heading-md font-semibold",children:["Buy ",en.q.PLURAL]}),(0,s.jsx)(b.De,{})]}),(0,s.jsx)("p",{className:"text-body-sm text-content-tertiary",children:"Get access to more generations"})]})]});var ez=a(87552),eB=a(53513);let eF=e=>{let{selectedPriceId:t}=e,{buyCreditsOfferings:a}=(0,g.bO)(),n=a[t];if(n)return(0,s.jsxs)("div",{className:"rounded-4 text-body-xs border-border-primary relative w-full space-y-4 overflow-hidden border p-4",children:[n.discountPercentage&&(0,s.jsxs)(ez.E,{className:"bg-fill-brand-secondary text-content-brand text-label-sm pointer-events-none absolute top-2.5 right-2.5 font-medium",children:[n.discountPercentage,"% off"]}),(0,s.jsx)("p",{className:"font-medium",children:"Includes: "}),(0,s.jsx)("div",{className:"space-y-3",children:n.offerings.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-end justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(e_.Srz,{className:"size-4 min-w-4"}),(0,s.jsx)("p",{className:"line-clamp-2",children:e.text})]}),e.info&&(0,s.jsxs)(eB.m_,{children:[(0,s.jsx)(eB.k$,{children:(0,s.jsx)(e_.Cd2,{className:"text-content-tertiary size-4.5"})}),(0,s.jsx)(eB.ZI,{children:e.info})]})]},t))})]})},eq=()=>(0,s.jsxs)("div",{className:"rounded-4 text-body-xs border-border-primary relative w-full max-w-[290px] space-y-4 overflow-hidden border p-4",children:[(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 absolute top-0 left-0 -z-10 h-[198px] w-full animate-pulse opacity-80 blur-[100px]"}),(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 h-4 w-16 animate-pulse"}),(0,s.jsx)("div",{className:"rounded-4 space-y-3",children:Array.from({length:3},(e,t)=>(0,s.jsxs)("div",{className:"rounded-4 flex items-end justify-between gap-2",children:[(0,s.jsxs)("div",{className:"rounded-4 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 size-4 min-w-4 animate-pulse"}),(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 h-4 w-32 animate-pulse"})]}),0===t&&(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 size-4.5 animate-pulse"})]},t))})]}),eV=()=>(0,s.jsxs)("div",{className:"flex min-h-[304px] flex-col gap-4",children:[(0,s.jsxs)("div",{className:"rounded-4 space-y-2",children:[(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 h-8 w-24 animate-pulse"}),(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 h-4 w-32 animate-pulse"})]}),(0,s.jsxs)("div",{className:"rounded-4 flex h-full flex-col justify-between gap-6",children:[(0,s.jsxs)("div",{className:"rounded-4",children:[(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 h-4 w-20 animate-pulse"}),(0,s.jsxs)("div",{className:"relative mt-2 w-[290px]",children:[(0,s.jsx)("div",{className:"bg-surface-tertiary h-1 w-full animate-pulse rounded-full"}),(0,s.jsx)("div",{className:"pointer-events-none absolute top-1/2 right-0 left-0 -z-10 flex w-[290px] -translate-y-1/2 justify-between",children:Array.from({length:5},(e,t)=>(0,s.jsx)("div",{className:"bg-surface-tertiary size-2 animate-pulse rounded-full"},t))})]})]}),(0,s.jsx)("div",{className:"bg-surface-tertiary rounded-4 h-10 w-full animate-pulse"})]})]});var eK=a(19533),eQ=a(16001),eH=a(73583);let eJ=e=>{let{isLoading:t,selectedPriceId:a}=e,[n]=(0,R.ZA)(D.u.PRODUCT_ID,(0,R.M1)(f.Ve.options)),r=(0,E.lM)({product:null!=n?n:"imagine",successUrl:(0,eQ.G)(y.ze.HOME,window.location.origin),cancelUrl:(0,eQ.G)(y.ze.HOME,window.location.origin)}),{isRevenueCatActiveAndNotStripeActive:i}=(0,eO.c)(),l=(0,s.jsx)("button",{className:"rounded-4 bg-fill-brand text-label-xl group text-content-fixed-inverse relative mt-6 flex h-14 w-full items-center justify-center overflow-hidden font-medium",disabled:t||r.isPending||i,onClick:()=>{r.mutate(null!=a?a:"",{onSuccess:eH.M,onError:eH.j})},children:r.isPending?(0,s.jsx)(J.y,{className:"size-5"}):(0,s.jsxs)("div",{className:"rounded-4 bg-fill-brand text-label-xl group text-content-fixed-inverse relative flex h-14 w-full items-center justify-center overflow-hidden font-medium",children:[(0,s.jsxs)("span",{className:"z-10 flex items-center justify-center gap-2",children:["Buy credits",(0,s.jsx)(e_.JLc,{className:"size-4.5 transition-transform group-hover:translate-x-1"})]}),(0,s.jsx)("span",{className:"absolute top-2.5 left-1/2 h-[179px] w-4/5 -translate-x-1/2 animate-[float_2400ms_infinite] rounded-[50%] bg-[#CB89FEB8] blur-md"})]})});return i?(0,s.jsxs)(eB.m_,{children:[(0,s.jsx)(eB.k$,{asChild:!0,children:(0,s.jsx)("span",{className:"inline-flex w-full",children:l})}),(0,s.jsx)(eB.ZI,{children:"You can manage your subscription on the mobile app."})]}):l},eY=e=>{let{selectedPrice:t,minPrice:a,discountPercentage:n,currency:r,selectedPlanTokens:i}=e,{locale:l}=(0,x.u)(),d=t-n/100*t,o=(0,X.v)({value:d,currency:r,locale:l}),c=(0,X.v)({value:Number((e=>{let[t,a=""]=e.toFixed(10).split(".");if(a){let e=a.search(/[1-9]/);if(e>=2)return t+"."+a.slice(0,e+1)}return e.toFixed(2)})(t/(i||1))),currency:r,locale:l});return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("h4",{className:(0,ei.cn)("text-heading-md flex items-center gap-[11px] font-semibold transition-all duration-300 ease-out",{"text-content-brand":t!==a,"text-display-xs":o.length<=5,"text-heading-md":o.length>5}),children:[o,d!==t&&(0,s.jsxs)("span",{className:(0,ei.cn)("text-content-tertiary-disabled relative font-medium",{"text-heading-xs":o.length<=5,"text-body-sm":o.length>5}),children:[(0,s.jsx)("span",{className:"bg-content-tertiary absolute top-1/2 h-0.5 w-full -rotate-[15deg] rounded-full"}),(0,X.v)({value:t,currency:r,locale:l})]})]}),(0,s.jsx)("p",{className:"text-body-sm text-content-secondary transition-all duration-300 ease-out",children:i&&"Total credits: ".concat(i.toLocaleString()," (").concat(c," / credit)")})]})};var eW=a(33142);let eX=e=>{let{stripePlan:t,onClick:a,value:n}=e,{locale:r}=(0,x.u)();return(0,s.jsx)("button",{className:"group flex cursor-pointer flex-col items-center gap-1 first:items-start last:items-end",onClick:a,children:(0,s.jsx)("span",{className:(0,ei.cn)("text-label-sm text-center",{"text-content-tertiary":t.stripePriceId!==n,"text-content-secondary":t.stripePriceId===n}),children:(0,X.v)({value:t.price,currency:t.currency,locale:r,options:{notation:"compact",maximumFractionDigits:1}})})})},eZ=e=>{let{minPrice:t,maxPrice:a,sortedStripePrices:r,onChange:i,value:l}=e,d=(a-t)/(r.length-1),[o,c]=(0,n.useState)(t),u=r.reduce((e,a,s)=>{let{stripePriceId:n}=a;return e[t+d*s]=n,e},{});return(0,s.jsxs)("div",{className:"relative w-full space-y-2",children:[(0,s.jsx)(eW.A,{value:[o],step:d,min:t,max:a,className:"[&_[data-slot=slider-thumb]]:border-border-secondary [&_[data-slot=slider-thumb]]:bg-fill-inverse relative z-10 w-full [&_[data-slot=slider-range]]:transition-all [&_[data-slot=slider-range]]:duration-200 [&_[data-slot=slider-range]]:ease-out [&_[data-slot=slider-thumb]]:size-5 [&_[data-slot=slider-thumb]]:transition-transform [&_[data-slot=slider-thumb]]:duration-200 [&_[data-slot=slider-thumb]]:ease-out [&_[data-slot=slider-track]]:h-1",onValueChange:e=>{let[a]=e;return(e=>{let t=u[e];t&&(i(t),c(e))})(null!=a?a:t)}}),(0,s.jsx)("div",{className:"pointer-events-none absolute top-0 right-0 left-0 z-20 flex w-full justify-between",children:r.map((e,a)=>{let n=t+d*a;return(0,s.jsx)("div",{className:(0,ei.cn)("bg-background h-1 w-2 transition-opacity duration-200",{"opacity-0":n<=o})},e.id)})}),(0,s.jsx)("div",{className:"absolute top-3 right-0 left-0 z-0 flex w-full cursor-pointer justify-between",children:r.map(e=>(0,s.jsx)(eX,{value:l,stripePlan:e,onClick:()=>{let t=Object.keys(u).find(t=>u[Number(t)]===e.stripePriceId);t&&(i(e.stripePriceId),c(Number(t)))}},e.id))})]})},e0=e=>{var t,a,n,r;let{stripePrices:i,value:l,onChange:d,isLoading:o}=e,{buyCreditsOfferings:c}=(0,g.bO)(),u=c[l],m=i.sort((e,t)=>e.price-t.price);if(!m[0])return;let p=(null==(t=m[0])?void 0:t.price)||0,x=(null==(a=m.at(-1))?void 0:a.price)||0,f={...m.find(e=>{let{stripePriceId:t}=e;return t===l})||m[0],...u};return(0,s.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,s.jsx)(eY,{minPrice:p,currency:f.currency,selectedPrice:f.price,selectedPlanTokens:null!=(n=f.tokens)?n:0,discountPercentage:null!=(r=f.discountPercentage)?r:0}),(0,s.jsx)(eZ,{value:l,onChange:d,minPrice:p,maxPrice:x,sortedStripePrices:m})]}),(0,s.jsx)("div",{children:(0,s.jsx)(eJ,{isLoading:o,selectedPriceId:l})})]})},e1=()=>{var e,t,a,r;let[i,l]=(0,R.ZA)(D.u.TOP_UP_MODAL_OPEN,R.cr.withDefault(!1)),{aggregator:d}=(0,eU.p)(),{computeUserAnalyticsInfo:o}=(0,eL.U)(),{data:c,isLoading:u}=(0,E.XE)({product:"imagine",enabled:!0}),m=null==c||null==(t=c[0])||null==(e=t.StripePrice[0])?void 0:e.stripePriceId,[p,x]=(0,n.useState)();return(0,n.useEffect)(()=>{x(m)},[m]),(0,n.useEffect)(()=>{if(!i)return;let{page:e,userStatus:t,userPlan:a,userPlanPeriod:s,source:n,id:r}=o();t!==eM.k.FREE&&d.log(eD.M.buyCredits.withProperties({page_name:e,source:n,user_account_status:t,user_plan:a,user_plan_period:s,distinct_id:r}))},[d,o,i]),(0,s.jsx)(eS.Root,{open:i,onOpenChange:()=>{l(e=>!e),x(m)},children:(0,s.jsx)(eS.Content,{dialogProps:{className:"flex w-full max-w-[655px] flex-col items-start gap-6 p-6"},drawerProps:{className:"p-4 mobile:p-6 rounded-t-6 border-none",noVaul:!0},children:(0,s.jsxs)(eS.Body,{dialogProps:{className:"flex flex-col gap-6"},drawerProps:{className:"flex flex-col gap-6 !outline-none overflow-hidden"},children:[(0,s.jsx)(eG,{}),(0,s.jsx)("div",{className:"flex w-full flex-col gap-6 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[u?(0,s.jsx)(eV,{}):(0,s.jsx)(e0,{value:null!=p?p:"",onChange:e=>{x(e)},stripePrices:c&&null!=(r=null==(a=c[0])?void 0:a.StripePrice)?r:[],isLoading:u}),u?(0,s.jsx)(eq,{}):(0,s.jsx)(eF,{selectedPriceId:null!=p?p:""})]})})]})})})};var e3=a(49645),e2=a(27583),e5=a(37583),e4=a(81491),e6=a(60357),e8=a(87146);let e7=e=>{let{dialog:t}=e,{isVisible:a,closeAnnouncementDialog:r,translateY:i}=(e=>{let{data:t,isPending:a}=(0,e8.en)(e.flagName),{mutate:s}=(0,e8.Jl)(),{paths:r=[]}=e,i=(0,ek.hM)(),l=(0,e6.DE)(),d=(0,c.usePathname)(),[o,u]=(0,n.useState)(0),[m,p]=(0,n.useState)(!0),x=(0,n.useMemo)(()=>!r.length||r.some(e=>(0,eQ.W)({pathname:d,targetPath:e,exact:!0})),[r,d]),f=(0,n.useMemo)(()=>!a&&!(null==t?void 0:t.status)&&m&&x,[a,t,m,x]);return(0,n.useEffect)(()=>{if(!l||!f)return;let e=()=>{let e=document.getElementById(e4.G.PROMPT_BOX),t=document.getElementById(e4.G.ANNOUNCEMENT_DIALOG);if(!t)return;let a=null==e?void 0:e.getBoundingClientRect(),s=t.getBoundingClientRect();if(a&&a.right>=s.left){let e=8*!i;u(-(a.height+e))}else u(0)};e();let t=()=>e();return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[i,f,l,d]),{isVisible:f,closeAnnouncementDialog:()=>{p(!1),e.flagName&&s({flag:e.flagName,status:!0})},translateY:o}})(t),{title:l,description:d,ctaText:o,ctaLink:u,asset:m,assetType:p,thumbnail:x}=t;return(0,s.jsx)(e3.N,{children:a&&(0,s.jsxs)(e2.P.div,{id:e4.G.ANNOUNCEMENT_DIALOG,initial:{opacity:0,scale:.95,y:0},animate:{opacity:1,scale:1,y:i},exit:{opacity:0,scale:.95,y:0},transition:{duration:.2,ease:"easeIn"},className:"border-border-primary rounded-4 bg-surface-primary-variant fixed right-4 bottom-8 z-50 flex w-64 flex-col gap-2 overflow-hidden border p-3 pb-4 shadow-sm",children:[(0,s.jsxs)("div",{className:"rounded-2.5 relative h-50 max-h-50 overflow-hidden",children:["image"===p?(0,s.jsx)(k.default,{src:m,alt:l,width:264,height:216,className:"object-cover",draggable:!1}):(0,s.jsx)("video",{src:m,poster:x,autoPlay:!0,muted:!0,loop:!0,className:"object-cover",draggable:!1}),(0,s.jsx)(O.$,{variant:"img-hover-cta",size:"icon-xs",shape:"pill",className:"absolute top-1.5 right-1.5",onClick:r,children:(0,s.jsx)(e_.w0d,{})})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"text-body-sm space-y-0.5",children:[(0,s.jsx)("h1",{className:"font-medium",children:l}),(0,s.jsx)("p",{className:"text-content-tertiary",children:d})]}),(0,s.jsx)(O.$,{size:"sm",className:"w-full",asChild:!0,children:(0,s.jsxs)(e5.i,{href:u,onClick:r,children:[(0,s.jsx)("span",{children:o}),(0,s.jsx)(e_.vKP,{})]})})]})]})})},e9=()=>{let{announcementDialogs:e}=(0,g.bO)();if(!e.enabled)return null;let{dialogs:t=[]}=e;return t.map(e=>(0,s.jsx)(e7,{dialog:e},e.flagName))};var te=a(90060),tt=a(98502),ta=a(61938);let ts={SIGN_IN:"sign-in"};var tn=a(82873),tr=a(8017),ti=a(4177),tl=a(63638),td=a(61523);let to=()=>{let{authModalCarouselAssets:e}=(0,g.bO)(),t=(0,td.gU)(),[a,r]=(0,n.useState)(0),i=e[a];return(0,n.useEffect)(()=>{if(!t.api)return;let e=()=>{var e,a;r(null!=(a=null==(e=t.api)?void 0:e.selectedScrollSnap())?a:0)};return t.api.on("select",e),e(),()=>{var a;null==(a=t.api)||a.off("select",e)}},[t.api]),(0,n.useEffect)(()=>{if(i&&"image"===i.type){let e=setTimeout(()=>{var e;null==(e=t.api)||e.scrollNext()},4e3);return()=>{clearTimeout(e)}}},[t.api,i]),(0,s.jsx)(td.Wk,{className:"ml-0 size-full",children:e.map((e,a)=>(0,s.jsxs)(td.A7,{className:"relative size-full pl-0",children:["image"===e.type?(0,s.jsx)(k.default,{src:e.src,alt:"Imagine Generation ".concat(a+1),className:"object-cover object-center",fill:!0,loading:"eager",priority:0===a}):(0,s.jsx)("video",{src:e.src,className:"size-full object-cover object-top",poster:e.poster,ref:e=>{let a=()=>{var e;null==(e=t.api)||e.scrollNext()};return null==e||e.addEventListener("ended",a),()=>{null==e||e.removeEventListener("ended",a)}},muted:!0,playsInline:!0,autoPlay:!0}),(0,s.jsx)("div",{className:"text-content-primary-inverse-disabled text-label-sm absolute right-5.5 bottom-5.5 font-medium",children:"Generated by ImagineArt"})]},a))})},tc=()=>(0,s.jsx)(td.FN,{plugins:[(0,tl.A)({})],opts:{loop:!0,duration:25},className:"desktop:w-1/2 rounded-4 laptop:block hidden size-full w-[40%] overflow-hidden shadow-[0_0_24px_0_rgba(var(--elevation-lg))]",children:(0,s.jsx)(to,{})}),tu=e=>{let{onClick:t}=e,a=(()=>{var e;let t=(0,c.useSearchParams)(),a=(0,c.usePathname)();return null!=(e=t.get(D.u.REDIRECT))?e:y.f3.has(a)?y.ze.HOME:a})();return(0,s.jsxs)(O.$,{variant:"secondary",className:"flex w-full max-w-[394px] gap-2",shape:"pill",size:"lg",onClick:()=>{null==t||t(),(0,tr.fH)({slug:ts.SIGN_IN,productName:eK.h.NEXT_PUBLIC_APP_NAME_FOR_AUTH,authBaseUrl:new URL(eK.h.NEXT_PUBLIC_VYRO_AUTH_URL),redirect:a,open:"discord"})},children:[(0,s.jsx)(e_.ujJ,{}),"Continue with Discord"]})};var tm=a(38035),tp=a.n(tm),tx=a(89829);let tf=()=>(0,s.jsx)(O.$,{variant:"secondary",type:"button",className:"w-full max-w-[394px]",shape:"pill",size:"lg",children:(0,s.jsx)(J.y,{className:"my-auto size-4"})}),tb=e=>{let{onClick:t}=e,a=(0,e6.DE)(),n=(0,tx._n)();return a?(0,s.jsx)(tp(),{appId:eK.h.NEXT_PUBLIC_FACEBOOK_APP_ID,render:e=>{let{onClick:a}=e;return n.isPending?(0,s.jsx)(tf,{}):(0,s.jsxs)(O.$,{variant:"secondary",className:"flex w-full max-w-[394px] gap-2",shape:"pill",size:"lg",disabled:n.isPending,onClick:()=>{null==t||t(),null==a||a()},children:[(0,s.jsx)(e_.T9F,{}),"Continue with Facebook"]})},onSuccess:e=>{let{accessToken:t}=e;return n.mutate({payload:{access_token:t}})}}):(0,s.jsx)(tf,{})},th=e=>{let{onClick:t}=e,a=(0,tx.hq)(),n=(0,tt.mg)({onSuccess:e=>{a.mutate({payload:{access_token:e.code}})},flow:"auth-code"});return(0,s.jsx)(O.$,{className:"flex w-full max-w-[394px] gap-2",shape:"pill",size:"lg",onClick:()=>{t&&t(),n()},children:a.isPending?(0,s.jsx)(J.y,{className:"my-auto size-4"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e_.fTL,{}),"Continue with Google"]})})};var tv=a(99161);let t_=()=>(0,s.jsx)("div",{className:"laptop:pb-6 flex max-w-[390px] items-center px-4 pb-4",children:(0,s.jsxs)("span",{className:"text-content-tertiary text-body-sm text-center",children:["By proceeding, you agree to our"," ",(0,s.jsx)(O.$,{variant:"link-ai",className:"underline",size:"link-sm",asChild:!0,children:(0,s.jsx)(e5.i,{href:y.x2.TERMS_AND_CONDITIONS,target:"_blank",children:"Terms of use"})})," ","Read our"," ",(0,s.jsx)(O.$,{variant:"link-ai",className:"underline",size:"link-sm",asChild:!0,children:(0,s.jsx)(z(),{href:tv.m.IMAGINE_PRIVACY_POLICY,target:"_blank",children:"Privacy Policy"})})]})}),ty={GOOGLE:"google",FACEBOOK:"facebook",DISCORD:"discord",EMAIL:"email"};var tg=a(79501),tE=a(70167);let tI=()=>{let e=(0,ta.mN)({resolver:(0,te.u)(ti.w)}),{fireDiscordEvent:t,fireFacebookEvent:a,fireGoogleEvent:r,fireEmailEvent:i}=(()=>{let{computeToolNameForAnalytics:e}=(0,tg.t)(),t=(0,n.useCallback)(t=>{localStorage.setItem(_.C.AUTH_TOOL,e()),localStorage.setItem(_.C.AUTH_SOURCE,t)},[e]),a=(0,n.useCallback)(()=>{t(ty.GOOGLE)},[t]),s=(0,n.useCallback)(()=>{t(ty.FACEBOOK)},[t]),r=(0,n.useCallback)(()=>{t(ty.DISCORD)},[t]),i=(0,n.useCallback)(()=>{t(ty.EMAIL)},[t]);return(0,n.useMemo)(()=>({fireGoogleEvent:a,fireFacebookEvent:s,fireDiscordEvent:r,fireEmailEvent:i}),[r,s,a,i])})(),l=(()=>{let e=(0,c.useSearchParams)(),t=(0,e6.DE)(),{user:a}=(0,x.u)();return t&&!a&&e.get(tE.Y.SHOW_AUTH)===u.J.TRUE})(),d=(0,ta.FH)({control:e.control,name:"email"}),o=!((null==d?void 0:d.length)>0),m=e.handleSubmit(e=>{let{email:t}=e;i(),(0,tr.fH)({slug:ts.SIGN_IN,productName:eK.h.NEXT_PUBLIC_APP_NAME_FOR_AUTH,authBaseUrl:new URL(eK.h.NEXT_PUBLIC_VYRO_AUTH_URL),email:t})});return(0,s.jsx)(b.lG,{open:l,children:(0,s.jsxs)(b.Cf,{className:"bg-surface-primary scrollbar-none !rounded-0 tablet:p-6 tablet:!rounded-4 z-[51] flex h-screen w-screen gap-6 overflow-scroll p-0",children:[(0,s.jsxs)(U.s,{children:[(0,s.jsx)(b.L3,{children:"Auth Modal"}),(0,s.jsx)(b.rr,{children:"Enter your credentials to continue"})]}),(0,s.jsxs)("div",{className:"bg-surface-primary-variant laptop:w-[60%] desktop:w-1/2 tablet:rounded-4 flex size-full flex-col items-center justify-between shadow-[0_0_24px_0_rgba(var(--elevation-lg))]",children:[(0,s.jsx)("div",{className:"invisible"}),(0,s.jsxs)("div",{className:"flex w-full flex-col items-center gap-y-10 px-6",children:[(0,s.jsx)(e_.u9d,{className:"size-[38px]"}),(0,s.jsxs)("div",{className:"flex w-full max-w-[520px] flex-col gap-12",children:[(0,s.jsx)("h4",{className:"text-content-primary text-heading-xl text-center font-semibold",children:"Sign in"}),(0,s.jsxs)("div",{className:"flex w-full flex-col items-center gap-6",children:[(0,s.jsxs)("div",{className:"flex w-full flex-col items-center gap-4",children:[(0,s.jsx)(tt.G_,{clientId:eK.h.NEXT_PUBLIC_GOOGLE_CLIENT_ID,children:(0,s.jsx)(th,{onClick:r})}),(0,s.jsx)(tb,{onClick:a}),(0,s.jsx)(tu,{onClick:t})]}),(0,s.jsxs)("div",{className:"mx-auto flex w-[296px] items-center justify-center gap-4",children:[(0,s.jsx)(Y.w,{className:"shrink"}),(0,s.jsx)("span",{className:"text-body-sm text-content-secondary",children:"or"}),(0,s.jsx)(Y.w,{className:"shrink"})]}),(0,s.jsxs)("form",{className:"flex w-full flex-col items-center gap-6",onSubmit:m,children:[(0,s.jsxs)("div",{className:"flex w-full max-w-[394px] flex-col items-start gap-y-1.5",children:[(0,s.jsx)("label",{htmlFor:"email",className:"text-label-md text-content-secondary block",children:"Email Address"}),(0,s.jsx)(tn.p,{id:"email",start:(0,s.jsx)(e_.aZ_,{}),type:"email",size:"xl",wrapperClassName:"max-w-[394px] h-12",variant:"secondary-variant",className:"h-12 w-full max-w-[394px]",placeholder:"Enter your email",...e.register("email")})]}),(0,s.jsx)(O.$,{variant:"secondary",type:"submit",shape:"pill",size:"lg",className:"w-full max-w-[394px]",disabled:o,children:"Continue"})]})]})]})]}),(0,s.jsx)(t_,{})]}),(0,s.jsx)(tc,{})]})})};var tN=a(25281),tj=a(93343),tA=a(44089),tk=a(25826),tS=a(53881),tO=a(5275),t$=a(98221),tT=a(98720),tP=a(16258),tw=a(58910),tC=a(90543);let tR={EMAIL:"email",USER_ID:"userId",STRIPE_CUSTOMER_ID:"stripeCustomerId"},tD=tk.Ay$.object({item:tk.Ay$.string().min(1,{message:"This field is required"}),type:tk.Ay$.enum(tR)}),tM=()=>{let[e,t]=(0,n.useState)(!1),a=(0,ta.mN)({resolver:(0,te.u)(tD),defaultValues:{item:"",type:tR.EMAIL}}),{mutate:r}=(0,tP.n)({mutationFn:async e=>(await tw.y.impersonateUser(e)).data}),{serviceErrorHandler:i}=(0,tC.z)(),d=(0,ta.FH)({control:a.control,name:"type"});return(0,s.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:a.handleSubmit(async e=>{let a;t(!0);let s=(0,l.getCookie)(tS.H.BEARER_TOKEN,{domain:eK.h.NEXT_PUBLIC_APP_DOMAIN});if(!s){q.oR.error("No bearer token found"),t(!1);return}if(e.type===tR.EMAIL)a={bearerToken:s,email:e.item};else if(e.type===tR.USER_ID)a={bearerToken:s,userId:e.item};else if(e.type===tR.STRIPE_CUSTOMER_ID)a={bearerToken:s,stripeCustomerId:e.item};else throw Error("Invalid type");r(a,{onSuccess:e=>{let{token:t}=e,a=new Date(Date.now()+18e5);(0,l.setCookie)(tS.H.IMPERSONATE_USER_TOKEN,t,{expires:a,domain:eK.h.NEXT_PUBLIC_APP_DOMAIN}),tN.i3.start(),q.oR.success("Impersonation started"),window.location.reload()},onError:e=>{if(e instanceof tA.pe){var a;q.oR.error(null==(a=e.response)?void 0:a.data.message)}else i(e);t(!1)}})}),children:[(0,s.jsxs)(tO.lV,{...a,children:[(0,s.jsx)(tO.zB,{control:a.control,name:"type",render:e=>{let{field:t}=e;return(0,s.jsxs)(tO.eI,{className:"flex flex-col gap-1.5",children:[(0,s.jsx)(tO.lR,{children:"Select type of login"}),(0,s.jsx)(tO.MJ,{children:(0,s.jsxs)(t$.l6,{...t,onValueChange:t.onChange,children:[(0,s.jsxs)(t$.bq,{size:"lg",children:[(0,s.jsx)(t$.yv,{placeholder:"Select type of login"}),(0,s.jsx)(t$.I6,{})]}),(0,s.jsxs)(t$.gC,{children:[(0,s.jsx)(t$.eb,{size:"lg",value:tR.EMAIL,children:"Email"}),(0,s.jsx)(t$.eb,{size:"lg",value:tR.USER_ID,children:"User ID"}),(0,s.jsx)(t$.eb,{size:"lg",value:tR.STRIPE_CUSTOMER_ID,children:"Stripe Customer ID"})]})]})}),(0,s.jsx)(tO.C5,{})]})}}),(0,s.jsx)(tO.zB,{control:a.control,name:"item",render:e=>{let{field:t}=e;return(0,s.jsxs)(tO.eI,{className:"flex flex-col gap-1.5",children:[(0,s.jsxs)(tO.lR,{children:["Enter ",d]}),(0,s.jsx)(tO.MJ,{children:(0,s.jsx)(tn.p,{placeholder:"Enter ".concat(d),size:"lg",...t})}),(0,s.jsx)(tO.C5,{})]})}})]}),(0,s.jsx)(O.$,{type:"submit",size:"lg",disabled:e,children:"Impersonate"})]})},tL=()=>{let e=(()=>{let{user:e}=(0,x.u)();return!!(null==e?void 0:e.isAdmin)})();return(()=>{let{user:e}=(0,x.u)();return!!(null==e?void 0:e.isImpersonated)})()?(0,s.jsx)(tj.Z,{children:(0,s.jsxs)(eB.m_,{children:[(0,s.jsx)(eB.k$,{asChild:!0,children:(0,s.jsx)(O.$,{className:"fixed inset-y-0 right-0 z-50 my-auto h-25 rounded-r-none",size:"icon-xs",variant:"error",onClick:()=>{(0,l.deleteCookie)(tS.H.IMPERSONATE_USER_TOKEN,{domain:eK.h.NEXT_PUBLIC_APP_DOMAIN}),tN.i3.start(),q.oR.success("Impersonation ended"),window.location.reload()},children:(0,s.jsx)(e_.w0d,{className:"stroke-2"})})}),(0,s.jsx)(eB.ZI,{side:"left",children:"End Impersonation"})]})}):e?(0,s.jsxs)(tT.cj,{children:[(0,s.jsx)(tj.Z,{children:(0,s.jsxs)(eB.m_,{children:[(0,s.jsx)(eB.k$,{asChild:!0,children:(0,s.jsx)(tT.CG,{asChild:!0,children:(0,s.jsx)(O.$,{className:"fixed inset-y-0 right-0 z-50 my-auto h-25 rounded-r-none",size:"icon-xs",variant:"primary",children:(0,s.jsx)(e_.m_v,{})})})}),(0,s.jsx)(eB.ZI,{side:"left",children:"Impersonate User"})]})}),(0,s.jsxs)(tT.h,{className:"flex w-[calc(min(--spacing(100),100vw))] flex-col gap-8 p-4 pt-12",children:[(0,s.jsx)(tT.Ml,{className:"absolute top-2 left-2"}),(0,s.jsxs)(tT.Fm,{className:"flex flex-col items-start gap-1",children:[(0,s.jsx)(tT.qp,{className:"text-heading-sm",children:"Impersonate User"}),(0,s.jsx)(tT.Qs,{children:"Impersonate a user to see their account."})]}),(0,s.jsx)(tM,{})]})]}):null};var tU=a(33400);let tG=()=>(0,j.s)(N.D.ONBOARDING_MODAL),tz=()=>(0,j.s)(N.D.TRAINING_MODAL),tB={ONBOARDING_SURVEY_MODAL:"onboarding-survey-modal",USER_TRAINING_MODAL:"user-training-modal"},tF=["basic","advanced"],tq={PLAYED_SECTIONS_MAP:"user-training-modal-played-sections-map",HAS_SEEN_USER_TRAINING_MODAL_ONCE:"has-seen-user-training-modal-once"},tV=()=>((()=>{let{openDialog:e}=tG(),{openDialog:t}=tz(),{featureFlags:a}=(0,g.bO)(),s=!0===a[tB.USER_TRAINING_MODAL],{user:r}=(0,x.u)(),i=(0,e6.DE)(),{data:l,isLoading:d}=(0,e8.en)(tU.sF.HAS_SEEN_ONBOARDING_PERSONA_MODAL),{data:o,isLoading:c}=(0,e8.en)(tU.sF.HAS_SEEN_USER_TRAINING_MODAL);return(0,n.useEffect)(()=>{let a=new URLSearchParams(window.location.search).get(tS._.IS_SIGNUP)===u.J.TRUE;d||c||!i||(r&&!(null==l?void 0:l.status)&&a?e():s&&r&&!(null==o?void 0:o.status)&&"true"!==localStorage.getItem(tq.HAS_SEEN_USER_TRAINING_MODAL_ONCE)&&(t(),localStorage.setItem(tq.HAS_SEEN_USER_TRAINING_MODAL_ONCE,"true")))},[null==l?void 0:l.status,null==o?void 0:o.status,d,c,i,e,t,s,r])})(),null);var tK=a(11360),tQ=a(79649);let tH=(0,el.F)("rounded-full w-full flex items-center font-medium ring-border-secondary ring-[1.5px] text-content-primary hover:bg-fill-secondary data-[state=selected]:ring-border-inverse data-[state=selected]:bg-fill-secondary disabled:ring-border-secondary-disabled disabled:text-content-primary-disabled transition-all duration-300 cursor-pointer disabled:cursor-not-allowed disabled:bg-transparent",{variants:{size:{xs:"h-6 px-2 gap-1 text-label-xs data-[chip-start=true]:pl-1.5 data-[chip-end=true]:pr-1.5",sm:"h-7 px-2.5 gap-1 text-label-sm data-[chip-start=true]:pl-2 data-[chip-end=true]:pr-[7px]",md:"h-8 px-3 gap-1.5 text-label-md data-[chip-start=true]:pl-3 data-[chip-end=true]:pr-2",lg:"h-10 px-4 gap-2 text-label-lg data-[chip-start=true]:pl-4 data-[chip-end=true]:pr-[11px]",none:""}},defaultVariants:{size:"md"}}),tJ=(0,el.F)("",{variants:{size:{xs:"size-3",sm:"size-3.5 data-[slot=chip-end]:pl-[3px]",md:"size-4 data-[slot=chip-end]:pl-[3px]",lg:"size-4.5 data-[slot=chip-end]:pl-[5px]",none:"size-3.5"}}}),tY=e=>{let{onClick:t,className:a,isActive:n,disabled:r,size:i,children:l,start:d,end:o}=e;return(0,s.jsxs)("button",{type:"button",className:(0,ei.cn)(tH({size:i}),a),"data-state":n?"selected":"idle",onClick:t,disabled:r,"data-chip-start":!!d,"data-chip-end":!!o,children:[d&&(0,s.jsx)(tQ.DX,{"data-slot":"chip-start",className:(0,ei.cn)(tJ({size:i})),children:d}),l,o&&(0,s.jsx)(tQ.DX,{"data-slot":"chip-end",className:(0,ei.cn)(tJ({size:i})),children:o})]})};var tW=a(71387),tX=a(96450),tZ=a(39160);let t0={0:tW.E.ONBOARDING_USER_PERSONA_ANSWER,1:tW.E.ONBOARDING_USER_INITIAL_GOAL,2:tW.E.ONBOARDING_USER_CADENCE,3:tW.E.ONBOARDING_USER_MEDIA_TYPE,4:tW.E.ONBOARDING_USER_MEMBERS},t1=e=>{let{chips:t,multipleChips:a}=e,[r,i]=(0,n.useState)([]),{setShouldShowNextButton:l,setOnNextClick:d,currentStepData:o,currentStep:c}=ad(),u=(0,tX.Q)(c),m=(0,ek.hM)(),{data:p}=(0,tZ.J)(),{mutate:x}=(0,tZ.s)();return(0,n.useEffect)(()=>{d(()=>{var e;let t=r.join(", "),a=t0[u.current];null!=a&&sessionStorage.setItem(a,t),x([...(null==p?void 0:p.persona)||[],{question:null!=(e=null==o?void 0:o.heading)?e:"",answer:t}]),i([])})},[null==o?void 0:o.heading,u,r,d,x,null==p?void 0:p.persona]),(0,n.useEffect)(()=>{r.length>0?l(!0):l(!1)},[r,l]),(0,s.jsx)("div",{className:"flex w-full flex-wrap items-center gap-4 py-4",children:t.map(e=>(0,s.jsx)(tY,{size:m?"md":"lg",className:"w-fit whitespace-nowrap",isActive:r.includes(e),onClick:()=>(e=>{a?r.includes(e)?i(r.filter(t=>t!==e)):i([...r,e]):r.includes(e)?i([]):i([e])})(e),children:(0,s.jsx)("span",{className:"text-label-lg font-medium",children:e})},e))})};var t3=a(1532),t2=a(38427);let t5=e=>{let{isBestValuePlan:t}=e;return t?(0,s.jsx)("div",{className:"text-body-sm rounded-b-1.5 absolute top-0 right-5 flex h-7 w-27.5 items-center justify-center bg-[#FFE1C0] px-2 py-1 font-semibold whitespace-nowrap text-[#A25400]",children:"Most Popular"}):null};var t4=a(53326),t6=a(30484);let t8=e=>{let{isBestValuePlan:t,label:a,labelWithoutFail:n,searchParams:r,subscriptionPlan:i,btnProps:l}=e,{handleClick:d,isPendingPlanChange:o}=(e=>{let{searchParams:t,labelWithoutFail:a,subscriptionPlan:s}=e,{logAddToCart:n}=(0,t6.c)(),[r,i]=(0,R.ab)({[D.u.PRICE_ID]:R.tU,[D.u.SUBSCRIPTION_ACTION]:R.tU}),{mutate:l}=(0,E.Fe)({product:"imagine",successUrl:(0,t4.G)(y.ze.SUBSCRIPTION_SUCCESS,window.location.origin),cancelUrl:(0,t4.G)(y.ze.HOME,window.location.origin)}),d=e=>{l({priceId:e},{onSuccess:eH.M})},{isStripeFailed:o,isInvoicePastDue:c,isPendingPlanChange:u}=(0,eO.c)(),{mutate:m}=(0,E.V_)({product:"imagine"}),p=()=>{i({[D.u.PRICE_ID]:t[D.u.PRICE_ID],[D.u.SUBSCRIPTION_ACTION]:t[D.u.SUBSCRIPTION_ACTION]})};return{handleClick:async()=>{let e=s.StripePrice[0];if(!e)return void q.oR.error("There was an error while going to stripe billing");try{switch(a){case"Get Started":n(e),d(e.stripePriceId);break;case"Current Plan":(o||c)&&m(void 0,{onSuccess:eH.M,onError:eH.j});break;case"Downgrade":case"Upgrade":if(o)return void d(e.stripePriceId);u||p();break;case"Change Term":u||p()}}catch(e){q.oR.error(e instanceof Error?e.message:"There was an error while redirecting to stripe")}},isPendingPlanChange:u}})({searchParams:r,labelWithoutFail:n,subscriptionPlan:i}),{variant:c,disabled:u,className:m}=null!=l?l:{};return(0,s.jsx)("div",{className:"mt-auto flex justify-center px-4",children:(0,s.jsx)(O.$,{onClick:d,className:(0,ei.cn)("w-full max-w-[250px]",m),disabled:null!=u?u:o||"Current Plan"===a,variant:(null!=c?c:t)?"ai":"secondary",...l,children:a})})},t7=e=>{var t;let{name:a,totalPrice:n,monthlyPrice:r,billingInterval:i,tokens:l}=e,{planNameMapping:d}=(0,g.bO)();return(0,s.jsxs)("div",{className:"flex flex-col gap-4 px-6",children:[(0,s.jsx)("div",{className:"flex flex-col gap-1",children:(0,s.jsx)("p",{className:"text-heading-xs font-semibold",children:null!=(t=d[a])?t:a})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"text-heading-xl font-medium",children:r}),(0,s.jsx)("div",{className:(0,ei.cn)("text-body-xs text-content-secondary"),children:(0,s.jsx)("p",{children:"per month"})})]}),(0,s.jsxs)("p",{className:"text-label-sm text-content-tertiary",children:["billed ",i," as ",n]})]}),(0,s.jsxs)("div",{className:"text-label-md text-content-secondary font-semibold",children:[(0,X.Z)(l)," ",en.q.PLURAL,"/",(0,h.sr)(i),"*"]})]})},t9=e=>{let{offerings:t,offeringHeading:a,planName:n}=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-6 px-4",children:[(0,s.jsx)("p",{className:"text-body-sm font-semibold",children:a}),(0,s.jsx)("div",{className:"flex flex-col gap-2",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 px-2",children:[(0,s.jsx)(e_.PzS,{className:"size-3.5 stroke-[2]"}),(0,s.jsx)("p",{className:"text-body-sm",children:e.heading}),e.tooltip&&(0,s.jsxs)(eB.m_,{children:[(0,s.jsx)(eB.k$,{className:"ml-auto",children:(0,s.jsx)(e_.mo0,{className:"size-4"})}),(0,s.jsx)(eB.ZI,{className:"max-w-[250px]",align:"center",children:(0,s.jsx)("p",{children:e.tooltip})})]})]},"".concat(n,"-").concat(t)))})]})},ae={Basic:"Everything in the Free plan, plus:",Standard:"Everything in the Basic plan, plus:",Ultimate:"Everything in the Standard plan, plus:",Premium:"Everything in the Ultimate plan, plus:",Creator:"Everything in the Premium plan, plus:",Custom:"Everything in the Creator plan, plus:",Enterprise:"Everything in the Custom plan, plus:"},at=e=>{var t,a,r,i,l,d,o,c;let{subscriptionPlan:u}=e,{label:m,searchParams:p,isBestValuePlan:f,stripePrice:b,locale:v,labelWithoutFail:_,offerings:y}=(e=>{let{locale:t}=(0,x.u)(),a=e.StripePrice[0],{subscriptionPlansInfo:s,bestValuePlanName:r}=(0,g.bO)(),i=(0,n.useMemo)(()=>{var t,n;return a?null==(n=s[a.billingInterval])||null==(t=n[e.name])?void 0:t.offerings.slice(0,4):[]},[s,a,e.name]),l=e.name===r,{isPendingPlanChange:d,stripeSubscription:o,subscribedPriceItem:c,isLegacyUser:u,isInvoiceIncomplete:m,isStripeFailed:p,isInvoicePastDue:f}=(0,eO.c)(),b=null==o?void 0:o.newPriceId,v=d&&b===e.id,{searchParams:_,label:y}=(0,h.Ei)({currentPriceItem:e,subscribedPriceItem:c,isPendingChange:v,isLegacyUser:u,isInvoiceIncomplete:m});return{label:(p||f)&&"Current Plan"===y?"Pay Invoice":y,searchParams:_,isBestValuePlan:l,stripePrice:a,labelWithoutFail:y,locale:t,offerings:i}})(u);return(0,s.jsxs)("div",{className:(0,ei.cn)("bg-background rounded-3 text-content-primary border-border-secondary relative flex min-h-[487px] w-full max-w-[300px] flex-col gap-4 overflow-visible border py-6",{"border-fill-brand":f}),children:[(0,s.jsx)(t5,{isBestValuePlan:f}),(0,s.jsx)(t7,{name:u.name,monthlyPrice:(0,X.v)({value:(0,h._K)({price:null!=(t=null==b?void 0:b.price)?t:0,billingInterval:null!=(a=null==b?void 0:b.billingInterval)?a:"monthly"}),currency:null!=(r=null==b?void 0:b.currency)?r:"USD",locale:v}),totalPrice:(0,X.v)({value:null!=(i=null==b?void 0:b.price)?i:0,currency:null!=(l=null==b?void 0:b.currency)?l:"USD",locale:v}),billingInterval:null!=(d=null==b?void 0:b.billingInterval)?d:"monthly",tokens:null!=(o=null==b?void 0:b.tokens)?o:0,isBestValuePlan:f}),(0,s.jsx)(Y.w,{className:"bg-border-secondary w-full"}),(0,s.jsx)(t9,{offerings:null!=y?y:[],offeringHeading:null!=(c=ae[u.name])?c:"",planName:u.name}),(0,s.jsx)(t8,{isBestValuePlan:f,label:m,searchParams:p,labelWithoutFail:_,subscriptionPlan:u})]})},aa=e=>{var t;let{subscriptionItems:a,activeTab:n}=e,r=(0,t3.J)(a,n);return(0,s.jsx)("div",{className:"mx-auto w-full shrink-0 overflow-x-auto pt-8",children:(0,s.jsxs)("div",{className:"flex w-full flex-wrap items-center justify-center gap-4",children:[null==(t=a[n])?void 0:t.map(e=>{var t;return(0,s.jsx)(at,{subscriptionPlan:e},null==(t=e.StripePrice[0])?void 0:t.id)}),(0,s.jsx)(t2.a,{resolvedFontSize:r})]})})},as={weekly:null,monthly:null,quarterly:15,yearly:30,one_time:null},an=e=>{let{subscriptionItems:t,defaultInterval:a="monthly",hideTabs:r=!1}=e,[i,l]=(0,n.useState)(a);return(0,s.jsxs)("div",{className:"flex w-full flex-col",children:[!r&&(0,s.jsx)(L.Tabs,{value:i,defaultValue:a,onValueChange:e=>l(e),className:"flex items-center justify-center",children:(0,s.jsx)(L.j7,{className:"bg-surface-secondary w-fit gap-1 rounded-full p-1",children:Object.keys(t).map(e=>(0,s.jsx)(L.GI,{layoutId:"subscription-tab",value:e,variant:"primary",size:"sm",className:"data-[state=active]:text-content-primary data-[state=active]:bg-transparent",activeProps:{className:"group-data-[state=active]:bg-surface-primary-variant"},isActive:i===e,outline:!1,children:(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("div",{className:"capitalize",children:e}),as[e]&&(0,s.jsxs)("div",{className:(0,ei.cn)("bg-surface-primary text-content-brand flex h-4.5 w-15 items-center justify-center rounded-full px-2 text-[10px] leading-2 font-bold transition-colors duration-300",{"text-content-primary":i!==e}),children:[as[e],"% off"]})]})},e))})}),(0,s.jsx)(aa,{subscriptionItems:t,activeTab:i})]})},ar={heading:"Select a plan",childComponent:(0,s.jsx)(()=>{let{data:e}=(0,E.Yu)(),{setShouldShowNextButton:t}=ad();return((0,n.useEffect)(()=>{t(!1)},[t]),e)?(0,s.jsx)(an,{subscriptionItems:e}):null},{}),shouldShowSkipButton:!0},ai=(0,n.createContext)(null),al=e=>{let{children:t,setIsOpen:a}=e,{onboardingSurveyModal:{questionnaireSteps:r}}=(0,g.bO)(),[i,l]=(0,n.useState)(0),[d,o]=(0,n.useState)(!1),c=(0,n.useRef)(()=>{}),u=(0,n.useMemo)(()=>{let e=r.map(e=>({heading:e.heading,description:e.description,childComponent:(0,s.jsx)(t1,{chips:e.options,multipleChips:e.multiple}),shouldShowSkipButton:e.shouldShowSkipButton}));return e.push(ar),e},[r]),m=i===u.length-1,p=u[i],x=()=>{m&&a(!1)};return(0,s.jsx)(ai.Provider,{value:{currentStep:i,setCurrentStep:l,shouldShowNextButton:d,setOnNextClick:e=>{c.current=e},setShouldShowNextButton:o,shouldShowBackButton:i>0,isLastStep:m,nextHandler:()=>{c.current(),x(),l(i+1)},backHandler:()=>{l(i-1)},skipHandler:()=>{x(),l(i+1)},totalSteps:u.length,currentStepData:p},children:t})},ad=()=>{let e=(0,n.useContext)(ai);if(!e)throw Error("useOnboardingModal must be used within an OnboardingModalProvider");return e},ao=()=>{let{onboardingSurveyModal:{assets:e}}=(0,g.bO)(),t=(0,td.gU)(),[a,r]=(0,n.useState)(0),i=e[a];return(0,n.useEffect)(()=>{if(!t.api)return;let e=()=>{var e,a;r(null!=(a=null==(e=t.api)?void 0:e.selectedScrollSnap())?a:0)};return t.api.on("select",e),e(),()=>{var a;null==(a=t.api)||a.off("select",e)}},[t.api]),(0,n.useEffect)(()=>{if(i&&"image"===i.type){let e=setTimeout(()=>{var e;null==(e=t.api)||e.scrollNext()},4e3);return()=>{clearTimeout(e)}}},[t.api,i]),(0,s.jsx)(td.Wk,{className:"ml-0 size-full",children:e.map((e,a)=>(0,s.jsxs)(td.A7,{className:"relative size-full pl-0",children:["image"===e.type?(0,s.jsx)(k.default,{src:e.src,alt:"Imagine Generation ".concat(a+1),className:"object-cover object-center",fill:!0,loading:"eager",priority:0===a}):(0,s.jsx)("video",{src:e.src,className:"size-full object-cover object-top",poster:e.poster,ref:e=>{let a=()=>{var e;null==(e=t.api)||e.scrollNext()};return null==e||e.addEventListener("ended",a),()=>{null==e||e.removeEventListener("ended",a)}},muted:!0,playsInline:!0,autoPlay:!0}),(0,s.jsx)("div",{className:"text-content-primary-inverse-disabled text-label-sm absolute right-5.5 bottom-5.5 font-medium",children:"Generated by ImagineArt"})]},a))})},ac=()=>(0,s.jsx)(td.FN,{plugins:[(0,tl.A)({})],opts:{loop:!0,duration:25},className:"rounded-4 bg-background tablet:block relative hidden size-full overflow-hidden shadow-[0_0_24px_0_rgba(var(--elevation-lg))]",children:(0,s.jsx)(ao,{})}),au=()=>{let{currentStep:e,shouldShowNextButton:t,nextHandler:a,shouldShowBackButton:n,backHandler:r,skipHandler:i,isLastStep:l,currentStepData:d,totalSteps:o}=ad();if(!d)return null;let{heading:c,description:u,shouldShowSkipButton:m,childComponent:p}=d;return(0,s.jsxs)("div",{className:"flex size-full items-center gap-6 overflow-y-auto",children:[(0,s.jsxs)("div",{className:(0,ei.cn)("bg-surface-primary-variant rounded-4 laptop:gap-14 flex size-full shrink-0 flex-col gap-4 overflow-y-auto shadow-[0_0_24px_0_rgba(var(--elevation-lg))]",{"tablet:w-[60%] laptop:w-[55%]":!l}),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between py-4 pr-6 pl-3.5",children:[n&&(0,s.jsxs)(O.$,{variant:"ghost",size:"sm",onClick:r,children:[(0,s.jsx)(e_.YJP,{className:"size-4"})," Back"]}),m&&(0,s.jsx)(O.$,{variant:"link-secondary",size:"sm",className:"ml-auto",onClick:i,children:"Skip"})]}),(0,s.jsxs)("div",{className:"flex w-full flex-col gap-4 px-6",children:[(0,s.jsx)(tK.k,{className:"tablet:max-w-[316px] max-w-[218px]",value:e/o*100}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{className:"text-heading-lg desktop-sm:text-heading-xl text-content-primary font-semibold",children:c}),u&&(0,s.jsx)("p",{className:"text-body-sm text-content-tertiary",children:u})]})]}),(0,s.jsx)("div",{className:"flex w-full px-6",children:p}),(0,s.jsx)("div",{className:(0,ei.cn)("tablet:p-5 mt-auto w-full px-5 pb-5 opacity-0 transition-opacity duration-500",{"opacity-100":t,hidden:l}),children:(0,s.jsx)(O.$,{className:"w-full",variant:"ai",size:"lg",onClick:a,disabled:!t,children:"Next"})})]}),!l&&(0,s.jsx)(ac,{})]})};var am=a(71930),ap=a(22282);let ax=()=>{let{isOpen:e,setDialogOpen:t}=tG(),{openDialog:a}=tz(),{mutate:n}=(0,e8.Jl)(),{data:r}=(0,e8.en)(tU.sF.HAS_SEEN_USER_TRAINING_MODAL),{featureFlags:i}=(0,g.bO)(),{fireOnboardingSurveyEvent:l}=(()=>{let{aggregator:e}=(0,eU.p)(),{computeUserAnalyticsInfo:t}=(0,eL.U)();return{fireOnboardingSurveyEvent:()=>{var a,s,n,r,i;let{email:l,id:d}=t();e.log(eD.M.onboardingSurvey.withProperties({app_name:am.C.IMAGINE_ONE,studio_name:am.C.IMAGINE_ONE,email:l,distinct_id:d,user_persona:null!=(a=sessionStorage.getItem(tW.E.ONBOARDING_USER_PERSONA_ANSWER))?a:ap.Q,initial_goal:null!=(s=sessionStorage.getItem(tW.E.ONBOARDING_USER_INITIAL_GOAL))?s:ap.Q,cadence:null!=(n=sessionStorage.getItem(tW.E.ONBOARDING_USER_CADENCE))?n:ap.Q,media_type:null!=(r=sessionStorage.getItem(tW.E.ONBOARDING_USER_MEDIA_TYPE))?r:ap.Q,members:null!=(i=sessionStorage.getItem(tW.E.ONBOARDING_USER_MEMBERS))?i:ap.Q}))}}})(),d=e=>{e||((null==r?void 0:r.status)||a(),l(),n({flag:tU.sF.HAS_SEEN_ONBOARDING_PERSONA_MODAL,status:!0})),t(e)};return!1===i[tB.ONBOARDING_SURVEY_MODAL]?null:(0,s.jsx)(b.lG,{open:e,onOpenChange:d,children:(0,s.jsx)(b.Cf,{onOpenAutoFocus:e=>{e.preventDefault()},className:"bg-background-alternate desktop-l:max-w-[1654px] desktop:max-w-[1370px] desktop:max-h-[calc(min(908px,100vh-48px))] desktop-l:max-h-[calc(min(1096px,100vh-100px))] rounded-4 tablet:max-h-[calc(100vh-42px)] tablet:max-w-[calc(100vw-42px)] desktop-sm:max-w-[1232x] desktop-sm:max-h-[calc(min(817px,100vh-48px))] laptop:max-w-[976px] laptop:max-h-[calc(min(672px,100vh-48px))] size-full max-h-[100vh] max-w-[100vh] overflow-hidden p-6",children:(0,s.jsxs)(al,{setIsOpen:d,children:[(0,s.jsxs)(U.s,{children:[(0,s.jsx)(b.L3,{children:"Onboarding"}),(0,s.jsx)(b.rr,{children:"Welcome to the Onboarding Modal"})]}),(0,s.jsx)(au,{})]})})})};var af=a(48750),ab=a(80597);let ah=()=>{let[e,t]=(0,R.ZA)(D.u.SUBSCRIPTION_MODAL,R.cr.withDefault(!1));return(0,s.jsx)(b.lG,{open:e,modal:!0,onOpenChange:e=>{t(e)},children:(0,s.jsxs)(b.Cf,{overlayProps:{className:"hidden"},onOpenAutoFocus:e=>{e.preventDefault()},className:"bg-background inset-x-0 top-15 flex h-[calc(100vh-3.75rem)] translate-none flex-col gap-0 rounded-none border-0 border-none p-0 shadow-none ring-0 outline drop-shadow-none",children:[(0,s.jsxs)(b.c7,{className:"justify-end border-0",children:[(0,s.jsxs)(U.s,{children:[(0,s.jsx)(b.L3,{children:"Subscription"}),(0,s.jsx)(b.rr,{children:"Manage your subscription and billing details."})]}),(0,s.jsx)(b.De,{})]}),(0,s.jsx)(af.F,{type:"hover",className:"scrollbar-none w-full overflow-y-auto",children:(0,s.jsx)(ab.Subscription,{})})]})})};var av=a(51912),a_=a(17685);let ay=JSON.parse('{"v":"4.8.0","meta":{"g":"LottieFiles AE 3.5.3","a":"","k":"","d":"","tc":""},"fr":60,"ip":0,"op":90,"w":512,"h":512,"nm":"06 Party 1","assets":[{"id":"comp_0","layers":[{"ind":1,"ty":4,"nm":"Shape Layer 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[256,256,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[596,558],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":29.6,"ix":5},"lc":1,"lj":1,"ml":4,"nm":"Stroke 1"},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"nm":"Fill 1"},{"ty":"tr","p":{"a":0,"k":[-13,-3],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":0,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","cix":2,"ix":1}],"ip":0,"op":90,"st":0},{"ind":2,"ty":4,"nm":"Elastic Control Layer","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[256,256,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ef":[{"ty":5,"nm":"Elastic Controller","np":5,"ix":1,"en":1,"ef":[{"ty":0,"nm":"Amplitude","ix":1,"v":{"a":0,"k":20,"ix":1}},{"ty":0,"nm":"Frequency","ix":2,"v":{"a":0,"k":60,"ix":2}},{"ty":0,"nm":"Decay","ix":3,"v":{"a":0,"k":90,"ix":3}}]}],"shapes":[],"ip":0,"op":90,"st":0},{"ind":3,"ty":4,"nm":"Layer 13","sr":1,"ks":{"o":{"a":0,"k":40,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":26,"s":[-72.8]},{"t":35,"s":[0]}],"ix":10,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":23,"s":[387.937,358.808,0],"to":[-59.661,-45.476,0],"ti":[-8.339,47.476,0]},{"t":33,"s":[287.971,139.95,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-42.6,-63.4]],"o":[[0,0],[0,0]],"v":[[5.929,-58.05],[10.029,58.05]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":23,"op":90,"st":-2},{"ind":4,"ty":4,"nm":"Layer 12","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":26,"s":[41.7]},{"t":37,"s":[0]}],"ix":10,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":23,"s":[417.937,375.308,0],"to":[-43.348,-50.464,0],"ti":[62.348,-5.536,0]},{"t":34,"s":[186.85,246.526,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[101.8,-29]],"o":[[0,0],[0,0]],"v":[[84.15,23.374],[-84.15,-16.226]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":23,"op":90,"st":-2},{"ind":5,"ty":4,"nm":"Layer 11","sr":1,"ks":{"o":{"a":0,"k":40,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":23,"s":[319.937,301.308,0],"to":[-22.989,-28.135,0],"ti":[22.989,28.135,0]},{"t":30,"s":[182,132.5,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-13.4],[13.4,0],[0,13.4],[-13.4,0]],"o":[[0,13.4],[-13.4,0],[0,-13.4],[13.4,0]],"v":[[24.3,0],[0,24.3],[-24.3,0],[0,-24.3]],"c":true},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":23,"op":90,"st":-2},{"ind":6,"ty":4,"nm":"Layer 10","sr":1,"ks":{"o":{"a":0,"k":40,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":26,"s":[86]},{"t":37,"s":[0]}],"ix":10,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":23,"s":[383.937,341.308,0],"to":[-59.989,-83.089,0],"ti":[-5.011,-122.911,0]},{"t":34,"s":[107,314.771,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[32.7,-35.3]],"o":[[0,0],[0,0]],"v":[[35.3,-16.171],[-35.3,16.229]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":23,"op":90,"st":-2},{"ind":7,"ty":4,"nm":"Layer 9","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":23,"s":[369.937,304.308,0],"to":[-53.231,-116.035,0],"ti":[-3.936,-160.632,0]},{"t":30,"s":[131.55,361.1,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[-124.45,105.1,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-124.7,105.1],[-124.2,105.1]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":23,"op":90,"st":-2},{"ind":8,"ty":4,"nm":"Layer 8","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":23,"s":[399.937,393.308,0],"to":[-53.948,-40.385,0],"ti":[53.948,40.385,0]},{"t":37,"s":[76.25,151,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[-179.75,-105,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-180,-105],[-179.5,-105]],"c":false},"ix":2},"nm":"Path 2"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":23,"op":90,"st":-2},{"ind":9,"ty":4,"nm":"Layer 6","sr":1,"ks":{"o":{"a":0,"k":40,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":5,"s":[0]},{"t":15,"s":[-105]}],"ix":10,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":5,"s":[287.971,139.95,0],"to":[21.661,45.56,0],"ti":[-21.661,-45.56,0]},{"t":15,"s":[417.937,413.308,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-42.6,-63.4]],"o":[[0,0],[0,0]],"v":[[5.929,-58.05],[10.029,58.05]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":0,"op":17,"st":0},{"ind":10,"ty":4,"nm":"Layer 5","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":3,"s":[186.85,246.526,0],"to":[45.181,31.464,0],"ti":[-45.181,-31.464,0]},{"t":17,"s":[457.937,435.308,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[101.8,-29]],"o":[[0,0],[0,0]],"v":[[84.15,23.374],[-84.15,-16.226]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":0,"op":17,"st":0},{"ind":11,"ty":4,"nm":"Layer 4","sr":1,"ks":{"o":{"a":0,"k":40,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[182,132.5,0],"to":[38.823,47.135,0],"ti":[-38.823,-47.135,0]},{"t":19,"s":[414.937,415.308,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-13.4],[13.4,0],[0,13.4],[-13.4,0]],"o":[[0,13.4],[-13.4,0],[0,-13.4],[13.4,0]],"v":[[24.3,0],[0,24.3],[-24.3,0],[0,-24.3]],"c":true},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":0,"op":17,"st":0},{"ind":12,"ty":4,"nm":"Layer 3","sr":1,"ks":{"o":{"a":0,"k":40,"ix":11},"r":{"a":0,"k":0,"ix":10,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":1,"s":[107,314.771,0],"to":[48.823,13.089,0],"ti":[-48.823,-13.089,0]},{"t":18,"s":[399.937,393.308,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[32.7,-35.3]],"o":[[0,0],[0,0]],"v":[[35.3,-16.171],[-35.3,16.229]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":0,"op":17,"st":0},{"ind":13,"ty":4,"nm":"Layer 7","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":2,"s":[131.55,361.1,0],"to":[47.898,9.368,0],"ti":[-47.898,-9.368,0]},{"t":16,"s":[418.937,417.308,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[-124.45,105.1,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-124.7,105.1],[-124.2,105.1]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":0,"op":17,"st":0},{"ind":14,"ty":4,"nm":"Layer 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":4,"s":[76.25,151,0],"to":[53.948,40.385,0],"ti":[-53.948,-40.385,0]},{"t":20,"s":[399.937,393.308,0]}],"ix":2,"x":"var $bm_rt;\\nvar contLayer, eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    contLayer = thisComp.layer(\'Elastic Control Layer\');\\n    eff = contLayer.effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[-179.75,-105,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-180,-105],[-179.5,-105]],"c":false},"ix":2},"nm":"Path 2"},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1}],"ip":0,"op":17,"st":0}]}],"layers":[{"ind":1,"ty":4,"nm":"Mask","td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-45,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[315.663,298.508,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.77,"y":0},"t":17,"s":[345.663,338.508,0],"to":[0,0,0],"ti":[0,0,0]},{"t":22,"s":[315.663,298.508,0]}],"ix":2,"x":"var $bm_rt;\\nvar eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    eff = effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[313.164,303.508,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ef":[{"ty":5,"nm":"Elastic Controller","np":5,"ix":1,"en":1,"ef":[{"ty":0,"nm":"Amplitude","ix":1,"v":{"a":0,"k":20,"ix":1}},{"ty":0,"nm":"Frequency","ix":2,"v":{"a":0,"k":60,"ix":2}},{"ty":0,"nm":"Decay","ix":3,"v":{"a":0,"k":90,"ix":3}}]}],"shapes":[{"ty":"gr","it":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[75.661,0.707],[0,0],[0,0],[-133.025,-28.157],[-3.11,5.922]],"o":[[0,0],[-75.661,-0.707],[0,0],[2.22,3.794],[201.636,42.68],[0,0]],"v":[[110.598,-47.223],[6.201,-8.135],[-139.647,-35.838],[-308.645,148.575],[-42.809,440.307],[438.695,338.857]],"c":true},"ix":2},"nm":"Path 1"},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"nm":"Fill 1"},{"ty":"tr","p":{"a":0,"k":[308.58,478.862],"ix":2},"a":{"a":0,"k":[-11,170.875],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":3,"s":[100,100]},{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":13,"s":[120,100]},{"i":{"x":[0.833,0.833],"y":[0.833,1]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":18,"s":[120,100]},{"t":22,"s":[100,100]}],"ix":3,"x":"var $bm_rt;\\nvar eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    eff = effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","cix":2,"ix":1},{"ty":"tr","p":{"a":0,"k":[308.955,479.074],"ix":2},"a":{"a":0,"k":[308.955,479.074],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":3,"s":[100,100]},{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":13,"s":[100,65]},{"i":{"x":[0.833,0.833],"y":[1,0.833]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":21,"s":[100,65]},{"t":25,"s":[100,100]}],"ix":3,"x":"var $bm_rt;\\nvar eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    eff = effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","cix":2,"ix":1}],"ip":0,"op":90,"st":0},{"ind":2,"ty":0,"nm":"Party Particles","tt":2,"refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[256,256,0],"ix":2},"a":{"a":0,"k":[256,256,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":512,"h":512,"ip":0,"op":90,"st":0},{"ind":3,"ty":4,"nm":"Layer 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-45,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.23,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[315.663,298.508,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.77,"y":0},"t":17,"s":[345.663,338.508,0],"to":[0,0,0],"ti":[0,0,0]},{"t":22,"s":[315.663,298.508,0]}],"ix":2,"x":"var $bm_rt;\\nvar eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    eff = effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"a":{"a":0,"k":[313.164,303.508,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ef":[{"ty":5,"nm":"Elastic Controller","np":5,"ix":1,"en":1,"ef":[{"ty":0,"nm":"Amplitude","ix":1,"v":{"a":0,"k":20,"ix":1}},{"ty":0,"nm":"Frequency","ix":2,"v":{"a":0,"k":60,"ix":2}},{"ty":0,"nm":"Decay","ix":3,"v":{"a":0,"k":90,"ix":3}}]}],"shapes":[{"ty":"gr","it":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[5.586,9.546],[0,0]],"o":[[0,0],[-5.162,9.829],[0,0],[0,0]],"v":[[110.598,-47.223],[1.704,163.495],[-22.974,164.131],[-139.647,-35.838]],"c":false},"ix":2},"nm":"Path 1"},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[-0.919,-24.678],[-69.791,2.333],[0.919,24.678],[69.791,-2.475]],"o":[[0.849,24.749],[69.791,-2.475],[-0.849,-24.749],[-69.791,2.333]],"v":[[-141.485,-43.617],[-13.57,-3.241],[111.235,-52.243],[-16.681,-92.619]],"c":true},"ix":2},"nm":"Path 2"},{"ty":"tr","p":{"a":0,"k":[308.58,478.862],"ix":2},"a":{"a":0,"k":[-11,170.875],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":3,"s":[100,100]},{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":13,"s":[120,100]},{"i":{"x":[0.833,0.833],"y":[0.833,1]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":18,"s":[120,100]},{"t":22,"s":[100,100]}],"ix":3,"x":"var $bm_rt;\\nvar eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    eff = effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","cix":2,"ix":1},{"ty":"tr","p":{"a":0,"k":[308.955,479.074],"ix":2},"a":{"a":0,"k":[308.955,479.074],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":3,"s":[100,100]},{"i":{"x":[0.23,0.23],"y":[1,1]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":13,"s":[100,65]},{"i":{"x":[0.833,0.833],"y":[1,0.833]},"o":{"x":[0.77,0.77],"y":[0,0]},"t":21,"s":[100,65]},{"t":25,"s":[100,100]}],"ix":3,"x":"var $bm_rt;\\nvar eff, amp, freq, decay, n, n, t, t, v;\\ntry {\\n    eff = effect(\'Elastic Controller\');\\n    amp = $bm_div(eff(1), 200);\\n    freq = $bm_div(eff(2), 30);\\n    decay = $bm_div(eff(3), 10);\\n    $bm_rt = n = 0;\\n    if (numKeys > 0) {\\n        $bm_rt = n = nearestKey(time).index;\\n        if (key(n).time > time) {\\n            n--;\\n        }\\n    }\\n    if (n == 0) {\\n        $bm_rt = t = 0;\\n    } else {\\n        $bm_rt = t = $bm_sub(time, key(n).time);\\n    }\\n    if (n > 0) {\\n        v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n        $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n    } else {\\n        $bm_rt = value;\\n    }\\n} catch (e) {\\n    $bm_rt = value = value;\\n}"},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","cix":2,"ix":1},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 1"},{"ty":"gr","it":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-21.708,0.636],[-18.243,4.384]],"o":[[18.031,2.899],[22.91,-0.849],[0,0]],"v":[[-120.935,25.999],[-60.548,29.393],[2.031,21.261]],"c":false},"ix":2},"nm":"Path 1"},{"ty":"tr","p":{"a":0,"k":[309.513,479.025],"ix":2},"a":{"a":0,"k":[-57.188,120.375],"ix":1},"s":{"a":0,"k":[100,100],"ix":3,"x":"var $bm_rt;\\n$bm_rt = content(\'Group 2\').content(\'Group 2\').transform.scale;"},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":40,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","cix":2,"ix":1},{"ty":"tr","p":{"a":0,"k":[308.373,479.032],"ix":2},"a":{"a":0,"k":[308.373,479.032],"ix":1},"s":{"a":0,"k":[100,100],"ix":3,"x":"var $bm_rt;\\n$bm_rt = content(\'Group 2\').transform.scale;"},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","cix":2,"ix":3},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":40,"ix":4},"w":{"a":0,"k":30.72,"ix":5},"lc":2,"lj":2,"nm":"Stroke 2"}],"ip":0,"op":90,"st":0}],"markers":[]}'),ag=()=>{var e;let t=(0,c.usePathname)(),a=(0,F.jE)(),[r,i]=(0,R.ZA)(D.u.CHECKOUT_SESSION_ID,R.tU.withDefault("")),[l,d]=(0,n.useState)(!1),{buyCreditsSuccess:o}=(0,g.bO)(),{data:u}=(0,a_.kd)(),m=null!=(e=null==u?void 0:u.total)?e:0;(0,n.useEffect)(()=>{r&&!t.includes(y.ze.SUBSCRIPTION_SUCCESS)&&setTimeout(async()=>{await a.invalidateQueries({queryKey:[V.D.TOKEN_COUNT],refetchType:"all"}),d(!0)},2e3)},[r,t,a]);let p=e=>{e||i(null),d(e)};return(0,s.jsx)(eS.Root,{open:l,onOpenChange:p,children:(0,s.jsx)(eS.Content,{dialogProps:{className:"max-w-[700px] gap-0 p-0"},drawerProps:{className:"p-4 mobile:p-6 rounded-t-6 border-none",noVaul:!0},children:(0,s.jsxs)(eS.Body,{dialogProps:{className:"relative flex flex-col items-center gap-8 p-6"},drawerProps:{className:"relative flex flex-col items-center tablet:gap-8 gap-4 !outline-none overflow-hidden"},children:[(0,s.jsxs)("div",{className:"",children:[(0,s.jsxs)("div",{className:"bg-fill-brand relative flex size-16 items-center justify-center overflow-hidden rounded-full",children:[(0,s.jsx)(av.P,{animationData:ay,className:"size-10",loop:!0}),(0,s.jsx)("span",{className:"absolute top-2.5 left-1/2 h-[100px] w-4/5 -translate-x-1/2 animate-[float_2400ms_infinite] rounded-[50%] bg-[#CB89FEB8] blur-md"})]}),(0,s.jsx)(b.De,{btnProps:{className:"absolute tablet:top-3 top-0 tablet:right-3 right-0 z-10"}})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("h2",{className:"text-heading-md",children:"Credits have been added to your account"}),(0,s.jsx)("p",{className:"text-body-sm text-content-secondary",children:"Thank you for purchasing!"})]}),(0,s.jsxs)("div",{className:"rounded-10 border-border-primary w-[535px] space-y-4 border pt-4 pr-4 pb-6 pl-4",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center gap-2",children:[o&&o.icon&&(0,s.jsx)("div",{className:"border-border-primary flex size-10 items-center justify-center rounded-full border p-2",children:(0,s.jsx)(k.default,{src:o.icon,alt:"",width:16,height:16,className:"size-4"})}),(0,s.jsx)("h3",{className:"text-label-lg",children:o.title})]}),(0,s.jsx)("div",{className:"tablet:grid-cols-2 tablet:gap-x-12 tablet:gap-y-4 grid grid-cols-1 gap-4",children:o.features.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.icon&&(0,s.jsx)(k.default,{src:e.icon,alt:"",width:18,height:18,className:"size-4.5"}),(0,s.jsx)("span",{className:"text-label-sm",children:e.name})]},t))})]}),(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("span",{className:"text-body-sm text-content-secondary",children:"Total credit balance:"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(e_.Luh,{className:"text-content-tertiary size-4"}),(0,s.jsxs)("span",{className:"text-body-sm text-content-tertiary",children:[m.toLocaleString()," credits"]})]})]}),(0,s.jsxs)("div",{className:"flex w-full flex-col gap-4",children:[(0,s.jsxs)("button",{onClick:()=>p(!1),className:"rounded-4 bg-fill-brand text-label-xl group text-content-fixed-inverse relative flex h-14 w-full items-center justify-center overflow-hidden font-medium",children:[(0,s.jsxs)("span",{className:"z-10 flex items-center justify-center gap-2",children:["Let's continue",(0,s.jsx)(e_.JLc,{className:"size-4.5 transition-transform group-hover:translate-x-1"})]}),(0,s.jsx)("span",{className:"absolute top-2.5 left-1/2 h-[179px] w-4/5 -translate-x-1/2 animate-[float_2400ms_infinite] rounded-[50%] bg-[#CB89FEB8] blur-md"})]}),(0,s.jsx)(z(),{href:y.x2.USAGE_ANALYTICS,className:"text-body-sm text-content-tertiary hover:text-content-primary text-center transition-colors",children:"See credit usage"})]})]})})})},aE=(0,n.createContext)(null),aI=e=>{let{children:t,setIsOpen:a}=e,[r,i]=(0,n.useState)(0),l=(0,n.useRef)(null),{mutate:d}=(0,e8.Jl)(),[o,c]=(0,n.useState)(()=>{let e=localStorage.getItem(tq.PLAYED_SECTIONS_MAP);return e?JSON.parse(e):{basic:{},advanced:{}}}),[u,m]=(0,n.useState)("basic"),{userTrainingModal:p}=(0,g.bO)(),x=(0,n.useCallback)(e=>{let t=Object.keys(p).find(t=>p[t].some(t=>t.id===e));t&&(m(t),i(p[t].findIndex(t=>t.id===e)))},[p]),f=p[u][r],b=(0,n.useCallback)(function(){let{shouldCloseOnEnd:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldCloseOnEnd:!0},t=r+1,s=t>=p[u].length?tF[tF.indexOf(u)+1]:u;s!==u?i(0):i(t),s?m(null!=s?s:"basic"):e&&a(!1)},[r,u,a,p]),h=()=>l.current?l.current.currentTime:0,v=()=>l.current?l.current.duration:0;(0,n.useEffect)(()=>{localStorage.setItem(tq.PLAYED_SECTIONS_MAP,JSON.stringify(o))},[o]),(0,n.useEffect)(()=>{(null==f?void 0:f.id)!=null&&c(e=>({...e,[u]:{...e[u],[f.id]:!0}}))},[null==f?void 0:f.id,u]),(0,n.useEffect)(()=>{Object.values(o).reduce((e,t)=>e+Object.values(t).length,0)===p.basic.length+p.advanced.length&&d({flag:tU.sF.HAS_SEEN_USER_TRAINING_MODAL,status:!0})},[o,d,p.advanced.length,p.basic.length]);let _=(0,n.useMemo)(()=>({currentItemIndex:r,setCurrentItemIndex:i,playedItemsMap:o,videoRef:l,currentSection:u,setCurrentSection:m,userTrainingModal:p,currentItem:f,handleSelect:x,handleNextVideo:b,getVideoCurrentTime:h,getVideoDuration:v}),[f,r,u,b,x,o,p]);return(0,s.jsx)(aE.Provider,{value:_,children:t})},aN=()=>{let e=(0,n.useContext)(aE);if(!e)throw Error("useUserTrainingModalContext must be used within a UserTrainingModalProvider");return e},aj=e=>{let{className:t}=e,{handleNextVideo:a}=aN();return(0,s.jsxs)(O.$,{className:t,onClick:()=>{a({shouldCloseOnEnd:!0})},variant:"secondary",size:"md",children:["Next Video",(0,s.jsx)(e_.b1q,{className:"size-3.5"})]})},aA=()=>{let{currentItem:e}=aN();return(0,s.jsxs)("div",{className:"tablet:px-0 flex items-center justify-between px-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("p",{className:"text-content-primary text-body-lg laptop:text-heading-xs font-semibold",children:null==e?void 0:e.title}),(0,s.jsx)("p",{className:"text-content-secondary text-body-sm tablet:text-label-lg",children:null==e?void 0:e.description})]}),(0,s.jsx)(aj,{className:"tablet:flex hidden"})]})};function ak(e){let{progress:t,size:a=120,strokeWidth:n=8,containerClassName:r,backgroundCircleClassName:i,progressCircleClassName:l,showPercentage:d=!0}=e,o=Math.min(100,Math.max(0,t)),c=(a-n)/2,u=2*c*Math.PI;return(0,s.jsxs)("div",{className:(0,ei.cn)("relative inline-flex items-center justify-center",r),children:[(0,s.jsxs)("svg",{width:a,height:a,className:"-rotate-90 transform",children:[(0,s.jsx)("circle",{cx:a/2,cy:a/2,r:c,stroke:"currentColor",strokeWidth:n,fill:"transparent",className:(0,ei.cn)("text-surface-secondary transition-all duration-300 ease-in-out",i)}),(0,s.jsx)("circle",{cx:a/2,cy:a/2,r:c,stroke:"currentColor",strokeWidth:n,fill:"transparent",strokeDasharray:u,strokeDashoffset:u-o/100*u,strokeLinecap:"round",className:(0,ei.cn)("text-fill-brand transition-all duration-300 ease-in-out",l)})]}),d&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-lg font-semibold text-gray-900",children:[Math.round(o),"%"]})})]})}var aS=a(87740),aO=a.n(aS);o().extend(aO());let a$=e=>{let{item:t}=e,{currentItem:a,playedItemsMap:r,handleSelect:i,getVideoCurrentTime:l,getVideoDuration:d}=aN(),[c,u]=(0,n.useState)(l),m=(null==a?void 0:a.id)===t.id,p=d(),x=o().duration(p,"seconds"),f=x.minutes(),b=x.seconds();return(0,n.useEffect)(()=>{if(m){let e=setInterval(()=>{u(l)},500);return()=>clearInterval(e)}},[l,m]),(0,s.jsx)("button",{className:"rounded-2 group data-[watched=true]:text-content-tertiary text-content-secondary data-[active=true]:text-content-primary text-body-sm tablet:text-body-md data-[active=true]:bg-fill-brand-secondary-disabled hover:bg-surface-primary h-10 w-full cursor-pointer px-4 py-2 text-start transition-all duration-300 active:scale-95 data-[active=true]:font-medium","data-active":m,"data-watched":r.basic[t.id]||r.advanced[t.id],onClick:()=>i(t.id),children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(e_.PzS,{className:"text-border-tertiary group-data-[watched=true]:text-fill-brand transition-colors duration-300 group-data-[active=true]:hidden"}),(0,s.jsx)(ak,{progress:p>0?Math.round(c/p*100):0,showPercentage:!1,size:24,strokeWidth:3,backgroundCircleClassName:"text-fill-brand-secondary-active",containerClassName:"hidden group-data-[active=true]:inline-flex"}),t.title,(0,s.jsx)("span",{className:"text-label-xs text-content-tertiary ml-auto hidden group-data-[active=true]:inline-block",children:b>0&&(f>0?"".concat(f," min"):"".concat(b," sec"))}),(0,s.jsx)(e_.saN,{className:"text-content-tertiary ml-auto hidden size-4 group-hover:inline-block group-data-[active=true]:hidden"})]})})},aT=e=>{let{heading:t,items:a}=e,{playedItemsMap:r}=aN(),i=(0,n.useMemo)(()=>{let e=Object.keys(r[t]).length,s=a.length;return s>0?Math.round(e/s*100):0},[t,a,r]);return(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-content-secondary text-body-sm font-medium capitalize",children:t}),(0,s.jsx)(ak,{progress:i,showPercentage:!1,size:24,strokeWidth:4})]}),(0,s.jsx)("div",{className:"rounded-3 border-border-primary flex w-full flex-col gap-2 border px-2 py-4",children:a.map(e=>(0,s.jsx)(a$,{item:e},e.id))})]})},aP=()=>{let{currentItem:e}=aN();return(0,s.jsxs)(O.$,{onClick:()=>{e&&window.open(e.redirectTo,"_self")},variant:"ghost",children:["Try it yourself",(0,s.jsx)(e_.oA3,{})]})};var aw=a(68309),aC=a(40916);let aR=()=>{var e,t;let{videoRef:a,handleNextVideo:r}=aN(),[i,l]=(0,n.useState)(!1),[d,o]=(0,n.useState)(0),[c,u]=(0,n.useState)(!0),[m,p]=(0,n.useState)(!1),x=()=>{a.current&&(m?a.current.pause():a.current.play(),p(!m))},f=()=>{l(!!document.fullscreenElement)};return(0,n.useEffect)(()=>{let e=a.current,t=()=>{a.current&&o(a.current.currentTime)},s=()=>{a.current&&(a.current.play().catch(()=>{}),u(!1))},n=()=>{a.current&&u(!0)},i=()=>{r({shouldCloseOnEnd:!1}),p(!1)};return e&&(e.addEventListener("timeupdate",t),e.addEventListener("loadedmetadata",s),e.addEventListener("loading",n),e.addEventListener("play",()=>p(!0)),e.addEventListener("pause",()=>p(!1)),e.addEventListener("ended",i)),document.addEventListener("fullscreenchange",f),()=>{e&&(e.removeEventListener("timeupdate",t),e.removeEventListener("loadedmetadata",s),e.removeEventListener("play",()=>p(!0)),e.removeEventListener("pause",()=>p(!1)),e.removeEventListener("loading",n),e.removeEventListener("ended",i)),document.removeEventListener("fullscreenchange",f)}},[r,p,a]),(0,s.jsxs)("div",{onClick:e=>{!e.target.closest('[data-slot="slider"]')&&a.current&&(a.current.pause(),x())},onKeyDown:e=>{(" "===e.key||"Enter"===e.key)&&(e.preventDefault(),!e.target.closest('[data-slot="slider"]')&&a.current&&(a.current.pause(),x()))},role:"button",tabIndex:0,className:(0,ei.cn)("absolute inset-0 opacity-0 transition-opacity duration-300 hover:opacity-100",{"opacity-100":!m||c}),children:[(0,s.jsx)("button",{onClick:x,className:"tablet:size-20 absolute top-1/2 left-1/2 flex size-13 -translate-x-1/2 -translate-y-1/2 items-center justify-center rounded-full bg-[rgba(0,0,0,0.34)] backdrop-blur-lg transition-transform duration-200 focus-visible:outline-none active:scale-90 [&_svg]:size-8",children:c?(0,s.jsx)(J.y,{className:"text-content-fixed-inverse size-10"}):m?(0,s.jsx)(e_.I7s,{className:"text-content-fixed-inverse"}):(0,s.jsx)(e_.SFX,{className:"text-content-fixed-inverse"})}),(0,s.jsxs)("div",{className:"group absolute inset-x-6 bottom-6.5 flex items-center gap-6 py-2",children:[(0,s.jsx)(aC.bL,{"data-slot":"slider",min:0,max:(null==(e=a.current)?void 0:e.duration)||0,value:[d],onValueChange:e=>{let t=e[0];a.current&&"number"==typeof t&&(a.current.currentTime=t,o(t))},className:"relative flex w-full touch-none items-center transition-transform duration-300 select-none group-hover:scale-y-130",children:(0,s.jsx)(aC.CC,{className:"bg-fill-inverse-disabled relative h-1.5 w-full grow overflow-hidden rounded-full",children:(0,s.jsx)(aC.Q6,{className:"bg-fill-secondary absolute h-full"})})}),(0,s.jsx)("div",{className:"text-content-primary-inverse-disabled text-label-xs tabular-nums",children:c?(0,s.jsx)(J.y,{className:"size-3"}):(e=>{let t=Math.floor(e/60),a=Math.floor(e%60);return"".concat(t,":").concat(a.toString().padStart(2,"0"))})((null==(t=a.current)?void 0:t.duration)||0)}),(0,s.jsx)("button",{onClick:()=>{a.current&&(i?document.exitFullscreen&&document.exitFullscreen():a.current.requestFullscreen&&a.current.requestFullscreen())},className:"transition-colors hover:scale-105",children:(0,s.jsx)(e_.mSu,{className:"text-content-primary-inverse size-4"})})]})]})},aD=()=>{let{currentItem:e,videoRef:t,currentSection:a,currentItemIndex:n,userTrainingModal:r}=aN(),{theme:i}=(0,aw.D)(),l="dark"===i?null==e?void 0:e.dark:null==e?void 0:e.light;return(0,s.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,s.jsxs)("div",{className:"tablet:rounded-3 relative overflow-hidden",children:[(0,s.jsx)("video",{ref:t,src:null==l?void 0:l.video,poster:null==l?void 0:l.poster,className:"h-[498px] w-full object-cover focus-visible:outline-none",playsInline:!0,preload:"metadata",children:(0,s.jsx)("track",{kind:"captions"})}),(0,s.jsx)(aR,{})]}),(0,s.jsxs)("p",{className:"text-body-xs text-content-tertiary tablet:hidden text-center font-medium",children:[(0,s.jsx)("span",{className:"capitalize",children:a})," ",n+1," of ",r[a].length]})]})},aM=()=>{let{isOpen:e,setDialogOpen:t}=tz(),{userTrainingModal:a,featureFlags:n}=(0,g.bO)();return!1===n[tB.USER_TRAINING_MODAL]?null:(0,s.jsx)(b.lG,{open:e,onOpenChange:t,children:(0,s.jsx)(aI,{setIsOpen:t,children:(0,s.jsxs)(b.Cf,{onOpenAutoFocus:e=>{e.preventDefault()},className:"scrollbar-none tablet:rounded-4 tablet:px-8 tablet:pt-14 tablet:max-h-[848px] tablet:max-w-[calc(min(100vw-48px,1370px))] size-full max-h-[100vh] overflow-y-auto rounded-none p-0 pt-14 pb-8",children:[(0,s.jsxs)(U.s,{children:[(0,s.jsx)(b.L3,{children:"User Training"}),(0,s.jsx)(b.rr,{children:"Welcome to your training. This is an onboarding training modal."})]}),(0,s.jsx)(b.HM,{asChild:!0,children:(0,s.jsxs)(O.$,{variant:"ghost",size:"sm",className:"absolute top-5 right-5",children:[(0,s.jsx)("span",{className:"tablet:inline-block hidden",children:"Close"}),(0,s.jsx)("span",{className:"tablet:hidden",children:(0,s.jsx)(e_.w0d,{})})]})}),(0,s.jsxs)(b.R4,{className:"gap-6",children:[(0,s.jsx)("div",{className:"tablet:px-0 flex items-center justify-between px-4",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{className:"text-heading-sm laptop:text-heading-md text-content-primary font-semibold",children:"Let's get started!"}),(0,s.jsxs)("p",{className:"tablet:text-body-md text-body-sm text-content-primary",children:["Watch these quick tutorials to make the most of Imagine One as we set you up."," "]})]})}),(0,s.jsxs)("div",{className:"laptop:flex-row flex h-full flex-col-reverse gap-6",children:[(0,s.jsx)("div",{className:"laptop:max-w-[358px] tablet:px-0 flex w-full flex-col gap-6 px-4",children:tF.map(e=>(0,s.jsx)(aT,{heading:e,items:a[e]},e))}),(0,s.jsxs)("div",{className:"flex w-full flex-col gap-6 pt-8",children:[(0,s.jsx)(aA,{}),(0,s.jsx)(aD,{}),(0,s.jsxs)("div",{className:"tablet:justify-end tablet:px-0 flex items-center justify-between px-4",children:[(0,s.jsx)(aP,{}),(0,s.jsx)(aj,{className:"tablet:hidden"})]})]})]})]})]})})})},aL=()=>(0,s.jsxs)(n.Suspense,{children:[(0,s.jsx)(tV,{}),(0,s.jsx)(tI,{}),(0,s.jsx)(ah,{}),(0,s.jsx)(eh,{}),(0,s.jsx)(e1,{}),(0,s.jsx)(eR,{}),(0,s.jsx)(r.i.Root,{}),(0,s.jsx)(i.O.Root,{}),(0,s.jsx)(ax,{}),(0,s.jsx)(aM,{}),(0,s.jsx)(P,{}),(0,s.jsx)(tL,{}),(0,s.jsx)(ag,{}),(0,s.jsx)(e9,{})]})},88512:(e,t,a)=>{"use strict";a.d(t,{SupportWidgetItem:()=>v});var s=a(54568),n=a(12522),r=a(60095),i=a(8139),l=a(62942),d=a(7620),o=a(81491),c=a(20844),u=a(78848);let m=e=>{let{hideWidget:t,alignment:a,user:n,userIdHash:r=""}=e,m=(e=>{let t=(0,l.usePathname)(),a=(0,u.d)(),s=t===c.ze.GET_HELP&&a;return(0,d.useEffect)(()=>{let t=document.getElementById(o.G.CHATBASE_BUBBLE_BUTTON),a=document.getElementById(o.G.CHATBASE_BUBBLE_WINDOW);return t&&a&&(e?(t.style.display="none",a.style.display="none"):s?(t.style.display="none",t.click(),a.style.display="block",a.style.bottom="2rem"):t.style.display="block"),()=>{var e;let t=document.getElementById(o.G.CHATBASE_BUBBLE_BUTTON),a=document.getElementById(o.G.CHATBASE_BUBBLE_WINDOW);(null==t?void 0:t.style)&&(t.style.display="none"),(null==a?void 0:a.style)&&(a.style.display="none"),(null==(e=window)?void 0:e.chatbase)&&window.chatbase.close()}},[e,s]),s})(t);return(0,s.jsxs)(s.Fragment,{children:[n&&r&&(0,s.jsx)(i.default,{async:!0,type:"text/javascript",id:"chatbase-script-identify",strategy:"afterInteractive",children:"\n        window.chatbaseUserConfig = {\n            user_id: '".concat(n.id,"', // this is the user_id, should be unique for each user\n            user_hash: '").concat(r,"', // this is the hash of the user_id, should be generated on the server\n            user_metadata: {\n                \"name\": '").concat(n.name,"',\n                \"email\": '").concat(n.email,"',\n            }\n          }")}),(0,s.jsx)(i.default,{async:!0,type:"text/javascript",id:"chatbase-script",strategy:"afterInteractive",onReady:()=>(e=>{let{alignment:t,hideWidget:a,embeddedMode:s=!1}=e;new MutationObserver((e,n)=>{let r=document.getElementById(o.G.CHATBASE_BUBBLE_BUTTON),i=document.getElementById(o.G.CHATBASE_BUBBLE_WINDOW);r&&i&&("left"===t?(r.style.left="1rem",r.style.right="auto",a&&(r.style.display="none"),i.style.left="1rem",i.style.right="auto"):(r.style.right="1rem",r.style.left="auto",a?r.style.display="none":s&&(r.style.display="none",r.click(),i.style.display="block",i.style.bottom="2rem"),i.style.right="1rem",i.style.left="auto"),n.disconnect())}).observe(document.body,{childList:!0,subtree:!0})})({alignment:a,hideWidget:t,embeddedMode:m}),children:'(function(){if(!window.chatbase||window.chatbase("getState")!=="initialized"){window.chatbase=(...arguments)=>{if(!window.chatbase.q){window.chatbase.q=[]}window.chatbase.q.push(arguments)};window.chatbase=new Proxy(window.chatbase,{get(target,prop){if(prop==="q"){return target.q}return(...args)=>target(prop,...args)}})}const onLoad=function(){const script=document.createElement("script");script.src="https://www.chatbase.co/embed.min.js";script.id="djryHL-DnkZYAVNWmywGB";script.domain="www.chatbase.co";document.body.appendChild(script)};if(document.readyState==="complete"){onLoad()}else{window.addEventListener("load",onLoad)}})();'})]})};var p=a(53881),x=a(62384),f=a(3397),b=a(53605);let h={requirePremium:!1,alignment:"right",userIdHash:""},v=e=>{let{requirePremium:t=h.requirePremium,alignment:a=h.alignment,userIdHash:i=h.userIdHash}=e,{hideWidget:o}=(e=>{var t;let a=(0,l.usePathname)(),s=(0,l.useSearchParams)(),n=s.get(x.u.SHOW_AUTH),r=null!=(t=s.get(p._.TOKEN))?t:"",{isSubscriptionActive:i}=(0,b.c)(),{chatBasePathConfig:o}=(0,f.bO)(),c=(0,d.useCallback)(()=>!!(null==o?void 0:o.length)&&o.some(e=>e.shouldMatchExact?a===e.path:null==a?void 0:a.startsWith(e.path)),[o,a]),u=!1;return"true"===n&&0===r.length?u=!0:e&&(u=!i),c()||(u=!0),{hideWidget:u}})(t),{user:c}=(0,r.u)();return(0,s.jsx)(n.tH,{fallback:(0,s.jsx)("div",{children:"Chatbase Error"}),children:(0,s.jsx)(m,{hideWidget:o,alignment:a,userIdHash:i,user:c})})}},88766:()=>{},89829:(e,t,a)=>{"use strict";a.d(t,{_n:()=>m,hq:()=>u,mW:()=>p});var s=a(51874),n=a(53881),r=a(62384),i=a(16258),l=a(20844),d=a(19533),o=a(58910);let c=(e=>{let t=e.extractErrorMessage||(e=>e instanceof Error?e.message:"An unknown error occurred");return function(a){return(0,i.n)({mutationFn:t=>{let{payload:s,param:n}=t;return a({payload:s,param:null!=n?n:{redirect:e.appUrl}})},onSuccess:async t=>{var a,s,n;let{data:{redirect:r}}=t,i=new URL(r).searchParams;if(!i.get(e.searchParamsKeys.token))throw Error("No auth token received from server");let l=new URLSearchParams(i),d=new URL(window.location.href),o=new URL(e.authRoutes.has(d.pathname)?null!=(a=d.searchParams.get(e.searchParamsKeys.redirect))?a:e.defaultRoute:null!=(n=null!=(s=d.searchParams.get(e.searchParamsKeys.redirect))?s:d.pathname)?n:e.defaultRoute,window.location.origin);new URLSearchParams(window.location.search).forEach((e,t)=>o.searchParams.set(t,e)),l.forEach((e,t)=>o.searchParams.set(t,e)),o.searchParams.delete(e.searchParamsKeys.redirect),window.location.href=o.href},onError:a=>{var s,n;let r=t(a);null==(n=e.toast)||null==(s=n.error)||s.call(n,r)}})}})({appUrl:d.h.NEXT_PUBLIC_APP_URL,authRoutes:l.f3,defaultRoute:l.ze.HOME,searchParamsKeys:{token:n._.TOKEN,redirect:r.u.REDIRECT},toast:s.oR}),u=()=>c(o.y.googleAuth.bind(o.y)),m=()=>c(o.y.facebookAuth.bind(o.y)),p=()=>c(o.y.googleOneTapAuth.bind(o.y))},91426:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var s=a(5012);let n=e=>{let{parentId:t,isPersonal:a,orgId:n}=e;return void 0===t?[(0,s.iT)({parentId:t,isPersonal:a,orgId:n})]:[(0,s.iT)({parentId:t,isPersonal:a,orgId:n}),(0,s.iT)({parentId:void 0,isPersonal:a,orgId:n})]}},92414:(e,t,a)=>{"use strict";let s;a.d(t,{RootLayoutProviders:()=>w});var n=a(54568),r=a(78162),i=a(19779),l=a(60095),d=a(74729),o=a(73352),c=a(3397),u=a(788),m=a(94967);let p=()=>((0,m.H)(),null);var x=a(7620),f=a(2781),b=a(99588),h=a(97788),v=a(77773),_=a.n(v),y=a(19533),g=a(17307);let E={gtmId:y.h.NEXT_PUBLIC_GTM_ID};class I extends g.y{log(e){let{properties:t}=e;this.manager.dataLayer({dataLayer:{event:"gtm.click","gtm.elementId":e.name,...t}})}constructor(){super(),this.manager=_(),this.manager.initialize(E)}}let N=e=>{let{children:t}=e,[a,s]=(0,x.useState)(()=>({aggregator:new h.u([]),isAggregatorReady:!1}));return(0,f.S)(()=>{let e=new I;s({aggregator:new h.u([e]),isAggregatorReady:!0})}),(0,n.jsx)(b.B,{...a,children:t})};var j=a(31354),A=a(7703),k=a(87606),S=a(82099);let O=()=>new j.E({defaultOptions:{queries:{staleTime:6e4}}}),$=e=>{let{children:t}=e,a=A.S$?O():(s||(s=O()),s);return(0,n.jsxs)(k.Ht,{client:a,children:[t,!y.h.NEXT_PUBLIC_IS_PROD&&(0,n.jsx)(S.E,{initialIsOpen:!1})]})};var T=a(14619),P=a(39381);let w=e=>{let{children:t,oneRemoteConfigValues:a,userContext:s}=e;return(0,n.jsx)(N,{children:(0,n.jsx)(i.N,{children:(0,n.jsx)(c.fV,{initialState:a,children:(0,n.jsx)(o.lx,{children:(0,n.jsx)(l.v,{value:s,children:(0,n.jsxs)($,{children:[(0,n.jsx)(T.ThemeProvider,{children:(0,n.jsx)(d.os,{children:(0,n.jsx)(u.F,{children:(0,n.jsx)(r.V,{height:"2px",color:"rgb(var(--fill-brand))",options:{showSpinner:!1},shallowRouting:!0,children:(0,n.jsx)(P.O,{children:t})})})})}),(0,n.jsx)(p,{})]})})})})})})}},94967:(e,t,a)=>{"use strict";a.d(t,{H:()=>o,q:()=>c});var s=a(67933),n=a(87606),r=a(7620),i=a(60095),l=a(90416),d=a(33618);let o=()=>{let{user:e}=(0,i.u)();return(0,s.I)({queryKey:[l.n.GET_MY_PROFILE],queryFn:()=>d.D.getMyProfile(),enabled:!!e})},c=()=>{let e=(0,n.jE)();return(0,r.useCallback)(()=>e.invalidateQueries({queryKey:[l.n.GET_MY_PROFILE]}),[e])}},97706:(e,t,a)=>{"use strict";a.d(t,{I5:()=>x,N5:()=>v,Nz:()=>m,R6:()=>_,_C:()=>p});var s=a(25826),n=a(52303),r=a(55437),i=a(12995),l=a(65762),d=a(59051),o=a(76376),c=a(32162),u=a(31625);let m=s.Ay$.enum([r.j.GENERATE_APP_VIDEO_ASYNC]),p=s.Ay$.object({data:o.k,style_id:s.Ay$.string(),metadata:u.p}),x=e=>{let t=(0,d.b)(h,JSON.parse(e.metadata));return{data:b((0,d.b)(f,JSON.parse(e.data),{generationType:n.c.VIDEO,imageAppId:-1,videoAppId:-1,aspect_ratio:"1:1"})),styleId:e.style_id,metadata:t}},f=s.Ay$.object({generationType:s.Ay$.literal(n.c.VIDEO),imageAppId:s.Ay$.number(),videoAppId:s.Ay$.number()}).and(s.Ay$.union([s.Ay$.object({aspect_ratio:s.Ay$.string(),image_size:s.Ay$.never().optional()}),s.Ay$.object({image_size:s.Ay$.object({width:s.Ay$.number(),height:s.Ay$.number()}),aspect_ratio:s.Ay$.never().optional()})])).and(s.Ay$.record(s.Ay$.string(),s.Ay$.unknown())),b=e=>{var t,a;let{aspect_ratio:s,image_size:r,imageAppId:i,videoAppId:l,generationType:d,...o}=e;return r?{aspectHeight:r.height,aspectWidth:r.width,generationType:n.c.VIDEO,imageAppId:i,videoAppId:l,imageSize:r,...o}:{aspectHeight:Number(null!=(t=s.split(":")[1])?t:1),aspectWidth:Number(null!=(a=s.split(":")[0])?a:1),generationType:n.c.VIDEO,imageAppId:i,videoAppId:l,aspectRatio:s,...o}},h=s.Ay$.object({placeholderUuid:s.Ay$.string().optional(),slug:s.Ay$.string().optional()}),v=s.Ay$.object({generation:c.aB,inputs:c.aB,thumbnail:c.aB,variation:c.aB}),_=e=>({generation:(0,i._)(e.generation),inputs:e.inputs,thumbnail:(0,i._)(e.thumbnail),variation:e.variation});s.Ay$.literal(l.A.APP_VIDEO_GENERATION)},98221:(e,t,a)=>{"use strict";a.d(t,{I6:()=>c,TR:()=>f,bq:()=>p,eb:()=>b,gC:()=>x,l6:()=>o,s3:()=>u,yv:()=>m});var s=a(54568),n=a(84545);a(7620);var r=a(46626),i=a(11386),l=a(89536),d=a(16750);let o=e=>{let{...t}=e;return(0,s.jsx)(n.bL,{"data-slot":"select",...t})},c=e=>{let{className:t}=e;return(0,s.jsx)(r.D3D,{className:(0,i.cn)("text-content-primary size-5 transform stroke-[1.5] transition-all duration-500 group-data-[state=open]:-rotate-180 [.sm_&]:size-[18px]",t)})},u=e=>{let{...t}=e;return(0,s.jsx)(n.YJ,{"data-slot":"select-group",...t})},m=e=>{let{...t}=e;return(0,s.jsx)(n.WT,{"data-slot":"select-value",...t})},p=e=>{let{className:t,size:a,variant:r,children:d,...o}=e;return(0,s.jsx)(n.l9,{"data-slot":"select-trigger",className:(0,i.cn)("data-[placeholder]:text-content-secondary",(0,l.JX)({className:t,variant:r,size:a}),"group"),...o,children:d})},x=e=>{let{className:t,children:a,position:r="popper",variant:d,viewportClassName:o,...c}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsx)(n.UC,{"data-slot":"select-content",className:(0,i.cn)((0,l.Kb)({variant:d}),"popper"===r&&"bg-background text-content-primary ring-border-primary ring-1 drop-shadow-sm data-[side=bottom]:translate-y-2.5 data-[side=left]:-translate-x-2.5 data-[side=right]:translate-x-2.5 data-[side=top]:-translate-y-2.5",t),position:r,...c,children:(0,s.jsx)(n.LM,{className:(0,i.cn)("popper"===r&&"h-[calc(var(--radix-select-trigger-height)-18px)] w-[calc(var(--radix-select-trigger-width)-18px)]",o),children:a})})})},f=e=>{let{className:t,variant:a,sticky:r,...i}=e;return(0,s.jsx)(n.JU,{"data-slot":"select-label",className:(0,d.B)({variant:a,className:t,sticky:r}),...i})},b=e=>{let{className:t,children:a,variant:d,size:o,...c}=e;return(0,s.jsxs)(n.q7,{"data-slot":"select-item",className:(0,i.cn)((0,l.OZ)({className:t,variant:d,size:o})),...c,children:[(0,s.jsx)("span",{className:"absolute right-2.5 flex items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(r.Srz,{className:"text-content-secondary"})})}),(0,s.jsx)(n.p4,{className:"flex w-full items-center gap-2",children:a})]})}},98575:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});let s=(0,a(55822).v)((e,t)=>({dynamicMiniAppsSlugToLatestGenerationMap:{},addToSlugsToLatestGenerationMap:a=>{let{generation:s,bypassExistingEntryCheck:n=!1}=a,r=s.settings.metadata.slug;r&&(null!==t().dynamicMiniAppsSlugToLatestGenerationMap[r]||n)&&e(e=>({dynamicMiniAppsSlugToLatestGenerationMap:{...e.dynamicMiniAppsSlugToLatestGenerationMap,[r]:s}}))},removeFromSlugsToLatestGenerationMap:a=>{let{slug:s}=a,n={...t().dynamicMiniAppsSlugToLatestGenerationMap};delete n[s],e({dynamicMiniAppsSlugToLatestGenerationMap:n})},clearGenerationForSlug:a=>{let{slug:s}=a;t().dynamicMiniAppsSlugToLatestGenerationMap[s]&&e(e=>({dynamicMiniAppsSlugToLatestGenerationMap:{...e.dynamicMiniAppsSlugToLatestGenerationMap,[s]:null}}))}}))},99958:(e,t,a)=>{"use strict";a.d(t,{v:()=>o});var s=a(55437),n=a(13496),r=a(59051),i=a(12331),l=a(65762),d=a(19136);let o=e=>{let t=(0,r.b)(n.pM,e.endpoint);if(t===s.j.GENERATE_APP_IMAGE_ASYNC)return(e=>{let t=(0,r.b)(n.E,e.settings,{data:"{}",metadata:"{}",style_id:"-1"}),a=(0,n.A)(t),s=(0,r.b)(n.Jm,e.url,{generation:[],inputs:[],thumbnail:[],variation:[]}),o=(0,n.bs)(s);return{...e,settings:a,url:o,tag:l.A.APP_IMAGE_GENERATION,service:i.z1.APP_IMAGE,refService:void 0,type:d.KJ.OBJECT}})({...e,endpoint:t})}}},e=>{e.O(0,[1952,5147,4667,4732,7567,7676,6844,357,9271,3922,8657,524,7261,390,4242,148,1938,3970,9722,5575,7296,5747,4545,2414,8162,1222,8859,5099,1127,543,3578,7787,9636,8022,6246,587,1902,7358],()=>e(e.s=26834)),_N_E=e.O()}]);