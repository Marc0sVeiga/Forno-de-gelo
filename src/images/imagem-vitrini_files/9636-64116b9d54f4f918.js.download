"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9636],{38:(t,e,a)=>{a.d(e,{O:()=>c,l:()=>d});var s=a(25826),r=a(12331),i=a(55437),n=a(32162),l=a(65762);let d=s.Ay$.object({id:s.Ay$.number(),uuid:s.Ay$.string(),base_id:s.Ay$.string().optional().nullable(),batch_id:s.Ay$.string(),title:s.Ay$.string().nullable(),service:r.jc,ref_service:r.jc.optional(),code:n.Vz,status:n.Wx,settings:s.Ay$.unknown(),url:s.Ay$.unknown(),is_public:s.Ay$.boolean(),archived_at:s.Ay$.string().nullable().optional(),created_at:s.Ay$.string(),updated_at:s.Ay$.string(),style_id:s.Ay$.number().optional(),category:n.s$,error:n.Wk.optional(),endpoint:s.Ay$.string().optional().nullable(),blurhash:s.Ay$.string().optional(),dominant_colors:s.Ay$.array(s.Ay$.string()).optional()}),c=t=>{var e,a,s;return{id:t.id,uuid:t.uuid,baseId:t.base_id,batchId:t.batch_id,title:null!=(e=t.title)?e:"Untitled",service:t.service,refService:t.ref_service,code:t.code,status:t.status,settings:t.settings,url:t.url,isPublic:t.is_public,archivedAt:t.archived_at,createdAt:t.created_at,updatedAt:t.updated_at,styleId:null!=(a=t.style_id)?a:-1,category:t.category,endpoint:null!=(s=t.endpoint)?s:i.j.UNKNOWN,tag:l.A.UNKNOWN,error:t.error,blurhash:t.blurhash,dominantColors:t.dominant_colors,isFeatured:!1}}},1654:(t,e,a)=>{a.d(e,{i:()=>b});var s=a(44089),r=a(55437),i=a(92184),n=a(59051),l=a(25826);let d=l.Ay$.object({assets:l.Ay$.object({UserID:l.Ay$.number(),id:l.Ay$.number(),batch_id:l.Ay$.string(),uuid:l.Ay$.string(),status:l.Ay$.number(),title:l.Ay$.string(),service_id:l.Ay$.number(),parameters:l.Ay$.string(),archived_at:l.Ay$.string().nullable(),created_at:l.Ay$.string(),is_public:l.Ay$.boolean(),category:l.Ay$.number(),style_id:l.Ay$.number(),endpoint_id:l.Ay$.number(),ref_service_id:l.Ay$.number().nullable(),version:l.Ay$.number(),updated_at:l.Ay$.string()}),status:l.Ay$.string()}),c=l.Ay$.object({message:l.Ay$.string()});var o=a(21520),u=a(36270),p=a(53326),_=a(10279);let A=l.Ay$.intersection(l.Ay$.object({id:l.Ay$.string()}),_.K);class b{async getAllAssets(t){let e=await (0,i.hZ)(async()=>await this._client.get(r.j.ASSETS_STATUS,{params:(0,o.U_)(t)})),a=(0,n.b)(o.ZZ,e.data),s=(0,o.pO)(a);return{...e,data:s}}async uploadUserAsset(t){let e=await (0,i.hZ)(async()=>await this._client.post(r.j.ASSETS_UPLOAD,(0,u.j)(t))),a=((t,e)=>{let{asyncBucketUrl:a}=e;return{id:t.id,url:(0,p.G)("/processed/".concat(t.id),a),status:"success"}})((0,n.b)(A,e.data),{asyncBucketUrl:this._asyncBucketUrl});return{...e,data:a}}async updateAsset(t){var e,a,l;let c=await (0,i.hZ)(async()=>await this._client.put("".concat(r.j.ASSETS,"/").concat(t.assetUuid),(0,s._R)(t.data))),o={assets:{UserID:(e=(0,n.b)(d,c.data)).assets.UserID,id:e.assets.id,batch_id:e.assets.batch_id,uuid:e.assets.uuid,status:e.assets.status,title:e.assets.title,service_id:e.assets.service_id,parameters:e.assets.parameters,archived_at:null!=(a=e.assets.archived_at)?a:null,created_at:e.assets.created_at,is_public:e.assets.is_public,category:e.assets.category,style_id:e.assets.style_id,endpoint_id:e.assets.endpoint_id,ref_service_id:null!=(l=e.assets.ref_service_id)?l:null,version:e.assets.version,updated_at:e.assets.updated_at},status:e.status};return{...c,data:o}}async deleteAsset(t){let e=await (0,i.hZ)(async()=>await this._client.delete("".concat(r.j.ASSETS,"/").concat(t.assetUuid))),a={message:(0,n.b)(c,e.data).message};return{...e,data:a}}constructor({client:t,asyncBucketUrl:e}){this._client=t,this._asyncBucketUrl=e}}},8070:(t,e,a)=>{a.d(e,{YD:()=>A,cb:()=>b,dr:()=>o,ki:()=>c});var s=a(79536),r=a(32162),i=a(78311),n=a(20408);let l=s.gM("format",[s.Ik({id:s.Yj().optional(),format:s.eu("url"),content:s.Yj(),status:r.Wx.optional()}).catchall(s.L5()),s.Ik({id:s.Yj().optional(),format:s.eu("base64"),content:s.Yj(),status:r.Wx.optional()}).catchall(s.L5()),s.Ik({id:s.Yj().optional(),format:s.eu("blob"),content:s.Nl(Blob),status:r.Wx.optional()}).catchall(s.L5()),s.Ik({id:s.Yj().optional(),format:s.eu("text"),content:s.Yj(),status:r.Wx.optional()}).catchall(s.L5()),s.Ik({id:s.Yj().optional(),format:s.eu("file"),content:s.NJ(),status:r.Wx.optional()}).catchall(s.L5())]),d=s.k5(n.VV),c=s.g1(s.Yj(),l).refine(t=>Object.keys(t).every(t=>d.safeParse(t).success),{message:"All keys must be valid AcceptableGenerationParams"}),o=s._H({outputs:c.optional().nullable(),errorMessage:s.Yj().optional().nullable(),name:s.Yj(),isModel:s.zM().optional(),version:s.ai(),results:s.YO(c).optional().nullable(),selectedResultIndex:s.ai().optional().nullable(),settings:s.g1(s.Yj(),s.bz()).optional().nullable(),status:s.k5(n.M7),url:s.Ik({endpoint:s.Yj(),version:s.Yj()}),behavior:s.k5(n._Y),shouldExecute:s.zM().optional()}),u=s._H({id:s.Yj(),type:s.k5(n.jM),data:o,position:s.Ik({x:s.ai(),y:s.ai()}),selected:s.zM().optional(),dragging:s.zM().optional(),draggable:s.zM().optional(),connectable:s.zM().optional(),deletable:s.zM().optional(),dragHandle:s.Yj().optional(),width:s.ai().optional(),height:s.ai().optional(),measured:s.Ik({width:s.ai().optional(),height:s.ai().optional()}).optional()}),p=s._H({id:s.Yj(),source:s.Yj(),target:s.Yj(),type:s.k5(i.y),sourceHandle:s.Yj().optional().nullable(),targetHandle:s.Yj().optional().nullable(),animated:s.zM().optional(),selected:s.zM().optional(),deletable:s.zM().optional(),selectable:s.zM().optional(),data:s.g1(s.Yj(),s.bz()).optional()}),_=s.Ik({x:s.ai(),y:s.ai(),zoom:s.ai()}),A=s.Ik({nodes:s.YO(u).min(0),edges:s.YO(p).min(0)}),b=A.extend({viewport:_})},10279:(t,e,a)=>{a.d(e,{K:()=>i});var s=a(25826),r=a(75093);let i=s.Ay$.object({status:s.Ay$.literal(r.R.SUCCESS)});s.Ay$.array(i)},20408:(t,e,a)=>{a.d(e,{M7:()=>n,VV:()=>d,_Y:()=>l,iV:()=>s,jM:()=>i,jc:()=>r});let s={CROP:"crop",RESIZE:"resize",BLUR:"blur",FILTERS:"filters",PREVIEW:"preview",EXTRACT_VIDEO_FRAME:"extract-video-frame",LEVELS:"levels",IMPORT:"import",EXPORT:"export",UPSCALE_IMAGE:"upscale-image",UPSCALE_VIDEO:"upscale-video",REMOVE_BACKGROUND:"remove-background",THREE_D:"3d",MASK_EXTRACTOR:"mask-extractor",VIDEO_TRIMMER:"video-trimmer",STICKER:"sticker",SECTION:"section",ARBITARY_TEXT:"arbitary-text",FREE_DRAW:"free-draw",ROUTER:"router",PROMPT_CONCATENATOR:"prompt-concatenator"},r={SHAPE:"shape",LINE:"line",STICKY_NOTE:"sticky-note"},i={IMAGE:"image",PROMPT:"prompt",TEXT:"text",VIDEO:"video",GHOST:"ghost",...s,...r},n={DEFAULT:"default",PROCESSING:"processing",ERROR:"error"},l={STATIC:"static",DYNAMIC:"dynamic"},d={[i.TEXT]:"prompt",[i.IMAGE]:"image",[i.VIDEO]:"video",[i.PROMPT]:"prompt",[i.GHOST]:"ghost",[i.REMOVE_BACKGROUND]:"image",[i.LEVELS]:"file",[i.BLUR]:"file",[i.FILTERS]:"file",[i.CROP]:"file",[i.RESIZE]:"file",[i.VIDEO_TRIMMER]:"video",[i.ROUTER]:"output",[i.IMPORT]:"file",[i.EXTRACT_VIDEO_FRAME]:"image"}},20941:(t,e,a)=>{a.d(e,{J:()=>n});var s=a(12331),r=a(37328),i=a(65762);let n=t=>{let e=(0,r.rQ)(t.settings),a=(0,r.U9)(t.url);return{...t,settings:e,url:a,tag:i.A.VIDEO_GENERATION,service:s.z1.VIDEO}}},21520:(t,e,a)=>{a.d(e,{U_:()=>o,ZZ:()=>l,hW:()=>c,pO:()=>d});var s=a(39929),r=a.n(s),i=a(25826),n=a(38);let l=i.Ay$.object({assets:i.Ay$.array(n.l)}),d=t=>{let e=t.assets.map(n.O);return{assets:r()(e,["createdAt"],["desc"])}},c=t=>({assets:t.assets.map(n.O)}),o=t=>{let{service:e,...a}=t;return{service:e?e.join(","):void 0,...a}}},25169:(t,e,a)=>{a.d(e,{DY:()=>u,Qw:()=>_,nj:()=>o});var s=a(5633),r=a.n(s),i=a(25826),n=a(89933),l=a(67037),d=a(8070);let c=l.qn.extend({graph:i.Ay$.union([d.cb,i.Ay$.object({})])}),o=l.dz.extend({pages:i.Ay$.array(c)}),u=t=>!r()(t),p=t=>({id:t.id,name:t.name,thumbnail:t.thumbnail?(0,n.t)(t.thumbnail):"",description:t.description||"",createdAt:t.created_at,updatedAt:t.updated_at,graph:u(t.graph)?t.graph:{nodes:[],edges:[],viewport:{x:0,y:0,zoom:1}}}),_=t=>{let e=t.pages.map(p);return{id:t.id,name:t.name,thumbnail:t.thumbnail||"",description:t.description||"",createdAt:t.created_at,updatedAt:t.updated_at,metadata:t.metadata||{},pages:e}}},42203:(t,e,a)=>{a.d(e,{A4:()=>b,Ei:()=>p,Fb:()=>A,U:()=>y,fT:()=>_});var s=a(25826),r=a(12331),i=a(55437),n=a(32162),l=a(31625),d=a(12995),c=a(65762),o=a(59051);let u=s.Ay$.object({width:s.Ay$.number().default(512),height:s.Ay$.number().default(512)}),p=s.Ay$.object({file_ext:s.Ay$.string(),ref_service:s.Ay$.string(),thumbnail_ext:s.Ay$.string(),title:s.Ay$.string(),metadata:l.p}),_=s.Ay$.object({generation:n.aB,thumbnail:n.aB});s.Ay$.enum([i.j.ASSETS_UPLOAD]),s.Ay$.enum([c.A.IMAGE_USER_UPLOAD]);let A=t=>({generation:(0,d._)(t.generation),thumbnail:(0,d._)(t.thumbnail)}),b=t=>{let e=(0,o.b)(_,t.url),a=(0,o.b)(p,t.settings),s=A(e),n=(t=>{let e=(0,o.b)(u,JSON.parse(t.metadata),{width:512,height:512});return{fileExt:t.file_ext,refService:t.ref_service,thumbnailExt:t.thumbnail_ext,title:t.title,metadata:e}})(a);return{...t,settings:n,url:s,tag:c.A.IMAGE_USER_UPLOAD,service:r.z1.USER,endpoint:i.j.ASSETS_UPLOAD,refService:r.z1.IMAGE}},y=t=>({assets:t.assets.map(t=>{try{return b(t)}catch(t){return null}}).filter(t=>null!=t)})},51500:(t,e,a)=>{a.d(e,{JY:()=>A,cA:()=>d,kG:()=>p,oA:()=>l,pj:()=>u,sg:()=>_});var s=a(79536),r=a(20408),i=a(59051),n=a(8070);let l={PENDING:"pending",PROCESSING:"processing",FINISHED:"finished",ERROR:"error"},d=new Set([l.PROCESSING,l.PENDING]),c=n.dr.pick({url:!0,settings:!0,outputs:!0,shouldExecute:!0}).partial().optional().nullable(),o=s.Ik({id:s.Yj(),node_id:s.Yj(),status:s.k5(l),type:s.k5(r.jM),data:c,output:s.g1(s.Yj(),s.L5()).optional().nullable()}),u=s.Ik({id:s.Yj(),page_id:s.Yj(),project_id:s.Yj(),status:s.k5({PENDING:"pending",PROCESSING:"processing",FINISHED:"finished",ERROR:"error"}).or(s.eu("")),subtasks:s.YO(o),created_at:s.Yj(),updated_at:s.Yj()}),p=s.YO(u),_=t=>t.map(A),A=t=>{let e=t.subtasks.filter(h).map(b).filter(t=>null!==t);return{id:t.id,pageId:t.page_id,projectId:t.project_id,status:t.status,subtasks:e,createdAt:t.created_at,updatedAt:t.updated_at}},b=t=>{try{if(!t.output||d.has(t.status))return{id:t.id,nodeId:t.node_id,status:t.status,type:t.type,data:t.data,output:t.output};let e=(0,i.b)(n.ki,t.output);return{id:t.id,nodeId:t.node_id,status:t.status,type:t.type,data:t.data,output:e}}catch(e){return console.log("response",t),console.error("Failed to parse output",e),null}},y=new Set(Object.values({TEXT:"text",IMAGE:"image",VIDEO:"video",REMOVE_BACKGROUND:"remove-background"})),h=t=>{var e;return y.has(t.type)&&!!(null==(e=t.data)?void 0:e.shouldExecute)}},59995:(t,e,a)=>{a.d(e,{Jo:()=>A,P_:()=>p,es:()=>y,mU:()=>_,s1:()=>b});var s=a(25826),r=a(12331),i=a(55437),n=a(32162),l=a(31625),d=a(12995),c=a(65762),o=a(59051);let u=s.Ay$.object({width:s.Ay$.number().default(512),height:s.Ay$.number().default(512)});s.Ay$.enum([i.j.ASSETS_UPLOAD]),s.Ay$.enum([c.A.VIDEO_USER_UPLOAD]);let p=s.Ay$.object({generation:n.aB,thumbnail:n.aB}),_=s.Ay$.object({file_ext:s.Ay$.string(),ref_service:s.Ay$.string(),thumbnail_ext:s.Ay$.string(),title:s.Ay$.string(),metadata:l.p}),A=t=>({generation:(0,d._)(t.generation),thumbnail:(0,d._)(t.thumbnail)}),b=t=>{let e=(0,o.b)(p,t.url),a=(0,o.b)(_,t.settings),s=A(e),n=(t=>{let e=(0,o.b)(u,JSON.parse(t.metadata),{width:512,height:512});return{fileExt:t.file_ext,refService:t.ref_service,thumbnailExt:t.thumbnail_ext,title:t.title,metadata:e}})(a);return{...t,settings:n,url:s,tag:c.A.VIDEO_USER_UPLOAD,service:r.z1.USER,endpoint:i.j.ASSETS_UPLOAD,refService:r.z1.VIDEO}},y=t=>({assets:t.assets.map(t=>{try{return b(t)}catch(t){return null}}).filter(t=>null!=t)})},61508:(t,e,a)=>{a.d(e,{N:()=>p,r:()=>u});var s=a(55437),r=a(22470),i=a(59051),n=a(12331),l=a(44455),d=a(65762),c=a(49074),o=a(71874);let u=t=>{let e=(0,i.b)(r.i,t.endpoint);switch(e){case s.j.GENERATE_IMAGE:case s.j.GENERATE_IMAGE_ASYNC:case s.j.GENERATE_TRANSPARENT_IMAGE:case s.j.GENERATE_TRANSPARENT_IMAGE_ASYNC:return(t=>{let e=(0,c.JO)(t.settings),a=(0,c.qf)(t.url);return{...t,settings:e,url:a,tag:d.A.IMAGE_GENERATION,service:n.z1.IMAGE}})({...t,endpoint:e});case s.j.UPSCALE_IMAGE_ASYNC:case s.j.UPSCALE_IMAGE:return(0,o.C)({...t,endpoint:e});case s.j.REMOVE_IMAGE_BACKGROUND:case s.j.REMOVE_IMAGE_BACKGROUND_ASYNC:return(t=>{let e=(0,l.Mb)(t.settings),a=(0,l.O)(t.url);return{...t,settings:e,url:a,tag:d.A.IMAGE_REMOVE_BG,service:n.z1.IMAGE}})({...t,endpoint:e})}},p=t=>({assets:t.assets.map(t=>{try{return u(t)}catch(t){return null}}).filter(t=>null!=t)})},62956:(t,e,a)=>{a.d(e,{d:()=>u,h:()=>o});var s=a(55437),r=a(46660),i=a(59051),n=a(20941),l=a(12331),d=a(3793),c=a(65762);let o=t=>{let e=(0,i.b)(r.q,t.endpoint);switch(e){case s.j.GENERATE_VIDEO_ASYNC:return(0,n.J)({...t,endpoint:e});case s.j.ENHANCE_VIDEO_UPLOAD:return(t=>{let e=(0,d.uw)(t.settings),a=(0,d.tg)(t.url);return{...t,settings:e,url:a,tag:c.A.VIDEO_UPSCALE,service:l.z1.VIDEO}})({...t,endpoint:e})}},u=t=>({assets:t.assets.map(t=>{try{return o(t)}catch(t){return null}}).filter(t=>null!=t)})},67037:(t,e,a)=>{a.d(e,{S0:()=>l,dz:()=>A,mY:()=>_,n0:()=>u,qn:()=>o,uB:()=>c,vm:()=>p});var s=a(223),r=a.n(s),i=a(79536),n=a(89933);let l={PUBLIC:"public",PERSONAL:"personal",TEAM:"team"},d=i.Ik({user_id:i.Yj(),name:i.Yj(),username:i.Yj(),email:i.Yj()}),c=i.Ik({id:i.Yj(),name:i.Yj(),thumbnail:i.Yj().nullable(),description:i.Yj().nullable(),created_at:i.Yj(),updated_at:i.Yj(),metadata:i.g1(i.Yj(),i.L5()).nullable(),folder_id:i.Yj(),visibility:i.k5(l),owner:d.optional().nullable()}),o=i.Ik({id:i.Yj(),name:i.Yj(),thumbnail:i.Yj().nullable(),description:i.Yj().nullable(),created_at:i.Yj(),updated_at:i.Yj()}),u=t=>{let e=r()(t.updated_at).valueOf();return{id:t.id,name:t.name,thumbnail:t.thumbnail?(0,n.t)(t.thumbnail,e):"",description:t.description||"",createdAt:t.created_at,updatedAt:t.updated_at}},p=t=>{let e=r()(t.updated_at).valueOf();return{id:t.id,name:t.name,thumbnail:t.thumbnail?(0,n.t)(t.thumbnail,e):"",description:t.description||"",createdAt:t.created_at,updatedAt:t.updated_at,metadata:t.metadata||{},folderId:t.folder_id,visibility:t.visibility,owner:t.owner?{id:t.owner.user_id,name:t.owner.name,username:t.owner.username,email:t.owner.email}:void 0}},_=t=>{let e=r()(t.updated_at).valueOf();return{id:t.id,name:t.name,thumbnail:t.thumbnail?(0,n.t)(t.thumbnail,e):"",description:t.description||"",createdAt:t.created_at,updatedAt:t.updated_at,metadata:t.metadata||{}}},A=c.omit({visibility:!0,folder_id:!0,owner:!0})},71874:(t,e,a)=>{a.d(e,{C:()=>n});var s=a(12331),r=a(29003),i=a(65762);let n=t=>{let e=(0,r.IQ)(t.settings),a=(0,r.l5)(t.url);return{...t,settings:e,url:a,tag:i.A.IMAGE_UPSCALE,service:s.z1.IMAGE}}},78311:(t,e,a)=>{a.d(e,{y:()=>s});let s={DEFAULT:"default",CUSTOM:"custom"}},89933:(t,e,a)=>{a.d(e,{t:()=>s});let s=(t,e)=>"".concat(t).concat(t.includes("?")?"&":"?","_cb=").concat(null!=e?e:Date.now())},99636:(t,e,a)=>{a.d(e,{J1:()=>H,gP:()=>K,D_:()=>J});var s=a(89329),r=a(55437),i=a(92184),n=a(59051),l=a(79536);let d=l.Ik({id:l.Yj(),name:l.Yj(),thumbnail:l.Yj().optional().nullable(),description:l.Yj().optional().nullable(),created_at:l.Yj(),updated_at:l.Yj()});var c=a(25826),o=a(67037);let u=o.uB.extend({pages:c.Ay$.array(o.qn)}),p=c.Ay$.object({id:c.Ay$.string()}),_=l.Ik({status:l.Yj()}),A=l.Ik({status:l.Yj()}),b=l.Ik({status:l.Yj()}),y=l.Ik({status:l.Yj()}),h=l.Ik({status:l.Yj()});var m=a(8070);let g=c.Ay$.union([c.Ay$.object({graph:m.cb}),c.Ay$.object({})]),E=c.Ay$.array(o.qn),I=o.uB.extend({pages:c.Ay$.array(o.qn)});var j=a(39929),v=a.n(j);let S=c.Ay$.array(o.uB).nullable();var O=a(51500);let U=c.Ay$.union([c.Ay$.array(O.pj),c.Ay$.null()]);var $=a(25169);let R=c.Ay$.array(o.dz),f=l.YO(O.pj);var Y=a(36270);let w=l.Ik({status:l.Yj()}),T=c.Ay$.object({status:c.Ay$.string()}),k=l.Ik({status:l.Yj()}),M=l.Ik({status:l.Yj()});class N{async createProject(t){let e=await (0,i.hZ)(async()=>this._client.post("".concat(this._baseUrl,"/project"),(t=>{let e=new FormData;return e.append("title",t.title),t.folderId&&e.append("folder_id",t.folderId),t.projectId&&e.append("project_id",t.projectId),t.templateId&&e.append("template_id",t.templateId),t.metadata&&e.append("metadata",JSON.stringify(t.metadata)),e})(t))),a=(t=>{let e=t.pages.map(o.n0);return{id:t.id,name:t.name,thumbnail:t.thumbnail||"",description:t.description||"",createdAt:t.created_at,updatedAt:t.updated_at,pages:e,metadata:t.metadata||{},folderId:t.folder_id,visibility:t.visibility}})((0,n.b)(u,e.data));return{...e,data:a}}async createPage(t){var e,a,s;let r=await (0,i.hZ)(async()=>this._client.post("".concat(this._baseUrl,"/project/").concat(t.projectId,"/page"),(t=>{let e=new FormData;return e.append("title",t.title),e})(t))),l={id:(e=(0,n.b)(d,r.data)).id,name:e.name,thumbnail:null!=(a=e.thumbnail)?a:"",description:null!=(s=e.description)?s:"",createdAt:e.created_at,updatedAt:e.updated_at};return{...r,data:l}}async getProjects(t){let e=await (0,i.hZ)(async()=>{var e,a,s;return this._client.get("".concat(this._baseUrl,"/project"),{params:{parent_id:null!=(e=t.parentId)?e:void 0,org_id:null!=(a=t.orgId)?a:void 0,is_personal:null!=(s=t.isPersonal)?s:void 0}})}),a=(t=>{var e;let a=null!=(e=null==t?void 0:t.map(o.vm))?e:[];return v()(a,["updatedAt"],["desc"])})((0,n.b)(S,e.data));return{...e,data:a}}async getPages(t){let e=await (0,i.hZ)(async()=>this._client.get("".concat(this._baseUrl,"/project/").concat(t.projectId,"/page"))),a=(0,n.b)(E,e.data).map(o.n0);return{...e,data:a}}async updateProject(t){let{signal:e,...a}=t,s=await (0,i.hZ)(async()=>this._client.patch("".concat(this._baseUrl,"/project/").concat(a.projectId),(0,Y.j)(a),{signal:e})),r={status:(0,n.b)(k,s.data).status};return{...s,data:r}}async updatePage(t){let{signal:e,...a}=t,s=await (0,i.hZ)(async()=>this._client.patch("".concat(this._baseUrl,"/project/").concat(a.projectId,"/page/").concat(a.pageId),(0,Y.j)(a),{signal:e})),r={status:(0,n.b)(w,s.data).status};return{...s,data:r}}async deleteProject(t){let{signal:e,...a}=t,s=await (0,i.hZ)(async()=>this._client.delete("".concat(this._baseUrl,"/project/").concat(a.projectId),{signal:e})),r={status:(0,n.b)(A,s.data).status};return{...s,data:r}}async deletePage(t){let{signal:e,...a}=t,s=await (0,i.hZ)(async()=>this._client.delete("".concat(this._baseUrl,"/project/").concat(a.projectId,"/page/").concat(a.pageId),{signal:e})),r={status:(0,n.b)(_,s.data).status};return{...s,data:r}}async getPageGraph(t){let e=await (0,i.hZ)(async()=>this._client.get("".concat(this._baseUrl,"/project/").concat(t.projectId,"/page/").concat(t.pageId,"/graph"))),a=(t=>{if(0===Object.keys(t).length)return{nodes:[],edges:[],viewport:{x:0,y:0,zoom:1}};let e=t.graph;return{nodes:e.nodes,edges:e.edges,viewport:e.viewport}})((0,n.b)(g,e.data));return{...e,data:a}}async updatePageGraph(t){let e=await (0,i.hZ)(async()=>this._client.put("".concat(this._baseUrl,"/project/").concat(t.projectId,"/page/").concat(t.pageId,"/graph"),{nodes:t.graph.nodes,edges:t.graph.edges,viewport:t.graph.viewport})),a={status:(0,n.b)(T,e.data).status};return{...e,data:a}}async getProjectById(t){let e=await (0,i.hZ)(async()=>this._client.get("".concat(this._baseUrl,"/project/").concat(t.projectId))),a=(t=>{let e=t.pages.map(o.n0);return{id:t.id,name:t.name,thumbnail:t.thumbnail||"",description:t.description||"",createdAt:t.created_at,updatedAt:t.updated_at,pages:e,metadata:t.metadata||{},folderId:t.folder_id,visibility:t.visibility}})((0,n.b)(I,e.data));return{...e,data:a}}async createTemplate(t){let e=await (0,i.hZ)(async()=>this._client.post("".concat(this._baseUrl,"/template"),(t=>{let e=new FormData;return e.append("project_id",t.projectId),e})(t))),a={id:(0,n.b)(p,e.data).id};return{...e,data:a}}async getTemplates(){let t=await (0,i.hZ)(async()=>this._client.get("".concat(this._baseUrl,"/template"))),e=(t=>{let e=t.map(o.mY);return v()(e,["createdAt"],["desc"])})((0,n.b)(R,t.data));return{...t,data:e}}async getTemplateById(t){let e=await (0,i.hZ)(async()=>this._client.get("".concat(this._baseUrl,"/template/").concat(t.templateId))),a=(0,n.b)($.nj,e.data);console.log({parsedResponse:a});let s=(0,$.Qw)(a);return{...e,data:s}}async updateTemplate(t){let e=await (0,i.hZ)(async()=>this._client.patch("".concat(this._baseUrl,"/template/").concat(t.templateId),(0,Y.j)(t))),a={status:(0,n.b)(M,e.data).status};return{...e,data:a}}async deleteTemplate(t){let{signal:e,...a}=t,s=await (0,i.hZ)(async()=>this._client.delete("".concat(this._baseUrl,"/template/").concat(a.templateId),{signal:e})),r={status:(0,n.b)(h,s.data).status};return{...s,data:r}}async runTask(t){let e=await (0,i.hZ)(async()=>this._client.post("".concat(this._baseUrl,"/task/run"),{pageId:t.pageId,projectId:t.projectId,orgId:t.orgId,nodes:t.nodes,edges:t.edges,executionCount:t.executionCount})),a=(0,n.b)(f,e.data).map(O.JY);return{...e,data:a}}async getTasks(t){var e;let a=await (0,i.hZ)(async()=>{var e,a,s;return this._client.get("".concat(this._baseUrl,"/task/status"),{params:{taskId:null!=(e=t.taskId)?e:void 0,pageId:null!=(a=t.pageId)?a:void 0,projectId:null!=(s=t.projectId)?s:void 0}})}),s=null===(e=(0,n.b)(U,a.data))?[]:e.map(O.JY);return{...a,data:s}}async deleteTask(t){let{signal:e,...a}=t,s=await (0,i.hZ)(async()=>this._client.delete("".concat(this._baseUrl,"/task"),{signal:e,params:{id:a.taskIds.join(",")}})),r={status:(0,n.b)(y,s.data).status};return{...s,data:r}}async deleteSubtask(t){let{signal:e,...a}=t,s=await (0,i.hZ)(async()=>this._client.delete("".concat(this._baseUrl,"/subtask"),{signal:e,params:{id:a.subtaskIds.join(",")}})),r={status:(0,n.b)(b,s.data).status};return{...s,data:r}}constructor(t){this._baseUrl=r.j.FLOW,this._client=t.client}}var P=a(12331),D=a(1654),G=a(32162),L=a(65762),C=a(42203),x=a(59995);let z=c.Ay$.object({width:c.Ay$.number().default(512),height:c.Ay$.number().default(512),duration:c.Ay$.number().optional(),aspectRatio:c.Ay$.string().optional(),extension:c.Ay$.string().optional()}),V=t=>{let e=(0,n.b)(z,JSON.parse(t.metadata),{width:512,height:512,duration:void 0,aspectRatio:void 0,extension:void 0});return{fileExt:t.file_ext,refService:t.ref_service,thumbnailExt:t.thumbnail_ext,title:t.title,metadata:e}};var Z=a(61508),B=a(62956);class F extends D.i{async getAllFlowUserGenerations(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=await this.getAllAssets({service:[P.z1.IMAGE,P.z1.VIDEO],refService:P.z1.IMAGINE_FLOWS,...t}),a={assets:e.data.assets.map(t=>{try{switch(t.service){case P.z1.IMAGE:return(0,Z.r)(t);case P.z1.VIDEO:return(0,B.h)(t);default:return null}}catch(t){return null}}).filter(t=>null!=t)};return{...e,data:a}}async getAllFlowUserAssets(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=await this.getAllAssets({service:[P.z1.USER],refService:P.z1.IMAGINE_FLOWS,...t}),a={assets:e.data.assets.map(t=>{try{switch(t.category){case G.em.IMAGE:let e=(0,n.b)(C.fT,t.url),a=(0,n.b)(C.Ei,t.settings),s=(0,C.Fb)(e),i=V(a);return{...t,settings:i,url:s,tag:L.A.IMAGE_USER_UPLOAD,service:P.z1.USER,endpoint:r.j.ASSETS_UPLOAD,refService:P.z1.IMAGINE_FLOWS};case G.em.VIDEO:let l=(0,n.b)(x.P_,t.url),d=(0,n.b)(x.mU,t.settings),c=(0,x.Jo)(l),o=V(d);return{...t,settings:o,url:c,tag:L.A.VIDEO_USER_UPLOAD,service:P.z1.USER,endpoint:r.j.ASSETS_UPLOAD,refService:P.z1.IMAGINE_FLOWS};default:return null}}catch(t){return null}}).filter(t=>null!=t)};return{...e,data:a}}async uploadFlowUserAsset(t){let e=await this.uploadUserAsset({...t,ref_service:P.eB[P.z1.IMAGINE_FLOWS],metadata:JSON.stringify(t.metadata)}),a=e.data;return{...e,data:a}}constructor(t){super(t)}}var W=a(19533);let J=(0,a(48164).d)(s.A.create({baseURL:W.h.NEXT_PUBLIC_ANPU_API_URL}),{request:!1,response:!1}),H=new F({client:J,asyncBucketUrl:W.h.NEXT_PUBLIC_ASYNC_BUCKET_URL}),K=new N({client:J})}}]);